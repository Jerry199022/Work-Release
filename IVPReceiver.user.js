// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V15
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。後臺保活功能。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// @downloadURL  https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// ==/UserScript==

(function(_0x334306,_0x1f7bf4){const _0x2bea76={_0x31af53:0xf1,_0x2e8bfc:0xeb,_0x2836d8:0xcc,_0x5df66b:0xd5},_0x4c6fc3=_0x31f5,_0x50c775=_0x334306();while(!![]){try{const _0x1e4fb5=parseInt(_0x4c6fc3(0xcb))/0x1*(-parseInt(_0x4c6fc3(0xb9))/0x2)+parseInt(_0x4c6fc3(_0x2bea76._0x31af53))/0x3*(parseInt(_0x4c6fc3(0xe9))/0x4)+parseInt(_0x4c6fc3(_0x2bea76._0x2e8bfc))/0x5+-parseInt(_0x4c6fc3(0xc8))/0x6+-parseInt(_0x4c6fc3(0xcf))/0x7+parseInt(_0x4c6fc3(_0x2bea76._0x2836d8))/0x8*(parseInt(_0x4c6fc3(0xc6))/0x9)+parseInt(_0x4c6fc3(_0x2bea76._0x5df66b))/0xa;if(_0x1e4fb5===_0x1f7bf4)break;else _0x50c775['push'](_0x50c775['shift']());}catch(_0x3edc21){_0x50c775['push'](_0x50c775['shift']());}}}(_0x46a3,0x71ccc),(function(){'use strict';const _0x4b5dd3={_0x257c85:0xf5,_0x18c901:0xf7,_0x7ba31:0xb8,_0x25912a:0xee,_0x42284e:0xd3,_0xfd662e:0xd6},_0x4ae432={_0x2d1a5d:0xae},_0x3095e0={_0x3e44ad:0xbf,_0x229147:0xb0,_0x2d23b4:0xd4,_0x1a01d8:0xbf,_0x2f5391:0xd4,_0x45e1d1:0xc7,_0x310fec:0xc3,_0x1ad72d:0xe1,_0x2cc728:0xbb,_0x426c8e:0xe6},_0x4e696b={_0x3396fb:0xee,_0x2096f5:0xb7,_0x55a43f:0xe2,_0x31f98a:0xb5,_0x5de6eb:0xbf,_0x70c646:0xbd,_0x5d125e:0xbc,_0x185968:0xd4,_0x2249fa:0xd0,_0x1bdb78:0xf4,_0x2fe54d:0xac,_0x4cb56b:0xc1,_0x48dfe8:0xda,_0x5b8010:0xdf,_0x51c969:0xc7,_0xfa2fa8:0xf8,_0x5e304d:0xf3},_0x149de7={_0x43f20c:0xbf,_0x288351:0xc4,_0x578085:0xba,_0x37cca8:0xe5,_0x135982:0xd8,_0x2aba0d:0xca},_0x3d1219={_0x1a92bc:0xed},_0x389413=_0x31f5;const _0x36fc88=window[_0x389413(_0x4b5dd3._0x257c85)][_0x389413(_0x4b5dd3._0x18c901)],_0x55b7f5=_0x36fc88[_0x389413(0xd7)](_0x389413(0xea)),_0x17d882=_0x36fc88[_0x389413(0xd7)](_0x389413(_0x4b5dd3._0x7ba31)),_0x214113='https://upsdrive.lightning.force.com';console[_0x389413(_0x4b5dd3._0x25912a)](_0x389413(0xdb)+_0x36fc88),console[_0x389413(_0x4b5dd3._0x25912a)](_0x389413(0xce)+(_0x55b7f5?_0x389413(0xc9):_0x17d882?_0x389413(0xb2):_0x389413(_0x4b5dd3._0x42284e)));let _0x2cd47a=0x0;const _0x50f83e=_0x25f2aa=>new Promise(_0x4e1558=>setTimeout(_0x4e1558,_0x25f2aa));function _0x21aec4(_0x1707fc,_0x32ef72=document[_0x389413(0xdc)],_0xc65228=0x1388){return new Promise((_0x21421e,_0x5a68ac)=>{const _0x109c19=_0x32ef72['querySelector'](_0x1707fc);if(_0x109c19)return _0x21421e(_0x109c19);const _0x36a45b=new MutationObserver(()=>{const _0x1e64d5=_0x31f5,_0x315003=_0x32ef72['querySelector'](_0x1707fc);_0x315003&&(_0x36a45b[_0x1e64d5(0xb6)](),_0x21421e(_0x315003));});_0x36a45b['observe'](_0x32ef72,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0x251017=_0x31f5;_0x36a45b[_0x251017(0xb6)](),_0x5a68ac(new Error('等待元素\x20\x22'+_0x1707fc+_0x251017(0xf9)));},_0xc65228);});}function _0x1b2f1e(){const _0x3ce261=_0x389413;try{const _0x2eda40=new Blob([_0x3ce261(_0x3d1219._0x1a92bc)],{'type':_0x3ce261(0xf6)}),_0xb335ae=new Worker(URL[_0x3ce261(0xc5)](_0x2eda40));_0xb335ae[_0x3ce261(0xb1)]=()=>{},console[_0x3ce261(0xee)](_0x3ce261(0xc0));}catch(_0x448607){console[_0x3ce261(0xac)](_0x3ce261(0xc2),_0x448607);}}function _0x188ae1(_0x3ea75b){const _0x21d267=_0x389413;if(!_0x3ea75b)return![];let _0x9e5a24=null,_0x1220fd='';if(_0x55b7f5)_0x9e5a24=document[_0x21d267(_0x149de7._0x43f20c)](_0x21d267(_0x149de7._0x288351));else _0x17d882&&(_0x9e5a24=document['getElementById'](_0x21d267(_0x149de7._0x578085)));if(_0x9e5a24){_0x1220fd=_0x9e5a24[_0x21d267(_0x149de7._0x37cca8)][_0x21d267(0xd9)]();const _0x373eac=_0x1220fd[_0x21d267(_0x149de7._0x135982)](/\s/g,''),_0x3aacae=_0x3ea75b[_0x21d267(0xd8)](/\s/g,'');if(_0x373eac[_0x21d267(0xca)]()===_0x3aacae[_0x21d267(_0x149de7._0x2aba0d)]())return!![];}return![];}async function _0x2c0c0d(_0x5c114e){const _0x56384b=_0x389413;console[_0x56384b(_0x4e696b._0x3396fb)](_0x56384b(_0x4e696b._0x2096f5)+_0x5c114e);const _0x4c2d6b=[{'name':_0x56384b(0xaf),'inputId':_0x56384b(0xb3),'btnId':_0x56384b(0xd1)},{'name':_0x56384b(_0x4e696b._0x55a43f),'inputId':'stApp_trackingNumber','btnId':_0x56384b(_0x4e696b._0x31f98a)}];try{const _0x8d5219=document[_0x56384b(_0x4e696b._0x5de6eb)](_0x56384b(_0x4e696b._0x70c646));_0x8d5219&&(console[_0x56384b(0xee)](_0x56384b(_0x4e696b._0x5d125e)),_0x8d5219[_0x56384b(_0x4e696b._0x185968)](),await _0x50f83e(0x12c));let _0x32ff5f=document[_0x56384b(0xd0)](_0x4c2d6b[0x0][_0x56384b(0xf4)])||document[_0x56384b(_0x4e696b._0x2249fa)](_0x4c2d6b[0x1][_0x56384b(_0x4e696b._0x1bdb78)]);if(!_0x32ff5f)try{const _0x539cc3='#'+_0x4c2d6b[0x0]['inputId']+',\x20#'+_0x4c2d6b[0x1]['inputId'];_0x32ff5f=await _0x21aec4(_0x539cc3,document['body'],0xbb8);}catch(_0x53bb82){console[_0x56384b(_0x4e696b._0x2fe54d)](_0x56384b(_0x4e696b._0x4cb56b));return;}const _0x38a047=_0x4c2d6b[_0x56384b(_0x4e696b._0x48dfe8)](_0xc4b38=>_0xc4b38[_0x56384b(0xf4)]===_0x32ff5f['id']);if(!_0x38a047)return;_0x32ff5f[_0x56384b(0xe3)](),_0x32ff5f[_0x56384b(_0x4e696b._0x5b8010)]='',_0x32ff5f[_0x56384b(0xdf)]=_0x5c114e,_0x32ff5f[_0x56384b(0xc7)](new Event('input',{'bubbles':!![]})),_0x32ff5f[_0x56384b(_0x4e696b._0x51c969)](new Event(_0x56384b(_0x4e696b._0xfa2fa8),{'bubbles':!![]})),_0x32ff5f[_0x56384b(0xc7)](new Event(_0x56384b(0xe7),{'bubbles':!![]})),await _0x50f83e(0xc8);let _0x58b8a5=document[_0x56384b(_0x4e696b._0x2249fa)](_0x38a047[_0x56384b(0xf0)]);if(!_0x58b8a5)try{_0x58b8a5=await _0x21aec4('#'+_0x38a047[_0x56384b(0xf0)],document[_0x56384b(0xdc)],0x7d0);}catch(_0x5d5d1b){}if(_0x58b8a5){_0x58b8a5['click']();try{const _0x9c1093=await _0x21aec4(_0x56384b(_0x4e696b._0x5e304d),document[_0x56384b(0xdc)],0x2710);_0x9c1093&&(await _0x50f83e(0x64),_0x9c1093[_0x56384b(_0x4e696b._0x185968)]());}catch(_0x419793){}}}catch(_0x12ff04){console[_0x56384b(0xac)](_0x56384b(0xe4),_0x12ff04);}}async function _0x29756d(_0x3110f9){const _0x2a5050=_0x389413;console[_0x2a5050(0xee)]('[IVP]\x20執行查詢:\x20'+_0x3110f9);const _0x28f7a8=document['querySelectorAll'](_0x2a5050(0xdd));for(const _0x113c15 of _0x28f7a8){_0x113c15[_0x2a5050(0xd4)](),await _0x50f83e(0x64);}try{const _0x3531ff=document[_0x2a5050(_0x3095e0._0x3e44ad)](_0x2a5050(_0x3095e0._0x229147));if(_0x3531ff){const _0x177b96=document['querySelector'](_0x2a5050(0xad));if(_0x177b96)_0x177b96[_0x2a5050(_0x3095e0._0x2d23b4)]();await _0x50f83e(0xc8);}const _0x371c2e=document[_0x2a5050(_0x3095e0._0x1a01d8)](_0x2a5050(0xf2));_0x371c2e&&(_0x371c2e[_0x2a5050(_0x3095e0._0x2f5391)](),await _0x50f83e(0xc8));const _0x567262=await _0x21aec4(_0x2a5050(0xe0));_0x567262[_0x2a5050(0xdf)]=_0x3110f9,_0x567262[_0x2a5050(_0x3095e0._0x45e1d1)](new Event(_0x2a5050(_0x3095e0._0x310fec),{'bubbles':!![]}));const _0x28960b=await _0x21aec4(_0x2a5050(_0x3095e0._0x1ad72d));if(_0x28960b[_0x2a5050(0xbb)])await _0x50f83e(0xc8);!_0x28960b[_0x2a5050(_0x3095e0._0x2cc728)]?_0x28960b[_0x2a5050(0xd4)]():console[_0x2a5050(_0x3095e0._0x426c8e)]('[IVP]\x20提交按鈕仍處於禁用狀態。');}catch(_0x223daa){console['error'](_0x2a5050(0xbe),_0x223daa);}}window[_0x389413(0xb4)](_0x389413(_0x4b5dd3._0xfd662e),async function(_0x7acc1f){const _0x3e471c=_0x389413;if(_0x7acc1f['origin']!==_0x214113)return;const _0x1ebc2a=_0x7acc1f['data'];if(_0x1ebc2a?.[_0x3e471c(_0x4ae432._0x2d1a5d)]===_0x3e471c(0xcd)&&_0x1ebc2a[_0x3e471c(0xef)]){const {trackingNumber:_0x7fbbae,timestamp:_0x4d4336}=_0x1ebc2a['payload'];if(_0x4d4336>_0x2cd47a){const _0xfbafde=_0x188ae1(_0x7fbbae);if(_0xfbafde)console[_0x3e471c(0xee)](_0x3e471c(0xde)+_0x7fbbae+_0x3e471c(0xec));else{if(_0x55b7f5)await _0x29756d(_0x7fbbae);else _0x17d882&&await _0x2c0c0d(_0x7fbbae);}_0x2cd47a=_0x4d4336,_0x7acc1f['source']&&_0x7acc1f[_0x3e471c(0xe8)]['postMessage']({'type':'CEC_REQUEST_RECEIVED','payload':{'timestamp':_0x4d4336}},_0x7acc1f[_0x3e471c(0xd2)]);}}},![]),_0x1b2f1e();}()));function _0x31f5(_0x5f0ca4,_0x3bff04){const _0x46a3df=_0x46a3();return _0x31f5=function(_0x31f554,_0x414581){_0x31f554=_0x31f554-0xac;let _0xa43575=_0x46a3df[_0x31f554];if(_0x31f5['dhQJEb']===undefined){var _0x528340=function(_0x36fc88){const _0x55b7f5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x17d882='',_0x214113='';for(let _0x2cd47a=0x0,_0x50f83e,_0x21aec4,_0x1b2f1e=0x0;_0x21aec4=_0x36fc88['charAt'](_0x1b2f1e++);~_0x21aec4&&(_0x50f83e=_0x2cd47a%0x4?_0x50f83e*0x40+_0x21aec4:_0x21aec4,_0x2cd47a++%0x4)?_0x17d882+=String['fromCharCode'](0xff&_0x50f83e>>(-0x2*_0x2cd47a&0x6)):0x0){_0x21aec4=_0x55b7f5['indexOf'](_0x21aec4);}for(let _0x188ae1=0x0,_0x2c0c0d=_0x17d882['length'];_0x188ae1<_0x2c0c0d;_0x188ae1++){_0x214113+='%'+('00'+_0x17d882['charCodeAt'](_0x188ae1)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x214113);};_0x31f5['VzllOd']=_0x528340,_0x5f0ca4=arguments,_0x31f5['dhQJEb']=!![];}const _0x4b6f81=_0x46a3df[0x0],_0x20d63b=_0x31f554+_0x4b6f81,_0x14b770=_0x5f0ca4[_0x20d63b];return!_0x14b770?(_0xa43575=_0x31f5['VzllOd'](_0xa43575),_0x5f0ca4[_0x20d63b]=_0xa43575):_0xa43575=_0x14b770,_0xa43575;},_0x31f5(_0x5f0ca4,_0x3bff04);}function _0x46a3(){const _0x43e81=['yMX1CG','C291CMnL','mtK4mdr3t2Ljseq','AxzWlMLUC2LKzs51ChmUy29T','mtaXnZuZmg5tuxj4va','77Ym6lEZ6ygo5P+L6kMI44cc','cIaGicaGicaGicaGicaGicbZzxrjBNrLCNzHBcGOksa9pIb7cIaGicaGicaGicaGicaGicaGicaGC2vSzI5WB3n0twvZC2fNzsGNDgLJAYCPoWOGicaGicaGicaGicaGicaGFsWGnJaWmdaPoWOGicaGicaGicaGica','Bg9N','Cgf5Bg9Hza','yNrUswq','mZmZAMLNu0D1','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLTHCMLHlwXHyMvSpsjdBgvHCIjD','i3n0x0fWCf9wAwv3x0rLDgfPBhm','Aw5WDxrjza','Bg9JyxrPB24','yxbWBgLJyxrPB24VAMf2yxnJCMLWDa','Ag9ZDg5HBwu','y2HHBMDL','iIdOTOxMMyi','zxjYB3i','i3rVz2DSzs12AxnPyMLSAxr5id4GyNv0Dg9U','DhLWzq','vhjHy2SGqwDHAw4GkfrVCcK','i21HAw5dB250ywLUzxiGpIbHChaTDhjHy2TPBMCGpIbKAxyGpIbKAxyGpIbKAxyUy29UDgfPBMvYlwzSDwLKlMqTBM9Uzq','B25TzxnZywDL','vvbtifDLyIbnB2rL','C3rbChbFDhjHy2Tbz2fPBL90CMfJA2LUz051BuvUDhj5','ywrKrxzLBNrmAxn0zw5LCG','C3rbChbFyNrUvhjHy2S','zgLZy29UBMvJDa','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','DxbZlMnVBq','ntK4mtzNthHeB0K','C3rbChbFDhjHy2TPBMDoDw1Izxi','zgLZywjSzwq','w1vquYbxzwjDioAQOUA4RowiSow9IoEQL+MxNoMwIEAmIEMiLE+8JoATO+wCQoM7NUAtII4UlG','yNv0Dg9UlMnSB3nLw2rHDgeTzgLZBwLZCZ0IBw9KywWIxq','w0Lwuf0G5z+36kgm5yE66yYVoG','CxvLCNLtzwXLy3rVCG','w0TLzxbbBgL2zv0G5l+D5Rs75QMF5yI25BEY5zwF5yUvic0G6Ac7546hoIaX5yIg6zcyl+ASOq','w1vquYbxzwjDioACQUAjVUwiSos7U+s9LEwpR+EuQoEAHoI8UowfPEAHHUoaGG','w0TLzxbbBgL2zv0G5zwF5yUv5AsX5PwxoG','Aw5WDxq','AdyUAdz0CMfJA2LUzYbZCgfU','y3jLyxrLt2jQzwn0vvjm','mJa4ohLHv1rLua','zgLZCgf0y2HfDMvUDa','ntmWmdmYmLHgDw5xua','svzqie1Vzgu','Dg9mB3DLCKnHC2u','mtDmAMjLwuu','mtyZotjAAgfMDuu','q0vdx1nfqvjdsf9srvfvrvnu','w01VzgvDia','mZGXmJKYmurJs3H0zq','z2v0rwXLBwvUDej5swq','C3rbChbFDhjHy2Tbz2fPBL9NzxruCMfJAW','B3jPz2LU','vw5RBM93BIbnB2rL','y2XPy2S','mte3ndiXntbmwxjSDfq','BwvZC2fNzq','Aw5JBhvKzxm','CMvWBgfJzq','DhjPBq','zMLUza','w1vUAxzLCNnHBcbszwnLAxzLCIbwmtrDiowvN+wlLEAwVdOG','yM9KEq','zgL2lMnKAY1VDMvYBgf5lxbHBMuGBgK6AgfZkgvTlMzHlxrPBwvZkq','w1jLy2vPDMvYxsdPOihPNAlLT7lPOA/NPlROMz/NORWG','DMfSDwu','Aw5WDxrBAwq9iKvUDgvYifrYywnRAw5Nie51BwjLCIjD','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLT0ExbLpsjZDwjTAxqIxq','twfPBIbuCMfJAYaOq2vUDgvYkq','zM9JDxm','w1vquYbxzwjDiowFT+IHJowhUUMmRZO','Dgv4DenVBNrLBNq','D2fYBG'];_0x46a3=function(){return _0x43e81;};return _0x46a3();}