// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V15
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。後臺保活功能。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// @downloadURL  https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// ==/UserScript==

(function(_0x58786e,_0x54109e){const _0x2a731e={_0x48c0bc:0x10b,_0x47ba4b:0xf8,_0x347dcb:0x113,_0x4fc9c4:0x103},_0x5de1ce=_0x3e4b,_0x18f17b=_0x58786e();while(!![]){try{const _0x4b1e5c=-parseInt(_0x5de1ce(0xe8))/0x1+-parseInt(_0x5de1ce(_0x2a731e._0x48c0bc))/0x2*(parseInt(_0x5de1ce(0x122))/0x3)+-parseInt(_0x5de1ce(_0x2a731e._0x47ba4b))/0x4*(-parseInt(_0x5de1ce(_0x2a731e._0x347dcb))/0x5)+-parseInt(_0x5de1ce(0xf4))/0x6+-parseInt(_0x5de1ce(_0x2a731e._0x4fc9c4))/0x7+-parseInt(_0x5de1ce(0xfd))/0x8+parseInt(_0x5de1ce(0xec))/0x9;if(_0x4b1e5c===_0x54109e)break;else _0x18f17b['push'](_0x18f17b['shift']());}catch(_0x111bb6){_0x18f17b['push'](_0x18f17b['shift']());}}}(_0xef82,0xb0174),(function(){'use strict';const _0x3e22ed={_0x4096e5:0xef,_0x368d14:0x110,_0x4cafa7:0xf1,_0x4d0464:0x121,_0x56f728:0xf9,_0x50a562:0x100,_0x19e40e:0x105},_0x4950b1={_0x41c55b:0x11c,_0x5678a9:0xfa,_0x11e6c6:0x106,_0x8199bc:0x114,_0x3ad1f4:0xfc,_0x2e3a1e:0xff,_0x1159f7:0x109,_0x45be4e:0x108},_0x423c4a={_0x5963bc:0x117,_0x5ca480:0x10c,_0x1335f7:0x124,_0x374ffe:0xeb,_0xfc5a5c:0xe7,_0x4f38e8:0xe3,_0x46ce9e:0xe2},_0x3b5bc4={_0x24670b:0xe9,_0x4396f7:0x124,_0x31662d:0xea,_0x5db937:0x10c,_0x38723e:0x101,_0x436fda:0xf2,_0x4fd644:0x101,_0x46465b:0xe1,_0xcab7c8:0xe3,_0x45a5ce:0xf2,_0x21bcac:0x107,_0x19a557:0x118},_0x2065ca={_0x2312a2:0x124,_0x1b58fd:0xe4,_0x9f9a11:0x115,_0x2e1a68:0x115,_0x1bd700:0x11d},_0x1b13d8={_0x540ae6:0xfe,_0x415537:0xe1},_0x2f6713={_0x579186:0x125},_0x3b8604=_0x3e4b;const _0x235d41=window[_0x3b8604(_0x3e22ed._0x4096e5)]['hostname'],_0x2baf7b=_0x235d41[_0x3b8604(0x10e)](_0x3b8604(0xe6)),_0x24dd8a=_0x235d41['includes'](_0x3b8604(_0x3e22ed._0x368d14)),_0x21d1f4=_0x3b8604(0xe5);console['log']('[Universal\x20Receiver\x20V14]\x20啟動於:\x20'+_0x235d41),console[_0x3b8604(0xfe)](_0x3b8604(_0x3e22ed._0x4cafa7)+(_0x2baf7b?_0x3b8604(_0x3e22ed._0x4d0464):_0x24dd8a?_0x3b8604(_0x3e22ed._0x56f728):_0x3b8604(0x11f)));let _0x3479da=0x0;const _0x17c6d5=_0x46d01b=>new Promise(_0x2b6a08=>setTimeout(_0x2b6a08,_0x46d01b));function _0x4741cd(_0x48917d,_0x52f041=document[_0x3b8604(0xfb)],_0x26a498=0x1388){const _0x8614e7={_0x34df20:0x104};return new Promise((_0xf1de7c,_0x959af9)=>{const _0x3c5bc2={_0x44a4ee:0x124},_0x33a7a1=_0x3e4b,_0x32263e=_0x52f041[_0x33a7a1(0x124)](_0x48917d);if(_0x32263e)return _0xf1de7c(_0x32263e);const _0x592e06=new MutationObserver(()=>{const _0x145c14=_0x33a7a1,_0x585f19=_0x52f041[_0x145c14(_0x3c5bc2._0x44a4ee)](_0x48917d);_0x585f19&&(_0x592e06[_0x145c14(0x104)](),_0xf1de7c(_0x585f19));});_0x592e06[_0x33a7a1(_0x2f6713._0x579186)](_0x52f041,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0x3227ea=_0x33a7a1;_0x592e06[_0x3227ea(_0x8614e7._0x34df20)](),_0x959af9(new Error(_0x3227ea(0x119)+_0x48917d+'\x22\x20超時'));},_0x26a498);});}function _0x193978(){const _0x1c0bc6=_0x3b8604;try{const _0x2d5cc6=new Blob(['\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20setInterval(()\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20self.postMessage(\x27tick\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20},\x2060000);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'],{'type':_0x1c0bc6(0xf0)}),_0x3c4fcd=new Worker(URL[_0x1c0bc6(0x10a)](_0x2d5cc6));_0x3c4fcd[_0x1c0bc6(0x112)]=()=>{},console[_0x1c0bc6(_0x1b13d8._0x540ae6)]('[KeepAlive]\x20保活機制已啟動\x20-\x20頻率:\x201分鐘/次');}catch(_0x1bd4ea){console[_0x1c0bc6(_0x1b13d8._0x415537)](_0x1c0bc6(0xed),_0x1bd4ea);}}function _0x3883bd(_0xc81df1){const _0x398afa=_0x3b8604;if(!_0xc81df1)return![];let _0x5cfd03=null,_0xceb0f5='';if(_0x2baf7b)_0x5cfd03=document[_0x398afa(_0x2065ca._0x2312a2)](_0x398afa(0x111));else _0x24dd8a&&(_0x5cfd03=document['getElementById'](_0x398afa(0xf7)));if(_0x5cfd03){_0xceb0f5=_0x5cfd03[_0x398afa(0x102)][_0x398afa(_0x2065ca._0x1b58fd)]();const _0x125734=_0xceb0f5[_0x398afa(_0x2065ca._0x9f9a11)](/\s/g,''),_0x49c2a4=_0xc81df1[_0x398afa(_0x2065ca._0x2e1a68)](/\s/g,'');if(_0x125734['toLowerCase']()===_0x49c2a4[_0x398afa(_0x2065ca._0x1bd700)]())return!![];}return![];}async function _0x49373f(_0x5d1490){const _0x1cdf04=_0x3b8604;console['log'](_0x1cdf04(0xee)+_0x5d1490);const _0x150b32=[{'name':_0x1cdf04(0x120),'inputId':'stApp_trackAgain_trackingNumEntry','btnId':_0x1cdf04(0xf5)},{'name':_0x1cdf04(_0x3b5bc4._0x24670b),'inputId':'stApp_trackingNumber','btnId':_0x1cdf04(0xe0)}];try{const _0x56d6ed=document[_0x1cdf04(_0x3b5bc4._0x4396f7)]('button.close[data-dismiss=\x22modal\x22]');_0x56d6ed&&(console['log'](_0x1cdf04(_0x3b5bc4._0x31662d)),_0x56d6ed[_0x1cdf04(_0x3b5bc4._0x5db937)](),await _0x17c6d5(0x12c));let _0x1c45a0=document[_0x1cdf04(0xf2)](_0x150b32[0x0][_0x1cdf04(_0x3b5bc4._0x38723e)])||document[_0x1cdf04(_0x3b5bc4._0x436fda)](_0x150b32[0x1][_0x1cdf04(_0x3b5bc4._0x4fd644)]);if(!_0x1c45a0)try{const _0x1bdbe8='#'+_0x150b32[0x0]['inputId']+_0x1cdf04(0x10d)+_0x150b32[0x1][_0x1cdf04(0x101)];_0x1c45a0=await _0x4741cd(_0x1bdbe8,document['body'],0xbb8);}catch(_0x58b046){console[_0x1cdf04(_0x3b5bc4._0x46465b)](_0x1cdf04(0x11b));return;}const _0x264893=_0x150b32['find'](_0x296c09=>_0x296c09[_0x1cdf04(0x101)]===_0x1c45a0['id']);if(!_0x264893)return;_0x1c45a0[_0x1cdf04(0xf6)](),_0x1c45a0['value']='',_0x1c45a0[_0x1cdf04(0x123)]=_0x5d1490,_0x1c45a0['dispatchEvent'](new Event('input',{'bubbles':!![]})),_0x1c45a0[_0x1cdf04(_0x3b5bc4._0xcab7c8)](new Event('change',{'bubbles':!![]})),_0x1c45a0[_0x1cdf04(0xe3)](new Event('blur',{'bubbles':!![]})),await _0x17c6d5(0xc8);let _0xee9d58=document[_0x1cdf04(_0x3b5bc4._0x45a5ce)](_0x264893[_0x1cdf04(0x107)]);if(!_0xee9d58)try{_0xee9d58=await _0x4741cd('#'+_0x264893[_0x1cdf04(_0x3b5bc4._0x21bcac)],document[_0x1cdf04(0xfb)],0x7d0);}catch(_0x5122d5){}if(_0xee9d58){_0xee9d58[_0x1cdf04(0x10c)]();try{const _0x1bd738=await _0x4741cd(_0x1cdf04(0x11a),document[_0x1cdf04(0xfb)],0x2710);_0x1bd738&&(await _0x17c6d5(0x64),_0x1bd738['click']());}catch(_0x3f646e){}}}catch(_0x3bf41f){console['error'](_0x1cdf04(_0x3b5bc4._0x19a557),_0x3bf41f);}}async function _0x49d0e0(_0x308a45){const _0x3bbc69=_0x3b8604;console[_0x3bbc69(0xfe)](_0x3bbc69(_0x423c4a._0x5963bc)+_0x308a45);const _0x2e165f=document['querySelectorAll']('div.cdk-overlay-pane\x20li:has(em.fa-times)');for(const _0x22387a of _0x2e165f){_0x22387a[_0x3bbc69(_0x423c4a._0x5ca480)](),await _0x17c6d5(0x64);}try{const _0x42c434=document[_0x3bbc69(_0x423c4a._0x1335f7)](_0x3bbc69(0x10f));if(_0x42c434){const _0xa3a362=document['querySelector']('#toggle-visibility\x20>\x20button');if(_0xa3a362)_0xa3a362[_0x3bbc69(_0x423c4a._0x5ca480)]();await _0x17c6d5(0xc8);}const _0x31c3a7=document[_0x3bbc69(0x124)](_0x3bbc69(_0x423c4a._0x374ffe));_0x31c3a7&&(_0x31c3a7['click'](),await _0x17c6d5(0xc8));const _0x575450=await _0x4741cd(_0x3bbc69(_0x423c4a._0xfc5a5c));_0x575450[_0x3bbc69(0x123)]=_0x308a45,_0x575450[_0x3bbc69(_0x423c4a._0x4f38e8)](new Event('input',{'bubbles':!![]}));const _0x5eb781=await _0x4741cd(_0x3bbc69(0x116));if(_0x5eb781[_0x3bbc69(0xf3)])await _0x17c6d5(0xc8);!_0x5eb781[_0x3bbc69(0xf3)]?_0x5eb781['click']():console['warn']('[IVP]\x20提交按鈕仍處於禁用狀態。');}catch(_0x258376){console[_0x3bbc69(0xe1)](_0x3bbc69(_0x423c4a._0x46ce9e),_0x258376);}}window[_0x3b8604(_0x3e22ed._0x50a562)](_0x3b8604(_0x3e22ed._0x19e40e),async function(_0x220c4e){const _0x20faf=_0x3b8604;if(_0x220c4e['origin']!==_0x21d1f4)return;const _0xfa27db=_0x220c4e[_0x20faf(_0x4950b1._0x41c55b)];if(_0xfa27db?.[_0x20faf(_0x4950b1._0x5678a9)]===_0x20faf(_0x4950b1._0x11e6c6)&&_0xfa27db[_0x20faf(_0x4950b1._0x8199bc)]){const {trackingNumber:_0x4b685c,timestamp:_0x131002}=_0xfa27db[_0x20faf(_0x4950b1._0x8199bc)];if(_0x131002>_0x3479da){const _0x46ac15=_0x3883bd(_0x4b685c);if(_0x46ac15)console['log'](_0x20faf(_0x4950b1._0x3ad1f4)+_0x4b685c+_0x20faf(0x11e));else{if(_0x2baf7b)await _0x49d0e0(_0x4b685c);else _0x24dd8a&&await _0x49373f(_0x4b685c);}_0x3479da=_0x131002,_0x220c4e['source']&&_0x220c4e[_0x20faf(_0x4950b1._0x2e3a1e)]['postMessage']({'type':_0x20faf(_0x4950b1._0x1159f7),'payload':{'timestamp':_0x131002}},_0x220c4e[_0x20faf(_0x4950b1._0x45be4e)]);}}},![]),_0x193978();}()));function _0x3e4b(_0x2d53d4,_0x311dca){const _0xef822a=_0xef82();return _0x3e4b=function(_0x3e4bc5,_0x222b37){_0x3e4bc5=_0x3e4bc5-0xe0;let _0x41235e=_0xef822a[_0x3e4bc5];if(_0x3e4b['idExCR']===undefined){var _0x337c9d=function(_0x235d41){const _0x2baf7b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x24dd8a='',_0x21d1f4='';for(let _0x3479da=0x0,_0x17c6d5,_0x4741cd,_0x193978=0x0;_0x4741cd=_0x235d41['charAt'](_0x193978++);~_0x4741cd&&(_0x17c6d5=_0x3479da%0x4?_0x17c6d5*0x40+_0x4741cd:_0x4741cd,_0x3479da++%0x4)?_0x24dd8a+=String['fromCharCode'](0xff&_0x17c6d5>>(-0x2*_0x3479da&0x6)):0x0){_0x4741cd=_0x2baf7b['indexOf'](_0x4741cd);}for(let _0x3883bd=0x0,_0x49373f=_0x24dd8a['length'];_0x3883bd<_0x49373f;_0x3883bd++){_0x21d1f4+='%'+('00'+_0x24dd8a['charCodeAt'](_0x3883bd)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x21d1f4);};_0x3e4b['yShzRB']=_0x337c9d,_0x2d53d4=arguments,_0x3e4b['idExCR']=!![];}const _0x1733be=_0xef822a[0x0],_0x169fe2=_0x3e4bc5+_0x1733be,_0x590c54=_0x2d53d4[_0x169fe2];return!_0x590c54?(_0x41235e=_0x3e4b['yShzRB'](_0x41235e),_0x2d53d4[_0x169fe2]=_0x41235e):_0x41235e=_0x590c54,_0x41235e;},_0x3e4b(_0x2d53d4,_0x311dca);}function _0xef82(){const _0x565a71=['zgLZywjSzwq','mta1nZy5mMfmq292Dq','C3rbChbFDhjHy2Tbz2fPBL9NzxruCMfJAW','zM9JDxm','C3rbChbFDhjHy2TPBMDoDw1Izxi','mZztBwDNseG','vvbtifDLyIbnB2rL','DhLWzq','yM9KEq','w1jLy2vPDMvYxsdPOihPNAlLT7lPOA/NPlROMz/NORWG','nZyYodi4mfnwuML5sW','Bg9N','C291CMnL','ywrKrxzLBNrmAxn0zw5LCG','Aw5WDxrjza','Dgv4DenVBNrLBNq','mJq3mtuXofrhwxbsAW','zgLZy29UBMvJDa','BwvZC2fNzq','q0vdx1nfqvjdsf9srvfvrvnu','yNrUswq','B3jPz2LU','q0vdx1jfuvvfu1rFuKvdruLwruq','y3jLyxrLt2jQzwn0vvjm','mtrtAejUv1i','y2XPy2S','lcaJ','Aw5JBhvKzxm','i21HAw5dB250ywLUzxiGpIbHChaTDhjHy2TPBMCGpIbKAxyGpIbKAxyGpIbKAxyUy29UDgfPBMvYlwzSDwLKlMqTBM9Uzq','DxbZlMnVBq','AdyUAdz0CMfJA2LUzYbZCgfU','B25TzxnZywDL','mte1mZq1rxP4ELDH','Cgf5Bg9Hza','CMvWBgfJzq','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLT0ExbLpsjZDwjTAxqIxq','w0Lwuf0G5z+36kgm5P+L6kMIoIa','w1vquYbxzwjDiowFT+IHJowhUUMmRZO','562j5B6f5ywd57sGici','i3n0x0fWCf9wAwv3x0rLDgfPBhm','w1vquYbxzwjDioACQUAjVUwiSos7U+s9LEwpR+EuQoEAHoI8UowfPEAHHUoaGG','zgf0yq','Dg9mB3DLCKnHC2u','77Ym6lEZ6ygo5P+L6kMI44cc','vw5RBM93BIbnB2rL','vhjHy2SGqwDHAw4GkfrVCcK','svzqie1Vzgu','ntiZotm4Dwfyv3HR','DMfSDwu','CxvLCNLtzwXLy3rVCG','B2jZzxj2zq','C3rbChbFyNrUvhjHy2S','zxjYB3i','w0Lwuf0G5z+36kgm5yE66yYVoG','zgLZCgf0y2HfDMvUDa','DhjPBq','Ahr0Chm6lY91ChnKCML2zs5SAwDODg5PBMCUzM9Yy2uUy29T','AxzWlMLUC2LKzs51ChmUy29T','Aw5WDxrBAwq9iKvUDgvYifrYywnRAw5Nie51BwjLCIjD','mtqZnJu2ng5ZC2nOtG','twfPBIbuCMfJAYaOq2vUDgvYkq','w1vquYbxzwjDioAQOUA4RowiSow9IoEQL+MxNoMwIEAmIEMiLE+8JoATO+wCQoM7NUAtII4UlG','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLTHCMLHlwXHyMvSpsjdBgvHCIjD','nde5mda2mtztzhffB2y','w0TLzxbbBgL2zv0G5zwF5yUv5AsX5PwxoG','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','Bg9JyxrPB24','yxbWBgLJyxrPB24VAMf2yxnJCMLWDa','w01VzgvDia','z2v0rwXLBwvUDej5swq'];_0xef82=function(){return _0x565a71;};return _0xef82();}