// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V15
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。後臺保活功能。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// @downloadURL  https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// ==/UserScript==

(function(_0x45e15e,_0x4c1c75){const _0x5bce64={_0x40075c:0x19e,_0x38e79d:0x1a5,_0x7213e2:0x1de},_0x56a50a=_0x87c6,_0x3a6df6=_0x45e15e();while(!![]){try{const _0x14550b=parseInt(_0x56a50a(_0x5bce64._0x40075c))/0x1+-parseInt(_0x56a50a(_0x5bce64._0x38e79d))/0x2+parseInt(_0x56a50a(0x1d6))/0x3+parseInt(_0x56a50a(0x1bb))/0x4*(parseInt(_0x56a50a(0x1ce))/0x5)+parseInt(_0x56a50a(0x1cf))/0x6+-parseInt(_0x56a50a(0x1d7))/0x7+parseInt(_0x56a50a(0x1c5))/0x8*(-parseInt(_0x56a50a(_0x5bce64._0x7213e2))/0x9);if(_0x14550b===_0x4c1c75)break;else _0x3a6df6['push'](_0x3a6df6['shift']());}catch(_0x149cc5){_0x3a6df6['push'](_0x3a6df6['shift']());}}}(_0x5cf5,0x677a0),(function(){'use strict';const _0x2c9aa0={_0x272233:0x1b3,_0x363e2e:0x1a6,_0x4525c3:0x1ad,_0x462e89:0x1a9,_0x336d9a:0x1ac},_0x59826f={_0x3ba827:0x1c7,_0x179ec6:0x1dd,_0x46b567:0x1a8,_0x32e7ea:0x1c8,_0x2a2d60:0x1cd,_0xcfc138:0x1dc},_0x5d98f6={_0x18f73d:0x1b3,_0x38a25c:0x1ae,_0xc45317:0x1a1,_0x57d1d7:0x1d9,_0x2871f6:0x1b9,_0x3ce8db:0x1c4,_0x36214d:0x1d9,_0x3af2d3:0x1cc,_0x3a3495:0x1c1},_0x5e49fc={_0x6eab72:0x1b3,_0x51b081:0x19c,_0x24dc67:0x1ab,_0x440e07:0x1bd,_0x38ff2a:0x1b5,_0xc48512:0x1bc,_0x18a8f3:0x1d3,_0x577467:0x1db,_0x55710d:0x1da,_0x4a59a3:0x1d5,_0x723e18:0x1d9},_0x87c659={_0x24d186:0x1c4,_0x1abde9:0x1af,_0x1e5ca3:0x1b8,_0x4fd5f6:0x19f},_0x253e43={_0x182acb:0x19b,_0xeb73ea:0x1b6,_0x376777:0x1b3,_0x37ee5f:0x1b7},_0xaa2bd0=_0x87c6;const _0x4c4e52=window[_0xaa2bd0(0x1b1)]['hostname'],_0x4bae35=_0x4c4e52[_0xaa2bd0(0x1d1)]('ivp.inside.ups.com'),_0x1e5308=_0x4c4e52[_0xaa2bd0(0x1d1)](_0xaa2bd0(0x1c6)),_0x207a5f=_0xaa2bd0(0x1b4);console[_0xaa2bd0(_0x2c9aa0._0x272233)]('[Universal\x20Receiver\x20V14]\x20啟動於:\x20'+_0x4c4e52),console['log'](_0xaa2bd0(_0x2c9aa0._0x363e2e)+(_0x4bae35?_0xaa2bd0(_0x2c9aa0._0x4525c3):_0x1e5308?_0xaa2bd0(_0x2c9aa0._0x462e89):'Unknown\x20Mode'));let _0x32d704=0x0;const _0x409109=_0x2e6c8d=>new Promise(_0x1c7fea=>setTimeout(_0x1c7fea,_0x2e6c8d));function _0x383d7a(_0x558f18,_0x50be05=document[_0xaa2bd0(0x1c2)],_0x442dd2=0x1388){const _0x49c0b3={_0x34a817:0x1d0};return new Promise((_0x46a752,_0x32278d)=>{const _0x23c154={_0x100c3d:0x1a7},_0x54e1cf={_0x42702a:0x1c4,_0x3bfeec:0x1a7},_0x3cd664=_0x87c6,_0x180c9e=_0x50be05['querySelector'](_0x558f18);if(_0x180c9e)return _0x46a752(_0x180c9e);const _0x43e0aa=new MutationObserver(()=>{const _0x1a8e16=_0x87c6,_0x485167=_0x50be05[_0x1a8e16(_0x54e1cf._0x42702a)](_0x558f18);_0x485167&&(_0x43e0aa[_0x1a8e16(_0x54e1cf._0x3bfeec)](),_0x46a752(_0x485167));});_0x43e0aa[_0x3cd664(_0x49c0b3._0x34a817)](_0x50be05,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0x2daf8b=_0x3cd664;_0x43e0aa[_0x2daf8b(_0x23c154._0x100c3d)](),_0x32278d(new Error('等待元素\x20\x22'+_0x558f18+_0x2daf8b(0x1c3)));},_0x442dd2);});}function _0x2e171e(){const _0x1fa8c3=_0xaa2bd0;try{const _0x23b281=new Blob([_0x1fa8c3(0x1b2)],{'type':_0x1fa8c3(_0x253e43._0x182acb)}),_0x4e3836=new Worker(URL['createObjectURL'](_0x23b281));_0x4e3836[_0x1fa8c3(_0x253e43._0xeb73ea)]=()=>{},console[_0x1fa8c3(_0x253e43._0x376777)](_0x1fa8c3(_0x253e43._0x37ee5f));}catch(_0x2eddf4){console['error'](_0x1fa8c3(0x1aa),_0x2eddf4);}}function _0x58c1b4(_0x25dad8){const _0x5d856b=_0xaa2bd0;if(!_0x25dad8)return![];let _0x4439d6=null,_0x28789a='';if(_0x4bae35)_0x4439d6=document[_0x5d856b(_0x87c659._0x24d186)]('h6.h6tracking\x20span');else _0x1e5308&&(_0x4439d6=document[_0x5d856b(0x1bc)]('stApp_trackingNumber'));if(_0x4439d6){_0x28789a=_0x4439d6[_0x5d856b(0x1be)][_0x5d856b(_0x87c659._0x1abde9)]();const _0x11cc29=_0x28789a[_0x5d856b(0x1b8)](/\s/g,''),_0x71480c=_0x25dad8[_0x5d856b(_0x87c659._0x1e5ca3)](/\s/g,'');if(_0x11cc29[_0x5d856b(_0x87c659._0x4fd5f6)]()===_0x71480c[_0x5d856b(_0x87c659._0x4fd5f6)]())return!![];}return![];}async function _0x435e52(_0x266273){const _0x5e47c3=_0xaa2bd0;console[_0x5e47c3(_0x5e49fc._0x6eab72)](_0x5e47c3(_0x5e49fc._0x51b081)+_0x266273);const _0x5c886c=[{'name':_0x5e47c3(0x1c9),'inputId':_0x5e47c3(0x1c0),'btnId':'stApp_trackAgain_getTrack'},{'name':_0x5e47c3(_0x5e49fc._0x24dc67),'inputId':_0x5e47c3(_0x5e49fc._0x440e07),'btnId':'stApp_btnTrack'}];try{const _0x4e78bd=document[_0x5e47c3(0x1c4)](_0x5e47c3(0x1ba));_0x4e78bd&&(console[_0x5e47c3(_0x5e49fc._0x6eab72)](_0x5e47c3(_0x5e49fc._0x38ff2a)),_0x4e78bd['click'](),await _0x409109(0x12c));let _0x1d4148=document[_0x5e47c3(_0x5e49fc._0xc48512)](_0x5c886c[0x0][_0x5e47c3(_0x5e49fc._0x18a8f3)])||document['getElementById'](_0x5c886c[0x1]['inputId']);if(!_0x1d4148)try{const _0x4ae079='#'+_0x5c886c[0x0][_0x5e47c3(0x1d3)]+_0x5e47c3(_0x5e49fc._0x577467)+_0x5c886c[0x1][_0x5e47c3(0x1d3)];_0x1d4148=await _0x383d7a(_0x4ae079,document['body'],0xbb8);}catch(_0x4a6d14){console[_0x5e47c3(0x1c1)](_0x5e47c3(0x1cb));return;}const _0x506ab2=_0x5c886c['find'](_0x5a12be=>_0x5a12be[_0x5e47c3(0x1d3)]===_0x1d4148['id']);if(!_0x506ab2)return;_0x1d4148['focus'](),_0x1d4148[_0x5e47c3(0x1da)]='',_0x1d4148[_0x5e47c3(_0x5e49fc._0x55710d)]=_0x266273,_0x1d4148[_0x5e47c3(0x1a4)](new Event(_0x5e47c3(_0x5e49fc._0x4a59a3),{'bubbles':!![]})),_0x1d4148[_0x5e47c3(0x1a4)](new Event('change',{'bubbles':!![]})),_0x1d4148[_0x5e47c3(0x1a4)](new Event(_0x5e47c3(0x1df),{'bubbles':!![]})),await _0x409109(0xc8);let _0x2b3476=document[_0x5e47c3(0x1bc)](_0x506ab2[_0x5e47c3(0x1bf)]);if(!_0x2b3476)try{_0x2b3476=await _0x383d7a('#'+_0x506ab2['btnId'],document['body'],0x7d0);}catch(_0x452f6e){}if(_0x2b3476){_0x2b3476[_0x5e47c3(_0x5e49fc._0x723e18)]();try{const _0xeebce0=await _0x383d7a(_0x5e47c3(0x1a2),document['body'],0x2710);_0xeebce0&&(await _0x409109(0x64),_0xeebce0[_0x5e47c3(_0x5e49fc._0x723e18)]());}catch(_0x301111){}}}catch(_0x1ca2a5){console['error']('[UPS\x20Web]\x20執行出錯:',_0x1ca2a5);}}async function _0x544d2c(_0x10ea54){const _0x18a228=_0xaa2bd0;console[_0x18a228(_0x5d98f6._0x18f73d)](_0x18a228(_0x5d98f6._0x38a25c)+_0x10ea54);const _0x9a23a=document['querySelectorAll'](_0x18a228(_0x5d98f6._0xc45317));for(const _0xcd530e of _0x9a23a){_0xcd530e[_0x18a228(_0x5d98f6._0x57d1d7)](),await _0x409109(0x64);}try{const _0x44debc=document[_0x18a228(0x1c4)](_0x18a228(_0x5d98f6._0x2871f6));if(_0x44debc){const _0x1f3016=document[_0x18a228(0x1c4)](_0x18a228(0x1a0));if(_0x1f3016)_0x1f3016['click']();await _0x409109(0xc8);}const _0xd33dd5=document[_0x18a228(_0x5d98f6._0x3ce8db)](_0x18a228(0x19d));_0xd33dd5&&(_0xd33dd5[_0x18a228(_0x5d98f6._0x36214d)](),await _0x409109(0xc8));const _0x4d8652=await _0x383d7a('input[id=\x22Enter\x20Tracking\x20Number\x22]');_0x4d8652['value']=_0x10ea54,_0x4d8652['dispatchEvent'](new Event('input',{'bubbles':!![]}));const _0x4ee8f6=await _0x383d7a(_0x18a228(_0x5d98f6._0x3af2d3));if(_0x4ee8f6[_0x18a228(0x1d4)])await _0x409109(0xc8);!_0x4ee8f6[_0x18a228(0x1d4)]?_0x4ee8f6[_0x18a228(0x1d9)]():console[_0x18a228(0x1b0)](_0x18a228(0x1d2));}catch(_0x11adb8){console[_0x18a228(_0x5d98f6._0x3a3495)]('[IVP]\x20執行出錯:',_0x11adb8);}}window[_0xaa2bd0(0x1ca)](_0xaa2bd0(_0x2c9aa0._0x336d9a),async function(_0x547c49){const _0x3755c6=_0xaa2bd0;if(_0x547c49[_0x3755c6(_0x59826f._0x3ba827)]!==_0x207a5f)return;const _0x335717=_0x547c49['data'];if(_0x335717?.[_0x3755c6(_0x59826f._0x179ec6)]===_0x3755c6(_0x59826f._0x46b567)&&_0x335717[_0x3755c6(_0x59826f._0x32e7ea)]){const {trackingNumber:_0x1f9da4,timestamp:_0x2f8a39}=_0x335717['payload'];if(_0x2f8a39>_0x32d704){const _0x5063e9=_0x58c1b4(_0x1f9da4);if(_0x5063e9)console['log'](_0x3755c6(0x1a3)+_0x1f9da4+_0x3755c6(0x1d8));else{if(_0x4bae35)await _0x544d2c(_0x1f9da4);else _0x1e5308&&await _0x435e52(_0x1f9da4);}_0x32d704=_0x2f8a39,_0x547c49[_0x3755c6(_0x59826f._0x2a2d60)]&&_0x547c49[_0x3755c6(0x1cd)][_0x3755c6(_0x59826f._0xcfc138)]({'type':'CEC_REQUEST_RECEIVED','payload':{'timestamp':_0x2f8a39}},_0x547c49[_0x3755c6(_0x59826f._0x3ba827)]);}}},![]),_0x2e171e();}()));function _0x87c6(_0x598fed,_0x1f5a38){const _0x5cf500=_0x5cf5();return _0x87c6=function(_0x87c692,_0x2a0b){_0x87c692=_0x87c692-0x19b;let _0x2e37e6=_0x5cf500[_0x87c692];if(_0x87c6['THvjWr']===undefined){var _0x4a8b1a=function(_0x4c4e52){const _0x4bae35='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1e5308='',_0x207a5f='';for(let _0x32d704=0x0,_0x409109,_0x383d7a,_0x2e171e=0x0;_0x383d7a=_0x4c4e52['charAt'](_0x2e171e++);~_0x383d7a&&(_0x409109=_0x32d704%0x4?_0x409109*0x40+_0x383d7a:_0x383d7a,_0x32d704++%0x4)?_0x1e5308+=String['fromCharCode'](0xff&_0x409109>>(-0x2*_0x32d704&0x6)):0x0){_0x383d7a=_0x4bae35['indexOf'](_0x383d7a);}for(let _0x58c1b4=0x0,_0x435e52=_0x1e5308['length'];_0x58c1b4<_0x435e52;_0x58c1b4++){_0x207a5f+='%'+('00'+_0x1e5308['charCodeAt'](_0x58c1b4)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x207a5f);};_0x87c6['gTDKDP']=_0x4a8b1a,_0x598fed=arguments,_0x87c6['THvjWr']=!![];}const _0x376971=_0x5cf500[0x0],_0x1d9940=_0x87c692+_0x376971,_0x1804b4=_0x598fed[_0x1d9940];return!_0x1804b4?(_0x2e37e6=_0x87c6['gTDKDP'](_0x2e37e6),_0x598fed[_0x1d9940]=_0x2e37e6):_0x2e37e6=_0x1804b4,_0x2e37e6;},_0x87c6(_0x598fed,_0x1f5a38);}function _0x5cf5(){const _0x23cb2b=['w0TLzxbbBgL2zv0G5zwF5yUv5AsX5PwxoG','twfPBIbuCMfJAYaOq2vUDgvYkq','BwvZC2fNzq','svzqie1Vzgu','w0Lwuf0G5z+36kgm5P+L6kMIoIa','DhjPBq','D2fYBG','Bg9JyxrPB24','cIaGicaGicaGicaGicaGicbZzxrjBNrLCNzHBcGOksa9pIb7cIaGicaGicaGicaGicaGicaGicaGC2vSzI5WB3n0twvZC2fNzsGNDgLJAYCPoWOGicaGicaGicaGicaGicaGFsWGnJaWmdaPoWOGicaGicaGicaGica','Bg9N','Ahr0Chm6lY91ChnKCML2zs5SAwDODg5PBMCUzM9Yy2uUy29T','w1vquYbxzwjDioAQOUA4RowiSow9IoEQL+MxNoMwIEAmIEMiLE+8JoATO+wCQoM7NUAtII4UlG','B25TzxnZywDL','w0TLzxbbBgL2zv0G5l+D5Rs75QMF5yI25BEY5zwF5yUvic0G6Ac7546hoIaX5yIg6zcyl+ASOq','CMvWBgfJzq','i21HAw5dB250ywLUzxiGpIbHChaTDhjHy2TPBMCGpIbKAxyGpIbKAxyGpIbKAxyUy29UDgfPBMvYlwzSDwLKlMqTBM9Uzq','yNv0Dg9UlMnSB3nLw2rHDgeTzgLZBwLZCZ0IBw9KywWIxq','ntu2mtjlCwXYvwO','z2v0rwXLBwvUDej5swq','C3rbChbFDhjHy2TPBMDoDw1Izxi','Dgv4DenVBNrLBNq','yNrUswq','C3rbChbFDhjHy2Tbz2fPBL90CMfJA2LUz051BuvUDhj5','zxjYB3i','yM9KEq','iIdOTOxMMyi','CxvLCNLtzwXLy3rVCG','ogrNAhn4CG','DxbZlMnVBq','B3jPz2LU','Cgf5Bg9Hza','vhjHy2SGqwDHAw4GkfrVCcK','ywrKrxzLBNrmAxn0zw5LCG','w1vquYbxzwjDioACQUAjVUwiSos7U+s9LEwpR+EuQoEAHoI8UowfPEAHHUoaGG','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLT0ExbLpsjZDwjTAxqIxq','C291CMnL','mJCWuKDHvuXR','nJmXntC4AuHhs0nZ','B2jZzxj2zq','Aw5JBhvKzxm','w0Lwuf0G5O+q5lQK5OYj6yIv5lUn6jMv5PA856Ab55sO54Ua5Owl44cc','Aw5WDxrjza','zgLZywjSzwq','Aw5WDxq','oti5otD2tfnwv3u','mJuZntG5n21tEenjzG','77Ym6lEZ6ygo5P+L6kMI44cc','y2XPy2S','DMfSDwu','lcaJ','Cg9ZDe1LC3nHz2u','DhLWzq','mJCZotG5n0LfB2nttG','yMX1CG','yxbWBgLJyxrPB24VAMf2yxnJCMLWDa','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLTHCMLHlwXHyMvSpsjdBgvHCIjD','ndqZnZKZEfbXruXu','Dg9mB3DLCKnHC2u','i3rVz2DSzs12AxnPyMLSAxr5id4GyNv0Dg9U','zgL2lMnKAY1VDMvYBgf5lxbHBMuGBgK6AgfZkgvTlMzHlxrPBwvZkq','i3n0x0fWCf9wAwv3x0rLDgfPBhm','w1jLy2vPDMvYxsdPOihPNAlLT7lPOA/NPlROMz/NORWG','zgLZCgf0y2HfDMvUDa','ndGWntq2r2DXuwLt','w01VzgvDia','zgLZy29UBMvJDa','q0vdx1nfqvjdsf9srvfvrvnu','vvbtifDLyIbnB2rL'];_0x5cf5=function(){return _0x23cb2b;};return _0x5cf5();}