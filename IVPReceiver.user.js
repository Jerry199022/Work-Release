// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V14
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。後臺保活功能。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://raw.githubusercontent.com/Jerry199022/Work/refs/heads/main/IVPReceiver.js
// @downloadURL  https://raw.githubusercontent.com/Jerry199022/Work/refs/heads/main/IVPReceiver.js
// ==/UserScript==

function _0x1e03(){const _0x2bd4d9=['mZuXnK5pwMXlzG','w1jLy2vPDMvYxsdPOihPNAlLT7lPOA/NPlROMz/NORWG','DMfSDwu','w0Lwuf0G5z+36kgm5yE66yYVoG','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','Dgv4DenVBNrLBNq','DhjPBq','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLT0ExbLpsjZDwjTAxqIxq','nJiYwhPzyNzN','vw5RBM93BIbnB2rL','Ahr0Chm6lY91ChnKCML2zs5SAwDODg5PBMCUzM9Yy2uUy29T','zMLUza','q0vdx1nfqvjdsf9srvfvrvnu','z2v0rwXLBwvUDej5swq','mZi5nJC0nxrAB1LIqG','C3rbChbFDhjHy2TPBMDoDw1Izxi','Aw5WDxrBAwq9iKvUDgvYifrYywnRAw5Nie51BwjLCIjD','D2fYBG','AdyUAdz0CMfJA2LUzYbZCgfU','w0TLzxbbBgL2zv0G5l+D5Rs75QMF5yI25BEY5zwF5yUvic0G6Ac7546hoIaX5yIg6zcyl+ASOq','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLTHCMLHlwXHyMvSpsjdBgvHCIjD','mta0nM5yv3PVqW','zxjYB3i','Cgf5Bg9Hza','y2XPy2S','nJKYotCYog5lEgPRqW','yNv0Dg9UlMnSB3nLw2rHDgeTzgLZBwLZCZ0IBw9KywWIxq','q0vdx1jfuvvfu1rFuKvdruLwruq','i3rVz2DSzs12AxnPyMLSAxr5id4GyNv0Dg9U','zgLZCgf0y2HfDMvUDa','w0Lwuf0G5z+36kgm5P+L6kMIoIa','cIaGicaGicaGicaGicaGicbZzxrjBNrLCNzHBcGOksa9pIb7cIaGicaGicaGicaGicaGicaGicaGC2vSzI5WB3n0twvZC2fNzsGNDgLJAYCPoWOGicaGicaGicaGicaGicaGFsWGnJaWmdaPoWOGicaGicaGicaGica','mZK4nJm1mefnzKvMzW','mZbxCMPUzxe','y2HHBMDL','zM9JDxm','yNrUswq','B25TzxnZywDL','Bg9N','w1vquYbxzwjDioACQUAjVUwiSos7U+s9LEwpR+EuQoEAHoI8UowfPEAHHUoaGG','otiYotC0vvr4wNLe','zgLZywjSzwq','Ag9ZDg5HBwu','CMvWBgfJzq','ngLuz25lwq','w01VzgvDia','CxvLCNLtzwXLy3rVCKfSBa','zgf0yq','C3rbChbFDhjHy2Tbz2fPBL90CMfJA2LUz051BuvUDhj5','w1vquYbxzwjDioAQOUA4RowiSow9IoEQL+MxNoMwIEAmIEMiLE+8JoATO+wCQoM7NUAtII4UlG','i3n0x0fWCf9wAwv3x0rLDgfPBhm','zgLZy29UBMvJDa','yxbWBgLJyxrPB24VAMf2yxnJCMLWDa','DxbZlMnVBq','CxvLCNLtzwXLy3rVCG','Aw5WDxrjza','iIdOTOxMMyi','Cg9ZDe1LC3nHz2u','w0Lwuf0G5O+q5lQK5OYj6yIv5lUn6jMv5PA856Ab55sO54Ua5Owl44cc','Aw5JBhvKzxm','mZC1ow12wLz5Dq','y3jLyxrLt2jQzwn0vvjm','nduWotq2mvj0B2njAq','Aw5WDxq','C291CMnL','lcaJ','vvbtifDLyIbnB2rL','svzqie1Vzgu','w1vquYbxzwjDiowFT+IHJowhUUMmRZO','yM9KEq','Dg9mB3DLCKnHC2u'];_0x1e03=function(){return _0x2bd4d9;};return _0x1e03();}function _0x16a0(_0x24758f,_0x18b2ea){const _0x1e0347=_0x1e03();return _0x16a0=function(_0x16a0ed,_0x2f3f05){_0x16a0ed=_0x16a0ed-0x96;let _0x198531=_0x1e0347[_0x16a0ed];if(_0x16a0['VmBMSh']===undefined){var _0xf5d398=function(_0x1993ca){const _0x599639='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x40e3a6='',_0x55f1dc='';for(let _0x4d935e=0x0,_0x5a5d19,_0x339acf,_0x402c1b=0x0;_0x339acf=_0x1993ca['charAt'](_0x402c1b++);~_0x339acf&&(_0x5a5d19=_0x4d935e%0x4?_0x5a5d19*0x40+_0x339acf:_0x339acf,_0x4d935e++%0x4)?_0x40e3a6+=String['fromCharCode'](0xff&_0x5a5d19>>(-0x2*_0x4d935e&0x6)):0x0){_0x339acf=_0x599639['indexOf'](_0x339acf);}for(let _0x400891=0x0,_0x344d5d=_0x40e3a6['length'];_0x400891<_0x344d5d;_0x400891++){_0x55f1dc+='%'+('00'+_0x40e3a6['charCodeAt'](_0x400891)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x55f1dc);};_0x16a0['UiyHNx']=_0xf5d398,_0x24758f=arguments,_0x16a0['VmBMSh']=!![];}const _0x44336f=_0x1e0347[0x0],_0x3b6f85=_0x16a0ed+_0x44336f,_0x592372=_0x24758f[_0x3b6f85];return!_0x592372?(_0x198531=_0x16a0['UiyHNx'](_0x198531),_0x24758f[_0x3b6f85]=_0x198531):_0x198531=_0x592372,_0x198531;},_0x16a0(_0x24758f,_0x18b2ea);}(function(_0x584aaa,_0x9a1f92){const _0x1642d4={_0x48f801:0xd6,_0x18ebca:0xaf,_0x2a59c8:0xa8},_0x12c386=_0x16a0,_0x56d354=_0x584aaa();while(!![]){try{const _0x4000a4=-parseInt(_0x12c386(_0x1642d4._0x48f801))/0x1*(parseInt(_0x12c386(0x9c))/0x2)+-parseInt(_0x12c386(_0x1642d4._0x18ebca))/0x3+parseInt(_0x12c386(0xb3))/0x4*(-parseInt(_0x12c386(0xa7))/0x5)+parseInt(_0x12c386(0xce))/0x6*(parseInt(_0x12c386(0xc3))/0x7)+parseInt(_0x12c386(0xa0))/0x8+-parseInt(_0x12c386(0xdc))/0x9+parseInt(_0x12c386(_0x1642d4._0x2a59c8))/0xa*(parseInt(_0x12c386(0xc5))/0xb);if(_0x4000a4===_0x9a1f92)break;else _0x56d354['push'](_0x56d354['shift']());}catch(_0x3715f2){_0x56d354['push'](_0x56d354['shift']());}}}(_0x1e03,0x95f44),(function(){'use strict';const _0x41d0d8={_0x398f82:0xbc,_0x5a1c7b:0xad,_0x2d39a2:0xd7},_0x3cc243={_0x563612:0xb6,_0x4f4fbd:0xda,_0x2d7165:0xcf,_0x220704:0xc0},_0x4272c7={_0x4867b6:0x9f,_0x12a799:0xbd,_0x16f321:0xa3,_0x51b1da:0xbd,_0x1ac960:0x9f,_0x51117e:0x97,_0x551364:0xd5,_0x4ff6c2:0xb0},_0x454b38={_0x3010ed:0xad,_0x1caea2:0xd2,_0x2ba91f:0xb7,_0x51b678:0xb8,_0x592bc0:0x9f,_0x40fb66:0xbe,_0x2f1eb2:0xbe,_0x1f933c:0xc6,_0x5d9837:0xdb,_0x223373:0xab,_0x1aeceb:0xcc,_0x44f4bc:0x9d,_0x4a3976:0xcb},_0x387f2d={_0x4b2a3a:0xbd,_0x15fa30:0xdb,_0x31db76:0xd3,_0x311d49:0xd4,_0x1ad5c5:0xcd,_0x235dd4:0xcd},_0x2f707b={_0x32cf73:0xa6,_0x1c63db:0xbb,_0x5d5097:0xc4,_0x1c2931:0xac},_0x5d2823=_0x16a0;const _0x1993ca=window['location'][_0x5d2823(0xb1)],_0x599639=_0x1993ca[_0x5d2823(0xc2)]('ivp.inside.ups.com'),_0x40e3a6=_0x1993ca['includes'](_0x5d2823(_0x41d0d8._0x398f82)),_0x55f1dc=_0x5d2823(0xd8);console[_0x5d2823(0xad)]('[Universal\x20Receiver\x20V14]\x20啟動於:\x20'+_0x1993ca),console[_0x5d2823(_0x41d0d8._0x5a1c7b)](_0x5d2823(0xb4)+(_0x599639?_0x5d2823(0xca):_0x40e3a6?_0x5d2823(0xc9):_0x5d2823(_0x41d0d8._0x2d39a2)));let _0x4d935e=0x0;const _0x5a5d19=_0x101558=>new Promise(_0x67e394=>setTimeout(_0x67e394,_0x101558));function _0x339acf(_0x474ebc,_0x4c09f2=document[_0x5d2823(0xcc)],_0x31d075=0x1388){const _0x4ba36d={_0xb5cda4:0xbd,_0x1f15ca:0xba};return new Promise((_0x2ec831,_0x191577)=>{const _0x2f1cb4={_0x1af0e8:0xba},_0x9c59a=_0x16a0,_0x248dc6=_0x4c09f2[_0x9c59a(0xbd)](_0x474ebc);if(_0x248dc6)return _0x2ec831(_0x248dc6);const _0x105e02=new MutationObserver(()=>{const _0x56e4fd=_0x9c59a,_0x350c5e=_0x4c09f2[_0x56e4fd(_0x4ba36d._0xb5cda4)](_0x474ebc);_0x350c5e&&(_0x105e02[_0x56e4fd(_0x4ba36d._0x1f15ca)](),_0x2ec831(_0x350c5e));});_0x105e02['observe'](_0x4c09f2,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0xf5486d=_0x9c59a;_0x105e02[_0xf5486d(_0x2f1cb4._0x1af0e8)](),_0x191577(new Error('等待元素\x20\x22'+_0x474ebc+_0xf5486d(0xbf)));},_0x31d075);});}function _0x402c1b(){const _0x110c8f=_0x5d2823;try{const _0x177648=new Blob([_0x110c8f(_0x2f707b._0x32cf73)],{'type':_0x110c8f(_0x2f707b._0x1c63db)}),_0x328d11=new Worker(URL[_0x110c8f(_0x2f707b._0x5d5097)](_0x177648));_0x328d11[_0x110c8f(_0x2f707b._0x1c2931)]=()=>{},console[_0x110c8f(0xad)](_0x110c8f(0x9a));}catch(_0x1c5262){console[_0x110c8f(0x9d)]('[KeepAlive]\x20啟動失敗:',_0x1c5262);}}function _0x400891(_0x21440a){const _0x249ea9=_0x5d2823;if(!_0x21440a)return![];let _0x564116=null,_0x2ab670='';if(_0x599639)_0x564116=document[_0x249ea9(_0x387f2d._0x4b2a3a)](_0x249ea9(0x99));else _0x40e3a6&&(_0x564116=document[_0x249ea9(_0x387f2d._0x15fa30)](_0x249ea9(0x96)));if(_0x564116){_0x2ab670=_0x564116[_0x249ea9(_0x387f2d._0x31db76)][_0x249ea9(_0x387f2d._0x311d49)]();const _0x4ec7fb=_0x2ab670['replace'](/\s/g,''),_0x58e20c=_0x21440a[_0x249ea9(0xb2)](/\s/g,'');if(_0x4ec7fb[_0x249ea9(_0x387f2d._0x1ad5c5)]()===_0x58e20c[_0x249ea9(_0x387f2d._0x235dd4)]())return!![];}return![];}async function _0x344d5d(_0x2dbb4e){const _0x401194=_0x5d2823;console[_0x401194(_0x454b38._0x3010ed)](_0x401194(_0x454b38._0x1caea2)+_0x2dbb4e);const _0x2d48bd=[{'name':'Track\x20Again\x20(Top)','inputId':_0x401194(_0x454b38._0x2ba91f),'btnId':'stApp_trackAgain_getTrack'},{'name':'Main\x20Track\x20(Center)','inputId':_0x401194(0x96),'btnId':'stApp_btnTrack'}];try{const _0x3c0f24=document[_0x401194(0xbd)](_0x401194(0xa1));_0x3c0f24&&(console['log'](_0x401194(_0x454b38._0x51b678)),_0x3c0f24[_0x401194(_0x454b38._0x592bc0)](),await _0x5a5d19(0x12c));let _0x2c733b=document[_0x401194(0xdb)](_0x2d48bd[0x0]['inputId'])||document[_0x401194(0xdb)](_0x2d48bd[0x1][_0x401194(0xbe)]);if(!_0x2c733b)try{const _0x1cd42f='#'+_0x2d48bd[0x0][_0x401194(_0x454b38._0x40fb66)]+_0x401194(0xc8)+_0x2d48bd[0x1][_0x401194(_0x454b38._0x2f1eb2)];_0x2c733b=await _0x339acf(_0x1cd42f,document['body'],0xbb8);}catch(_0x14f9df){console['error'](_0x401194(0xae));return;}const _0x34be3c=_0x2d48bd[_0x401194(0xd9)](_0x478ae8=>_0x478ae8[_0x401194(0xbe)]===_0x2c733b['id']);if(!_0x34be3c)return;_0x2c733b[_0x401194(0xaa)](),_0x2c733b[_0x401194(0xd0)]='',_0x2c733b['value']=_0x2dbb4e,_0x2c733b[_0x401194(0xa4)](new Event(_0x401194(_0x454b38._0x1f933c),{'bubbles':!![]})),_0x2c733b[_0x401194(0xa4)](new Event(_0x401194(0xa9),{'bubbles':!![]})),_0x2c733b[_0x401194(0xa4)](new Event('blur',{'bubbles':!![]})),await _0x5a5d19(0xc8);let _0x5bca70=document[_0x401194(_0x454b38._0x5d9837)](_0x34be3c[_0x401194(0xab)]);if(!_0x5bca70)try{_0x5bca70=await _0x339acf('#'+_0x34be3c[_0x401194(_0x454b38._0x223373)],document['body'],0x7d0);}catch(_0x4fa69c){}if(_0x5bca70){_0x5bca70['click']();try{const _0x3a3c78=await _0x339acf(_0x401194(0xb9),document[_0x401194(_0x454b38._0x1aeceb)],0x2710);_0x3a3c78&&(await _0x5a5d19(0x64),_0x3a3c78[_0x401194(_0x454b38._0x592bc0)]());}catch(_0x58bbb5){}}}catch(_0x457c4d){console[_0x401194(_0x454b38._0x44f4bc)](_0x401194(_0x454b38._0x4a3976),_0x457c4d);}}async function _0x19bae1(_0x6c08e){const _0x21aaca=_0x5d2823;console[_0x21aaca(0xad)](_0x21aaca(0xa5)+_0x6c08e);const _0xc1b043=document[_0x21aaca(0xb5)]('div.cdk-overlay-pane\x20li:has(em.fa-times)');for(const _0x3e0c4f of _0xc1b043){_0x3e0c4f[_0x21aaca(_0x4272c7._0x4867b6)](),await _0x5a5d19(0x64);}try{const _0x5b08fa=document[_0x21aaca(_0x4272c7._0x12a799)]('#mainContainer\x20>\x20app-tracking\x20>\x20div\x20>\x20div\x20>\x20div.container-fluid.d-none');if(_0x5b08fa){const _0x3d88b9=document[_0x21aaca(0xbd)](_0x21aaca(_0x4272c7._0x16f321));if(_0x3d88b9)_0x3d88b9['click']();await _0x5a5d19(0xc8);}const _0x45f957=document[_0x21aaca(_0x4272c7._0x51b1da)](_0x21aaca(0x9b));_0x45f957&&(_0x45f957[_0x21aaca(_0x4272c7._0x1ac960)](),await _0x5a5d19(0xc8));const _0x30c652=await _0x339acf(_0x21aaca(_0x4272c7._0x51117e));_0x30c652[_0x21aaca(0xd0)]=_0x6c08e,_0x30c652['dispatchEvent'](new Event(_0x21aaca(0xc6),{'bubbles':!![]}));const _0x41f368=await _0x339acf(_0x21aaca(_0x4272c7._0x551364));if(_0x41f368[_0x21aaca(_0x4272c7._0x4ff6c2)])await _0x5a5d19(0xc8);!_0x41f368[_0x21aaca(0xb0)]?_0x41f368[_0x21aaca(0x9f)]():console[_0x21aaca(0x98)](_0x21aaca(0xc1));}catch(_0x1f8ed9){console[_0x21aaca(0x9d)](_0x21aaca(0xd1),_0x1f8ed9);}}window['addEventListener']('message',async function(_0x40530d){const _0x4d0f6b=_0x5d2823;if(_0x40530d['origin']!==_0x55f1dc)return;const _0x134cf7=_0x40530d[_0x4d0f6b(_0x3cc243._0x563612)];if(_0x134cf7?.['type']===_0x4d0f6b(_0x3cc243._0x4f4fbd)&&_0x134cf7['payload']){const {trackingNumber:_0x47fc43,timestamp:_0x323dba}=_0x134cf7[_0x4d0f6b(0x9e)];if(_0x323dba>_0x4d935e){const _0x97a6db=_0x400891(_0x47fc43);if(_0x97a6db)console[_0x4d0f6b(0xad)](_0x4d0f6b(_0x3cc243._0x2d7165)+_0x47fc43+'，跳過查詢。');else{if(_0x599639)await _0x19bae1(_0x47fc43);else _0x40e3a6&&await _0x344d5d(_0x47fc43);}_0x4d935e=_0x323dba,_0x40530d['source']&&_0x40530d[_0x4d0f6b(0xc7)][_0x4d0f6b(_0x3cc243._0x220704)]({'type':_0x4d0f6b(0xa2),'payload':{'timestamp':_0x323dba}},_0x40530d['origin']);}}},![]),_0x402c1b();}()));