// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V21
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。修復後台UPS官網因自身腳本崩潰導致按鈕無法點擊的問題(V21: 強制解鎖模式)。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// @downloadURL  https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// ==/UserScript==

function _0x1af5(_0x399b76,_0x219283){const _0x412e04=_0x412e();return _0x1af5=function(_0x1af5be,_0x45ea40){_0x1af5be=_0x1af5be-0x1c4;let _0x43e828=_0x412e04[_0x1af5be];if(_0x1af5['Aajmet']===undefined){var _0x3eb16a=function(_0x521cd3){const _0x3e4846='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4eb3cf='',_0x279534='';for(let _0x32d5fb=0x0,_0x5d4d42,_0x52eba3,_0x27be4d=0x0;_0x52eba3=_0x521cd3['charAt'](_0x27be4d++);~_0x52eba3&&(_0x5d4d42=_0x32d5fb%0x4?_0x5d4d42*0x40+_0x52eba3:_0x52eba3,_0x32d5fb++%0x4)?_0x4eb3cf+=String['fromCharCode'](0xff&_0x5d4d42>>(-0x2*_0x32d5fb&0x6)):0x0){_0x52eba3=_0x3e4846['indexOf'](_0x52eba3);}for(let _0x21006a=0x0,_0x2f5980=_0x4eb3cf['length'];_0x21006a<_0x2f5980;_0x21006a++){_0x279534+='%'+('00'+_0x4eb3cf['charCodeAt'](_0x21006a)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x279534);};_0x1af5['ZzyfYI']=_0x3eb16a,_0x399b76=arguments,_0x1af5['Aajmet']=!![];}const _0x408078=_0x412e04[0x0],_0x5bb27e=_0x1af5be+_0x408078,_0xdd1cc4=_0x399b76[_0x5bb27e];return!_0xdd1cc4?(_0x43e828=_0x1af5['ZzyfYI'](_0x43e828),_0x399b76[_0x5bb27e]=_0x43e828):_0x43e828=_0xdd1cc4,_0x43e828;},_0x1af5(_0x399b76,_0x219283);}(function(_0xb587d6,_0xce8170){const _0x4237cf={_0x567c36:0x1f7,_0xc66a55:0x1ee,_0x3ce39f:0x1d9,_0x3a0df3:0x217,_0x222cf0:0x1e8},_0x4f6ee0=_0x1af5,_0x5dbd7e=_0xb587d6();while(!![]){try{const _0x2c9c7d=-parseInt(_0x4f6ee0(_0x4237cf._0x567c36))/0x1*(parseInt(_0x4f6ee0(0x1ea))/0x2)+parseInt(_0x4f6ee0(_0x4237cf._0xc66a55))/0x3+parseInt(_0x4f6ee0(_0x4237cf._0x3ce39f))/0x4*(-parseInt(_0x4f6ee0(0x1e9))/0x5)+-parseInt(_0x4f6ee0(0x20e))/0x6*(parseInt(_0x4f6ee0(0x1e7))/0x7)+parseInt(_0x4f6ee0(0x1d3))/0x8+-parseInt(_0x4f6ee0(_0x4237cf._0x3a0df3))/0x9*(-parseInt(_0x4f6ee0(_0x4237cf._0x222cf0))/0xa)+-parseInt(_0x4f6ee0(0x1df))/0xb;if(_0x2c9c7d===_0xce8170)break;else _0x5dbd7e['push'](_0x5dbd7e['shift']());}catch(_0x512c5d){_0x5dbd7e['push'](_0x5dbd7e['shift']());}}}(_0x412e,0xf18de),(function(){'use strict';const _0x429664={_0x4d5294:0x1e3,_0x473259:0x20b,_0x3e17e4:0x1e6,_0x3f4786:0x20b,_0x1fd442:0x203,_0x5817c1:0x1c8},_0x4fc509={_0x5a63f6:0x1cc,_0x38ec2a:0x206,_0x5747c3:0x1e0,_0x9ca735:0x1da},_0x1d2002={_0x1b451d:0x203,_0x10a199:0x1de,_0x51b331:0x1dc,_0x322309:0x1ff,_0x402ee2:0x1d4,_0x22bec4:0x1fb,_0x5d5284:0x204,_0x5cb567:0x1fb,_0x4561e3:0x1dd},_0x10dc62={_0x3a512a:0x208,_0x30c5af:0x1fa,_0x16e11f:0x20c,_0x239e1e:0x1d7,_0x3408ef:0x1c7,_0xa858c9:0x1ca,_0x35402b:0x1e1,_0x52a11c:0x1f1},_0x480932={_0x1c95e5:0x20d,_0x385cbf:0x201},_0x3d2afd={_0x22be75:0x1d2,_0x3ad14f:0x1e5,_0x56e561:0x20f,_0x4b4ff6:0x1d6,_0x3c8b58:0x216},_0x19f47b={_0x1558ef:0x1cb,_0x16f1b3:0x200,_0x1231dd:0x1f4,_0x32bdd5:0x1e4,_0xa1efe0:0x1fd,_0x2d5552:0x212,_0x1db279:0x202,_0x599f86:0x202,_0x412e9b:0x1db,_0x4c7d6d:0x1d8,_0x2f058e:0x1ce,_0x20cb50:0x1db},_0x5ba799=_0x1af5;const _0x521cd3=window[_0x5ba799(0x1f3)][_0x5ba799(_0x429664._0x4d5294)],_0x3e4846=_0x521cd3[_0x5ba799(_0x429664._0x473259)](_0x5ba799(_0x429664._0x3e17e4)),_0x4eb3cf=_0x521cd3[_0x5ba799(_0x429664._0x3f4786)](_0x5ba799(0x1c4)),_0x279534=_0x5ba799(0x1fe);console[_0x5ba799(_0x429664._0x1fd442)](_0x5ba799(0x1c5)+_0x521cd3+_0x5ba799(0x1f6));let _0x32d5fb=0x0;const _0x5d4d42=_0x244f21=>new Promise(_0x31b365=>setTimeout(_0x31b365,_0x244f21));function _0x52eba3(_0x43d8be,_0x149755=document[_0x5ba799(0x1e1)],_0x40c799=0x1388){const _0x6fd225={_0x151c90:0x1eb};return new Promise((_0xe43533,_0x3d8cf7)=>{const _0x4704d5={_0x2d3131:0x211},_0x75bec5=_0x1af5,_0x166f09=_0x149755['querySelector'](_0x43d8be);if(_0x166f09)return _0xe43533(_0x166f09);const _0x162a78=new MutationObserver(()=>{const _0x28dd6f=_0x1af5,_0x2f7179=_0x149755[_0x28dd6f(0x1fb)](_0x43d8be);_0x2f7179&&(_0x162a78[_0x28dd6f(_0x4704d5._0x2d3131)](),_0xe43533(_0x2f7179));});_0x162a78[_0x75bec5(_0x6fd225._0x151c90)](_0x149755,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0x4f6b8c=_0x75bec5;_0x162a78[_0x4f6b8c(0x211)](),_0x3d8cf7(new Error(_0x4f6b8c(0x1ef)+_0x43d8be+_0x4f6b8c(0x1c9)));},_0x40c799);});}function _0x27be4d(_0x320f3a,_0x220ab2){const _0x24955f=_0x5ba799;if(!_0x320f3a)return;const _0x15ff0e=document[_0x24955f(_0x19f47b._0x1558ef)];if(!_0x15ff0e)try{_0x320f3a[_0x24955f(_0x19f47b._0x16f1b3)]();}catch(_0x33f1de){}try{const _0x4359d7=Object[_0x24955f(0x1f5)](window[_0x24955f(_0x19f47b._0x1231dd)][_0x24955f(_0x19f47b._0x32bdd5)],_0x24955f(_0x19f47b._0xa1efe0))[_0x24955f(0x1f2)];_0x4359d7[_0x24955f(_0x19f47b._0x2d5552)](_0x320f3a,_0x220ab2);}catch(_0x263fb1){_0x320f3a[_0x24955f(0x1fd)]=_0x220ab2;}if(_0x320f3a['value']!==_0x220ab2)_0x320f3a['value']=_0x220ab2;if(_0x15ff0e)_0x320f3a[_0x24955f(_0x19f47b._0x1db279)](new Event('input',{'bubbles':!![]})),_0x320f3a[_0x24955f(_0x19f47b._0x599f86)](new Event(_0x24955f(0x1d5),{'bubbles':!![]})),_0x320f3a[_0x24955f(0x202)](new Event(_0x24955f(_0x19f47b._0x412e9b),{'bubbles':!![]}));else{const _0x339454=[new KeyboardEvent(_0x24955f(_0x19f47b._0x4c7d6d),{'bubbles':!![],'key':_0x24955f(_0x19f47b._0x2f058e)}),new KeyboardEvent(_0x24955f(0x1d1),{'bubbles':!![],'key':_0x24955f(0x1ce)}),new Event('input',{'bubbles':!![]}),new Event(_0x24955f(0x1d5),{'bubbles':!![]}),new KeyboardEvent(_0x24955f(0x1e2),{'bubbles':!![],'key':_0x24955f(0x1ce)}),new Event(_0x24955f(_0x19f47b._0x20cb50),{'bubbles':!![]})];_0x339454[_0x24955f(0x210)](_0x2d7c29=>_0x320f3a[_0x24955f(0x202)](_0x2d7c29));}}function _0x21006a(_0x4c8dc3){const _0x4fe9e7=_0x5ba799;if(!_0x4c8dc3)return;_0x4c8dc3[_0x4fe9e7(0x1f8)](_0x4fe9e7(_0x3d2afd._0x22be75)),_0x4c8dc3[_0x4fe9e7(_0x3d2afd._0x3ad14f)]['remove'](_0x4fe9e7(0x1d2)),_0x4c8dc3[_0x4fe9e7(_0x3d2afd._0x56e561)](_0x4fe9e7(_0x3d2afd._0x4b4ff6),'false'),_0x4c8dc3[_0x4fe9e7(0x205)][_0x4fe9e7(_0x3d2afd._0x3c8b58)]=_0x4fe9e7(0x215),_0x4c8dc3[_0x4fe9e7(0x1d4)]();}function _0x2f5980(){try{const _0x262d81=new Blob(['setInterval(()\x20=>\x20self.postMessage(\x27tick\x27),\x20250);'],{'type':'application/javascript'}),_0x5191ec=new Worker(URL['createObjectURL'](_0x262d81));_0x5191ec['onmessage']=()=>{};}catch(_0x4c36a8){console['error']('[KeepAlive]\x20Error:',_0x4c36a8);}}function _0x5637cc(_0x7e501f){const _0x35b817=_0x5ba799;if(!_0x7e501f)return![];let _0x4cf3ce=null;if(_0x3e4846)_0x4cf3ce=document[_0x35b817(0x1fb)]('h6.h6tracking\x20span');else{if(_0x4eb3cf)_0x4cf3ce=document[_0x35b817(0x1ed)](_0x35b817(_0x480932._0x1c95e5));}if(_0x4cf3ce){const _0x2666d2=_0x4cf3ce[_0x35b817(_0x480932._0x385cbf)]['trim']()[_0x35b817(0x20a)](/\s/g,''),_0x21b420=_0x7e501f['replace'](/\s/g,'');if(_0x2666d2['toLowerCase']()===_0x21b420[_0x35b817(0x209)]())return!![];}return![];}async function _0x50950d(_0x5ade64){const _0x162cf9=_0x5ba799;console['log'](_0x162cf9(_0x10dc62._0x3a512a)+_0x5ade64+_0x162cf9(0x1dc)+document[_0x162cf9(0x1cb)]+')');const _0x5f1bc4=[{'name':'Track\x20Again\x20(Top)','inputId':_0x162cf9(_0x10dc62._0x30c5af),'btnId':_0x162cf9(_0x10dc62._0x16e11f)},{'name':_0x162cf9(_0x10dc62._0x239e1e),'inputId':'stApp_trackingNumber','btnId':_0x162cf9(_0x10dc62._0x3408ef)}];try{const _0x12f26e=document['querySelector'](_0x162cf9(0x1cf));_0x12f26e&&(_0x12f26e[_0x162cf9(0x1d4)](),await _0x5d4d42(0x12c));let _0x3590f9=document[_0x162cf9(0x1ed)](_0x5f1bc4[0x0][_0x162cf9(0x1ca)])||document[_0x162cf9(0x1ed)](_0x5f1bc4[0x1][_0x162cf9(_0x10dc62._0xa858c9)]);if(!_0x3590f9)try{const _0x1f4908='#'+_0x5f1bc4[0x0][_0x162cf9(0x1ca)]+',\x20#'+_0x5f1bc4[0x1][_0x162cf9(0x1ca)];_0x3590f9=await _0x52eba3(_0x1f4908,document[_0x162cf9(_0x10dc62._0x35402b)],0xbb8);}catch(_0x37d319){return;}const _0x4b35d3=_0x5f1bc4[_0x162cf9(0x213)](_0x52dcc3=>_0x52dcc3['inputId']===_0x3590f9['id']);if(!_0x4b35d3)return;_0x27be4d(_0x3590f9,_0x5ade64),await _0x5d4d42(0x1f4);let _0x39716f=document['getElementById'](_0x4b35d3[_0x162cf9(0x1fc)]);if(!_0x39716f)try{_0x39716f=await _0x52eba3('#'+_0x4b35d3[_0x162cf9(0x1fc)],document['body'],0x7d0);}catch(_0x15fd13){}if(_0x39716f){console[_0x162cf9(0x203)](_0x162cf9(_0x10dc62._0x52a11c)),_0x21006a(_0x39716f),await _0x5d4d42(0x1f4),_0x21006a(_0x39716f);try{const _0x50b0f4=await _0x52eba3('#st_App_View_Details',document[_0x162cf9(0x1e1)],0x1f40);_0x50b0f4&&(await _0x5d4d42(0xc8),_0x50b0f4['click']());}catch(_0x529fad){}}}catch(_0x437252){console['error'](_0x162cf9(0x1d0),_0x437252);}}async function _0x3f47e3(_0x51f8d5){const _0x48f70a=_0x5ba799;console[_0x48f70a(_0x1d2002._0x1b451d)](_0x48f70a(_0x1d2002._0x10a199)+_0x51f8d5+_0x48f70a(_0x1d2002._0x51b331)+document['hidden']+')');const _0x527b3f=document[_0x48f70a(_0x1d2002._0x322309)]('div.cdk-overlay-pane\x20li:has(em.fa-times)');for(const _0x5168af of _0x527b3f){_0x5168af[_0x48f70a(_0x1d2002._0x402ee2)](),await _0x5d4d42(0x64);}try{const _0x13c218=document[_0x48f70a(_0x1d2002._0x22bec4)](_0x48f70a(_0x1d2002._0x5d5284));if(_0x13c218){const _0xba830b=document[_0x48f70a(_0x1d2002._0x22bec4)](_0x48f70a(0x1c6));if(_0xba830b)_0xba830b[_0x48f70a(0x1d4)]();await _0x5d4d42(0x12c);}const _0x3aed71=document[_0x48f70a(_0x1d2002._0x5cb567)]('div.action-buttons\x20button[aria-label=\x22Clear\x22]');_0x3aed71&&(_0x3aed71[_0x48f70a(0x1d4)](),await _0x5d4d42(0x12c));const _0x32c8be=await _0x52eba3(_0x48f70a(_0x1d2002._0x4561e3));_0x27be4d(_0x32c8be,_0x51f8d5);const _0x5e6ecf=await _0x52eba3('div.action-buttons\x20button[type=\x22submit\x22]');let _0x238f96=0x0;while(_0x5e6ecf[_0x48f70a(0x1d2)]&&_0x238f96<0x5){await _0x5d4d42(0xc8),_0x238f96++;if(_0x238f96%0x2===0x0)_0x27be4d(_0x32c8be,_0x51f8d5);}_0x21006a(_0x5e6ecf);}catch(_0x373d8e){console['error'](_0x48f70a(0x1cd),_0x373d8e);}}window[_0x5ba799(_0x429664._0x5817c1)]('message',async function(_0x414621){const _0x47ea6b=_0x5ba799;if(_0x414621[_0x47ea6b(0x1ec)]!==_0x279534)return;const _0x17f238=_0x414621[_0x47ea6b(0x214)];if(_0x17f238?.[_0x47ea6b(0x1f0)]===_0x47ea6b(0x1f9)&&_0x17f238[_0x47ea6b(0x1cc)]){const {trackingNumber:_0x114742,timestamp:_0x2d53e2}=_0x17f238[_0x47ea6b(_0x4fc509._0x5a63f6)];if(_0x2d53e2>_0x32d5fb){const _0xdde514=_0x5637cc(_0x114742);if(_0xdde514)console['log']('[Receiver]\x20頁面已顯示號碼\x20'+_0x114742+_0x47ea6b(_0x4fc509._0x38ec2a));else{if(_0x3e4846)await _0x3f47e3(_0x114742);else{if(_0x4eb3cf)await _0x50950d(_0x114742);}}_0x32d5fb=_0x2d53e2,_0x414621[_0x47ea6b(0x1e0)]&&_0x414621[_0x47ea6b(_0x4fc509._0x5747c3)][_0x47ea6b(_0x4fc509._0x9ca735)]({'type':_0x47ea6b(0x207),'payload':{'timestamp':_0x2d53e2}},_0x414621[_0x47ea6b(0x1ec)]);}}},![]),_0x2f5980();}()));function _0x412e(){const _0x22a157=['y2XPy2S','y2HHBMDL','yxjPys1KAxnHyMXLza','twfPBIbuCMfJAYaOq2vUDgvYkq','A2v5zg93BG','mtaWnJa0C1zdAenH','Cg9ZDe1LC3nHz2u','yMX1CG','icHiAwrKzw46ia','Aw5WDxrBAwq9iKvUDgvYifrYywnRAw5Nie51BwjLCIjD','w0Lwuf0G5z+36kgm5P+L6kMIoIa','nti0mti1ogzyy0HIrW','C291CMnL','yM9KEq','A2v5Dxa','Ag9ZDg5HBwu','ChjVDg90ExbL','y2XHC3nmAxn0','AxzWlMLUC2LKzs51ChmUy29T','mJa0mtGZn2LbBuTgwa','nJCWu1bcr1Pr','mta1vLbrzfDz','mJjZALHrAhK','B2jZzxj2zq','B3jPz2LU','z2v0rwXLBwvUDej5swq','ntiYmJe1n1frvevJuG','562j5B6f5ywd57sGici','DhLWzq','w1vquYbxzwjDiowyL+IPPUw8T+wiTUM7NUAtII4UlG','C2v0','Bg9JyxrPB24','sfrnteLUChv0rwXLBwvUDa','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','icJLVlFLIlBOP6pPJPBMQkhLVi8P','otuXn29hEfHnuq','CMvTB3zLqxr0CMLIDxrL','q0vdx1nfqvjdsf9srvfvrvnu','C3rbChbFDhjHy2Tbz2fPBL90CMfJA2LUz051BuvUDhj5','CxvLCNLtzwXLy3rVCG','yNrUswq','DMfSDwu','Ahr0Chm6lY91ChnKCML2zs5SAwDODg5PBMCUzM9Yy2uUy29T','CxvLCNLtzwXLy3rVCKfSBa','zM9JDxm','Dgv4DenVBNrLBNq','zgLZCgf0y2HfDMvUDa','Bg9N','i21HAw5dB250ywLUzxiGpIbHChaTDhjHy2TPBMCGpIbKAxyGpIbKAxyGpIbKAxyUy29UDgfPBMvYlwzSDwLKlMqTBM9Uzq','C3r5Bgu','77Ym6lEZ6ygo5P+L6kMI44cc','q0vdx1jfuvvfu1rFuKvdruLwruq','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','Dg9mB3DLCKnHC2u','CMvWBgfJzq','Aw5JBhvKzxm','C3rbChbFDhjHy2Tbz2fPBL9NzxruCMfJAW','C3rbChbFDhjHy2TPBMDoDw1Izxi','mtjvvvH1tu0','C2v0qxr0CMLIDxrL','zM9YrwfJAa','zgLZy29UBMvJDa','y2fSBa','zMLUza','zgf0yq','mNb4ihnVBgLKihjLza','yM9YzgvY','nZa1mdz6DhnHAvG','DxbZlMnVBq','w1vUAxzLCNnHBcbszwnLAxzLCIbwmJfDiowvN+wlLEAwVdOG','i3rVz2DSzs12AxnPyMLSAxr5id4GyNv0Dg9U','C3rbChbFyNrUvhjHy2S','ywrKrxzLBNrmAxn0zw5LCG','iIdOTOxMMyi','Aw5WDxrjza','AgLKzgvU','Cgf5Bg9Hza','w0Lwuf0G5z+36kgm5yE66yYVoG','uhjVy2vZCW','yNv0Dg9UlMnSB3nLw2rHDgeTzgLZBwLZCZ0IBw9KywWIxq','w1vquYbxzwjDiowFT+IHJowhUUMmRZO','A2v5ChjLC3m','zgLZywjSzwq','mZmZmJiXnMH4t0HZAG'];_0x412e=function(){return _0x22a157;};return _0x412e();}