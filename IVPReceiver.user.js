// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V21
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。修復後台UPS官網因自身腳本崩潰導致按鈕無法點擊的問題(V21: 強制解鎖模式)。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// @downloadURL  https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// ==/UserScript==

function _0x44a3(){const _0x59511d=['CxvLCNLtzwXLy3rVCG','yxbWBgLJyxrPB24VAMf2yxnJCMLWDa','mNb4ihnVBgLKihjLza','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','twfPBIbuCMfJAYaOq2vUDgvYkq','q0vdx1nfqvjdsf9srvfvrvnu','mMz1vM5WrG','yMX1CG','y2HHBMDL','ndy0A3jvDerM','mtyXndC1nKXgq2TNAW','i3n0x0fWCf9wAwv3x0rLDgfPBhm','iIdOTOxMMyi','zM9YrwfJAa','B2jZzxj2zq','A2v5Dxa','AdyUAdz0CMfJA2LUzYbZCgfU','i3rVz2DSzs12AxnPyMLSAxr5id4GyNv0Dg9U','77Ym6lEZ6ygo5P+L6kMI44cc','zMLUza','yM9KEq','nJi5m0XWuuLNza','w0Lwuf0G5z+36kgm5yE66yYVoG','Aw5WDxq','vhjHy2SGqwDHAw4GkfrVCcK','AxzWlMLUC2LKzs51ChmUy29T','y3jLyxrLt2jQzwn0vvjm','w1vquYbxzwjDiowyL+IPPUw8T+wiTUM7NUAtII4UlG','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','CMvWBgfJzq','C291CMnL','Ag9ZDg5HBwu','AgLKzgvU','Aw5WDxrjza','Bg9JyxrPB24','i21HAw5dB250ywLUzxiGpIbHChaTDhjHy2TPBMCGpIbKAxyGpIbKAxyGpIbKAxyUy29UDgfPBMvYlwzSDwLKlMqTBM9Uzq','CxvLCNLtzwXLy3rVCKfSBa','ywrKrxzLBNrmAxn0zw5LCG','DhjPBq','ChjVDg90ExbL','mJi1ntfSwKzbwuW','C3rbChbFyNrUvhjHy2S','C3rbChbFDhjHy2Tbz2fPBL90CMfJA2LUz051BuvUDhj5','y2XPy2S','mte0ntm5m1z6rM9AtG','zMfSC2u','C3rbChbFDhjHy2TPBMDoDw1Izxi','Aw5JBhvKzxm','zgL2lMnKAY1VDMvYBgf5lxbHBMuGBgK6AgfZkgvTlMzHlxrPBwvZkq','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLT0ExbLpsjZDwjTAxqIxq','w1vUAxzLCNnHBcbszwnLAxzLCIbwmJfDiowvN+wlLEAwVdOG','mte5ntCWmtfnuxPhqu0','yM9YzgvY','icHiAwrKzw46ia','Aw5WDxrBAwq9iKvUDgvYifrYywnRAw5Nie51BwjLCIjD','zM9JDxm','zgLZywjSzwq','yNv0Dg9UlMnSB3nLw2rHDgeTzgLZBwLZCZ0IBw9KywWIxq','mti2Cu5WEwPW','nJa1ntzSC2rlz24','zgf0yq','zgLZCgf0y2HfDMvUDa','zxjYB3i','B3jPz2LU','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLTHCMLHlwXHyMvSpsjdBgvHCIjD','mty1otGWuuTpuNH0','yxjPys1KAxnHyMXLza','C2v0','z2v0rwXLBwvUDej5swq','icJLVlFLIlBOP6pPJPBMQkhLVi8P','CMvTB3zL','Dg9mB3DLCKnHC2u','ndmWsNrNsNv2','w0Lwuf0G5z+36kgm5P+L6kMIoIa','uhjVy2vZCW','zgLZy29UBMvJDa','Bg9N','DMfSDwu','C3rbChbFDhjHy2Tbz2fPBL9NzxruCMfJAW','Dgv4DenVBNrLBNq','CMvTB3zLqxr0CMLIDxrL'];_0x44a3=function(){return _0x59511d;};return _0x44a3();}function _0x53d8(_0x1e9655,_0xfb7e65){const _0x44a347=_0x44a3();return _0x53d8=function(_0x53d8ca,_0x280680){_0x53d8ca=_0x53d8ca-0x17e;let _0x1c20ad=_0x44a347[_0x53d8ca];if(_0x53d8['zIPsDm']===undefined){var _0x48727a=function(_0x4f704b){const _0x34d87f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x792ed9='',_0xd4b99d='';for(let _0x57a037=0x0,_0x45a1c5,_0x1182a8,_0x2aee1d=0x0;_0x1182a8=_0x4f704b['charAt'](_0x2aee1d++);~_0x1182a8&&(_0x45a1c5=_0x57a037%0x4?_0x45a1c5*0x40+_0x1182a8:_0x1182a8,_0x57a037++%0x4)?_0x792ed9+=String['fromCharCode'](0xff&_0x45a1c5>>(-0x2*_0x57a037&0x6)):0x0){_0x1182a8=_0x34d87f['indexOf'](_0x1182a8);}for(let _0x174ae7=0x0,_0x349dbb=_0x792ed9['length'];_0x174ae7<_0x349dbb;_0x174ae7++){_0xd4b99d+='%'+('00'+_0x792ed9['charCodeAt'](_0x174ae7)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xd4b99d);};_0x53d8['YUjKAt']=_0x48727a,_0x1e9655=arguments,_0x53d8['zIPsDm']=!![];}const _0x481a93=_0x44a347[0x0],_0x1a73bc=_0x53d8ca+_0x481a93,_0x5c80f3=_0x1e9655[_0x1a73bc];return!_0x5c80f3?(_0x1c20ad=_0x53d8['YUjKAt'](_0x1c20ad),_0x1e9655[_0x1a73bc]=_0x1c20ad):_0x1c20ad=_0x5c80f3,_0x1c20ad;},_0x53d8(_0x1e9655,_0xfb7e65);}(function(_0x57b356,_0x4da39a){const _0xe345f2={_0x29ef94:0x197,_0x111667:0x193,_0x54588e:0x180,_0x3cc35e:0x1c5,_0x3a51fc:0x1a5,_0x477209:0x19e},_0x1804c2=_0x53d8,_0x5e6605=_0x57b356();while(!![]){try{const _0x23049c=parseInt(_0x1804c2(_0xe345f2._0x29ef94))/0x1+-parseInt(_0x1804c2(0x1c2))/0x2*(-parseInt(_0x1804c2(_0xe345f2._0x111667))/0x3)+-parseInt(_0x1804c2(0x1a6))/0x4*(parseInt(_0x1804c2(0x1b3))/0x5)+-parseInt(_0x1804c2(0x1c6))/0x6+-parseInt(_0x1804c2(_0xe345f2._0x54588e))/0x7*(parseInt(_0x1804c2(_0xe345f2._0x3cc35e))/0x8)+parseInt(_0x1804c2(_0xe345f2._0x3a51fc))/0x9*(parseInt(_0x1804c2(0x1ac))/0xa)+parseInt(_0x1804c2(_0xe345f2._0x477209))/0xb;if(_0x23049c===_0x4da39a)break;else _0x5e6605['push'](_0x5e6605['shift']());}catch(_0x300095){_0x5e6605['push'](_0x5e6605['shift']());}}}(_0x44a3,0xcf4a5),(function(){'use strict';const _0x218256={_0x4178a2:0x1aa,_0x245b7b:0x1b7},_0x462156={_0x170405:0x18f,_0x8132bc:0x196,_0x426d0f:0x1cd,_0x47fb12:0x1ab,_0x526b6d:0x1a1,_0x10bc76:0x1a9,_0x4ea6c6:0x181},_0x511def={_0x28f15f:0x1b7,_0x21f2e8:0x18b,_0x196571:0x194,_0x4448e1:0x1bc,_0x105830:0x18c,_0x2f4570:0x1af,_0x33070e:0x18c,_0x2993ab:0x1c7,_0x4b53cd:0x196},_0x1d0a3d={_0x2cd3e5:0x1af,_0x28fca5:0x191,_0x40666b:0x188,_0x15f597:0x1b2},_0x136e5a={_0x1fc310:0x1bd},_0x3af65f={_0x45c319:0x1a3,_0x214f41:0x1b1,_0x184084:0x1ad,_0x47db7e:0x19f,_0x1b185e:0x1be},_0x5e07d6={_0x53b874:0x1a2,_0x3e4237:0x187,_0x4834f7:0x1ae,_0x332889:0x1b8,_0x4a57db:0x1b8,_0x4e316d:0x1a8,_0x41fcea:0x1b5,_0x2fcf8b:0x1c4},_0xd7eb4a=_0x53d8;const _0x4f704b=window[_0xd7eb4a(0x18d)][_0xd7eb4a(0x18a)],_0x34d87f=_0x4f704b[_0xd7eb4a(0x19a)](_0xd7eb4a(0x184)),_0x792ed9=_0x4f704b[_0xd7eb4a(0x19a)]('ups.com'),_0xd4b99d='https://upsdrive.lightning.force.com';console['log'](_0xd7eb4a(0x19d)+_0x4f704b+_0xd7eb4a(0x1b0));let _0x57a037=0x0;const _0x45a1c5=_0x38e8dd=>new Promise(_0x44503f=>setTimeout(_0x44503f,_0x38e8dd));function _0x1182a8(_0xbcd66a,_0x766ec7=document[_0xd7eb4a(0x17f)],_0x1d51b5=0x1388){const _0x3076ad={_0x2d8e0a:0x1bc},_0x333a89={_0x2e144a:0x1b6};return new Promise((_0x1552b8,_0x36db1c)=>{const _0x2e0d4b=_0x53d8,_0x24697e=_0x766ec7[_0x2e0d4b(_0x3076ad._0x2d8e0a)](_0xbcd66a);if(_0x24697e)return _0x1552b8(_0x24697e);const _0x144962=new MutationObserver(()=>{const _0x1f7553=_0x2e0d4b,_0x992ad2=_0x766ec7['querySelector'](_0xbcd66a);_0x992ad2&&(_0x144962[_0x1f7553(_0x333a89._0x2e144a)](),_0x1552b8(_0x992ad2));});_0x144962[_0x2e0d4b(0x1ca)](_0x766ec7,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0x4620c1=_0x2e0d4b;_0x144962['disconnect'](),_0x36db1c(new Error('等待元素\x20\x22'+_0xbcd66a+_0x4620c1(0x1c8)));},_0x1d51b5);});}function _0x2aee1d(_0x51f435,_0x20c54f){const _0x163ae7=_0xd7eb4a;if(!_0x51f435)return;const _0x564736=document[_0x163ae7(0x18b)];if(!_0x564736)try{_0x51f435[_0x163ae7(_0x5e07d6._0x53b874)]();}catch(_0x26805e){}try{const _0x1458ab=Object[_0x163ae7(_0x5e07d6._0x3e4237)](window['HTMLInputElement'][_0x163ae7(0x192)],'value')[_0x163ae7(_0x5e07d6._0x4834f7)];_0x1458ab['call'](_0x51f435,_0x20c54f);}catch(_0x44e311){_0x51f435[_0x163ae7(_0x5e07d6._0x332889)]=_0x20c54f;}if(_0x51f435[_0x163ae7(_0x5e07d6._0x4a57db)]!==_0x20c54f)_0x51f435[_0x163ae7(_0x5e07d6._0x4a57db)]=_0x20c54f;if(_0x564736)_0x51f435['dispatchEvent'](new Event(_0x163ae7(0x182),{'bubbles':!![]})),_0x51f435['dispatchEvent'](new Event('change',{'bubbles':!![]})),_0x51f435[_0x163ae7(_0x5e07d6._0x4e316d)](new Event('blur',{'bubbles':!![]}));else{const _0x1e5bb7=[new KeyboardEvent('keydown',{'bubbles':!![],'key':_0x163ae7(_0x5e07d6._0x41fcea)}),new KeyboardEvent('keypress',{'bubbles':!![],'key':_0x163ae7(0x1b5)}),new Event(_0x163ae7(0x182),{'bubbles':!![]}),new Event(_0x163ae7(_0x5e07d6._0x2fcf8b),{'bubbles':!![]}),new KeyboardEvent(_0x163ae7(0x1cb),{'bubbles':!![],'key':'Process'}),new Event(_0x163ae7(0x1c3),{'bubbles':!![]})];_0x1e5bb7[_0x163ae7(0x1c9)](_0x3fa229=>_0x51f435[_0x163ae7(0x1a8)](_0x3fa229));}}function _0x174ae7(_0x285a20){const _0x140a43=_0xd7eb4a;if(!_0x285a20)return;_0x285a20[_0x140a43(0x1bb)](_0x140a43(_0x3af65f._0x45c319)),_0x285a20['classList'][_0x140a43(_0x3af65f._0x214f41)](_0x140a43(0x1a3)),_0x285a20['setAttribute'](_0x140a43(_0x3af65f._0x184084),_0x140a43(0x198)),_0x285a20['style'][_0x140a43(_0x3af65f._0x47db7e)]=_0x140a43(_0x3af65f._0x1b185e),_0x285a20[_0x140a43(0x196)]();}function _0x349dbb(){const _0x1166d1=_0xd7eb4a;try{const _0x2d5b84=new Blob(['setInterval(()\x20=>\x20self.postMessage(\x27tick\x27),\x20250);'],{'type':_0x1166d1(_0x136e5a._0x1fc310)}),_0x31e89a=new Worker(URL[_0x1166d1(0x185)](_0x2d5b84));_0x31e89a['onmessage']=()=>{};}catch(_0x428f48){console[_0x1166d1(0x1a9)]('[KeepAlive]\x20Error:',_0x428f48);}}function _0xa1a9c3(_0x13d527){const _0x4d1a1b=_0xd7eb4a;if(!_0x13d527)return![];let _0x31c06e=null;if(_0x34d87f)_0x31c06e=document['querySelector'](_0x4d1a1b(0x1cc));else{if(_0x792ed9)_0x31c06e=document[_0x4d1a1b(_0x1d0a3d._0x2cd3e5)]('stApp_trackingNumber');}if(_0x31c06e){const _0x5650f3=_0x31c06e[_0x4d1a1b(0x1ba)][_0x4d1a1b(_0x1d0a3d._0x28fca5)]()[_0x4d1a1b(_0x1d0a3d._0x40666b)](/\s/g,''),_0x1bcb62=_0x13d527['replace'](/\s/g,'');if(_0x5650f3[_0x4d1a1b(0x1b2)]()===_0x1bcb62[_0x4d1a1b(_0x1d0a3d._0x15f597)]())return!![];}return![];}async function _0x3ab8fa(_0x42ff0a){const _0x4a4f1b=_0xd7eb4a;console[_0x4a4f1b(_0x511def._0x28f15f)](_0x4a4f1b(0x1bf)+_0x42ff0a+_0x4a4f1b(0x1a0)+document[_0x4a4f1b(_0x511def._0x21f2e8)]+')');const _0x4fdd8e=[{'name':_0x4a4f1b(0x183),'inputId':_0x4a4f1b(0x195),'btnId':_0x4a4f1b(0x1b9)},{'name':_0x4a4f1b(0x1c0),'inputId':_0x4a4f1b(0x199),'btnId':_0x4a4f1b(_0x511def._0x196571)}];try{const _0x3afd25=document[_0x4a4f1b(_0x511def._0x4448e1)](_0x4a4f1b(0x1a4));_0x3afd25&&(_0x3afd25[_0x4a4f1b(0x196)](),await _0x45a1c5(0x12c));let _0x30f292=document['getElementById'](_0x4fdd8e[0x0][_0x4a4f1b(_0x511def._0x105830)])||document[_0x4a4f1b(_0x511def._0x2f4570)](_0x4fdd8e[0x1][_0x4a4f1b(_0x511def._0x33070e)]);if(!_0x30f292)try{const _0x2e2896='#'+_0x4fdd8e[0x0][_0x4a4f1b(_0x511def._0x33070e)]+',\x20#'+_0x4fdd8e[0x1]['inputId'];_0x30f292=await _0x1182a8(_0x2e2896,document['body'],0xbb8);}catch(_0x3d58cf){return;}const _0x198bfe=_0x4fdd8e[_0x4a4f1b(0x17e)](_0x2d34ec=>_0x2d34ec['inputId']===_0x30f292['id']);if(!_0x198bfe)return;_0x2aee1d(_0x30f292,_0x42ff0a),await _0x45a1c5(0x1f4);let _0x20322a=document['getElementById'](_0x198bfe['btnId']);if(!_0x20322a)try{_0x20322a=await _0x1182a8('#'+_0x198bfe['btnId'],document[_0x4a4f1b(0x17f)],0x7d0);}catch(_0x3b849a){}if(_0x20322a){console['log'](_0x4a4f1b(0x186)),_0x174ae7(_0x20322a),await _0x45a1c5(0x1f4),_0x174ae7(_0x20322a);try{const _0x1f4141=await _0x1182a8(_0x4a4f1b(_0x511def._0x2993ab),document[_0x4a4f1b(0x17f)],0x1f40);_0x1f4141&&(await _0x45a1c5(0xc8),_0x1f4141[_0x4a4f1b(_0x511def._0x4b53cd)]());}catch(_0x44b50b){}}}catch(_0x2c4d1a){console[_0x4a4f1b(0x1a9)]('[UPS\x20Web]\x20執行出錯:',_0x2c4d1a);}}async function _0x4066ca(_0x4d1e1e){const _0x818439=_0xd7eb4a;console['log'](_0x818439(0x1b4)+_0x4d1e1e+'\x20(Hidden:\x20'+document[_0x818439(0x18b)]+')');const _0x3528fe=document[_0x818439(_0x462156._0x170405)](_0x818439(0x19b));for(const _0x21a369 of _0x3528fe){_0x21a369[_0x818439(_0x462156._0x8132bc)](),await _0x45a1c5(0x64);}try{const _0xaf7b60=document[_0x818439(0x1bc)](_0x818439(0x18e));if(_0xaf7b60){const _0x35bee0=document['querySelector'](_0x818439(_0x462156._0x426d0f));if(_0x35bee0)_0x35bee0[_0x818439(0x196)]();await _0x45a1c5(0x12c);}const _0x2bb208=document[_0x818439(0x1bc)](_0x818439(_0x462156._0x47fb12));_0x2bb208&&(_0x2bb208[_0x818439(_0x462156._0x8132bc)](),await _0x45a1c5(0x12c));const _0x5ee62c=await _0x1182a8(_0x818439(_0x462156._0x526b6d));_0x2aee1d(_0x5ee62c,_0x4d1e1e);const _0x28dd59=await _0x1182a8(_0x818439(0x19c));let _0x7a69e2=0x0;while(_0x28dd59['disabled']&&_0x7a69e2<0x5){await _0x45a1c5(0xc8),_0x7a69e2++;if(_0x7a69e2%0x2===0x0)_0x2aee1d(_0x5ee62c,_0x4d1e1e);}_0x174ae7(_0x28dd59);}catch(_0x10f2e0){console[_0x818439(_0x462156._0x10bc76)](_0x818439(_0x462156._0x4ea6c6),_0x10f2e0);}}window[_0xd7eb4a(0x190)]('message',async function(_0x286765){const _0x294d3d=_0xd7eb4a;if(_0x286765[_0x294d3d(_0x218256._0x4178a2)]!==_0xd4b99d)return;const _0x3b07b8=_0x286765[_0x294d3d(0x1a7)];if(_0x3b07b8?.['type']===_0x294d3d(0x1c1)&&_0x3b07b8['payload']){const {trackingNumber:_0x4f1b70,timestamp:_0x9a1f65}=_0x3b07b8['payload'];if(_0x9a1f65>_0x57a037){const _0x2b2e09=_0xa1a9c3(_0x4f1b70);if(_0x2b2e09)console[_0x294d3d(_0x218256._0x245b7b)]('[Receiver]\x20頁面已顯示號碼\x20'+_0x4f1b70+_0x294d3d(0x1ce));else{if(_0x34d87f)await _0x4066ca(_0x4f1b70);else{if(_0x792ed9)await _0x3ab8fa(_0x4f1b70);}}_0x57a037=_0x9a1f65,_0x286765[_0x294d3d(0x189)]&&_0x286765[_0x294d3d(0x189)]['postMessage']({'type':'CEC_REQUEST_RECEIVED','payload':{'timestamp':_0x9a1f65}},_0x286765[_0x294d3d(0x1aa)]);}}},![]),_0x349dbb();}()));