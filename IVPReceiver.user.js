// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V14
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。後臺保活功能。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://raw.githubusercontent.com/Jerry199022/Work/refs/heads/main/IVPReceiver.js
// @downloadURL  https://raw.githubusercontent.com/Jerry199022/Work/refs/heads/main/IVPReceiver.js
// ==/UserScript==

function _0x3cfc(_0x183f22,_0x4f5879){const _0x470a41=_0x470a();return _0x3cfc=function(_0x3cfcde,_0x324e9e){_0x3cfcde=_0x3cfcde-0x1a6;let _0x37c92a=_0x470a41[_0x3cfcde];if(_0x3cfc['yQOOgG']===undefined){var _0x5f210e=function(_0x5aca4f){const _0x558545='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x46352f='',_0x1b6efa='';for(let _0x3f1db7=0x0,_0x2eae93,_0x2cd6dd,_0x5b7e7a=0x0;_0x2cd6dd=_0x5aca4f['charAt'](_0x5b7e7a++);~_0x2cd6dd&&(_0x2eae93=_0x3f1db7%0x4?_0x2eae93*0x40+_0x2cd6dd:_0x2cd6dd,_0x3f1db7++%0x4)?_0x46352f+=String['fromCharCode'](0xff&_0x2eae93>>(-0x2*_0x3f1db7&0x6)):0x0){_0x2cd6dd=_0x558545['indexOf'](_0x2cd6dd);}for(let _0xacbdf9=0x0,_0x3f2428=_0x46352f['length'];_0xacbdf9<_0x3f2428;_0xacbdf9++){_0x1b6efa+='%'+('00'+_0x46352f['charCodeAt'](_0xacbdf9)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1b6efa);};_0x3cfc['DvrGTT']=_0x5f210e,_0x183f22=arguments,_0x3cfc['yQOOgG']=!![];}const _0x5cfa22=_0x470a41[0x0],_0x16bc5a=_0x3cfcde+_0x5cfa22,_0x3286a3=_0x183f22[_0x16bc5a];return!_0x3286a3?(_0x37c92a=_0x3cfc['DvrGTT'](_0x37c92a),_0x183f22[_0x16bc5a]=_0x37c92a):_0x37c92a=_0x3286a3,_0x37c92a;},_0x3cfc(_0x183f22,_0x4f5879);}function _0x470a(){const _0x230da3=['yMX1CG','Aw5WDxrjza','w0Lwuf0G5O+q5lQK5OYj6yIv5lUn6jMv5PA856Ab55sO54Ua5Owl44cc','i3n0x0fWCf9wAwv3x0rLDgfPBhm','mJi0nJa0nvDJsKrtrG','Bg9N','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLTHCMLHlwXHyMvSpsjdBgvHCIjD','twfPBIbuCMfJAYaOq2vUDgvYkq','Aw5WDxrBAwq9iKvUDgvYifrYywnRAw5Nie51BwjLCIjD','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','nJe4nhzwANLPAq','mteWmtvhq0nIBuC','w0TLzxbbBgL2zv0G5zwF5yUv5AsX5PwxoG','ntCWotu3m3jqy0nhBG','C3rbChbFDhjHy2Tbz2fPBL90CMfJA2LUz051BuvUDhj5','nhfZu1bVsW','C291CMnL','Ag9ZDg5HBwu','Ahr0Chm6lY91ChnKCML2zs5SAwDODg5PBMCUzM9Yy2uUy29T','vvbtifDLyIbnB2rL','Bg9JyxrPB24','mZG4mdm5otz2quDRBLK','w1vquYbxzwjDioAQOUA4RowiSow9IoEQL+MxNoMwIEAmIEMiLE+8JoATO+wCQoM7NUAtII4UlG','zgLZCgf0y2HfDMvUDa','Dgv4DenVBNrLBNq','zxjYB3i','iIdOTOxMMyi','w0TLzxbbBgL2zv0G5l+D5Rs75QMF5yI25BEY5zwF5yUvic0G6Ac7546hoIaX5yIg6zcyl+ASOq','AdyUAdz0CMfJA2LUzYbZCgfU','CxvLCNLtzwXLy3rVCG','yNrUswq','i3rVz2DSzs12AxnPyMLSAxr5id4GyNv0Dg9U','Aw5WDxq','vhjHy2SGqwDHAw4GkfrVCcK','zMLUza','DhjPBq','C3rbChbFDhjHy2TPBMDoDw1Izxi','ywrKrxzLBNrmAxn0zw5LCG','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLT0ExbLpsjZDwjTAxqIxq','zgL2lMnKAY1VDMvYBgf5lxbHBMuGBgK6AgfZkgvTlMzHlxrPBwvZkq','77Ym6lEZ6ygo5P+L6kMI44cc','562j5B6f5ywd57sGici','w1vquYbxzwjDioACQUAjVUwiSos7U+s9LEwpR+EuQoEAHoI8UowfPEAHHUoaGG','ntbKEhnzDey','D2fYBG','mJi4nde4mKLdr3vusa','yM9KEq','cIaGicaGicaGicaGicaGicbZzxrjBNrLCNzHBcGOksa9pIb7cIaGicaGicaGicaGicaGicaGicaGC2vSzI5WB3n0twvZC2fNzsGNDgLJAYCPoWOGicaGicaGicaGicaGicaGFsWGnJaWmdaPoWOGicaGicaGicaGica','BwvZC2fNzq','zgLZywjSzwq','q0vdx1jfuvvfu1rFuKvdruLwruq','mJaZn3zpCLHSwq','CMvWBgfJzq','mJq3odK0mMLzCxLHua','i21HAw5dB250ywLUzxiGpIbHChaTDhjHy2TPBMCGpIbKAxyGpIbKAxyGpIbKAxyUy29UDgfPBMvYlwzSDwLKlMqTBM9Uzq','w01VzgvDia','DMfSDwu','mtbjs2vHzKC','w1jLy2vPDMvYxsdPOihPNAlLT7lPOA/NPlROMz/NORWG','Cgf5Bg9Hza','Dg9mB3DLCKnHC2u','y2XPy2S','w1vquYbxzwjDiowFT+IHJowhUUMmRZO','z2v0rwXLBwvUDej5swq','B3jPz2LU','zgf0yq','zgLZy29UBMvJDa','B2jZzxj2zq','DxbZlMnVBq'];_0x470a=function(){return _0x230da3;};return _0x470a();}(function(_0x350097,_0x1680e9){const _0x535133={_0x3e27de:0x1e5,_0x1e15bc:0x1c0,_0x1dea5a:0x1e7,_0x4294a0:0x1de,_0x3d6e19:0x1c8,_0x482efd:0x1e4,_0x4f6eba:0x1c2,_0x38b4ce:0x1ce,_0xad8981:0x1aa},_0x3645d2=_0x3cfc,_0x98b1aa=_0x350097();while(!![]){try{const _0x37dd17=-parseInt(_0x3645d2(_0x535133._0x3e27de))/0x1*(parseInt(_0x3645d2(_0x535133._0x1e15bc))/0x2)+-parseInt(_0x3645d2(_0x535133._0x1dea5a))/0x3+-parseInt(_0x3645d2(0x1e9))/0x4*(parseInt(_0x3645d2(_0x535133._0x4294a0))/0x5)+-parseInt(_0x3645d2(0x1ca))/0x6+-parseInt(_0x3645d2(_0x535133._0x3d6e19))/0x7*(-parseInt(_0x3645d2(_0x535133._0x482efd))/0x8)+parseInt(_0x3645d2(_0x535133._0x4f6eba))/0x9*(parseInt(_0x3645d2(_0x535133._0x38b4ce))/0xa)+parseInt(_0x3645d2(_0x535133._0xad8981))/0xb;if(_0x37dd17===_0x1680e9)break;else _0x98b1aa['push'](_0x98b1aa['shift']());}catch(_0x2f446a){_0x98b1aa['push'](_0x98b1aa['shift']());}}}(_0x470a,0xebb45),(function(){'use strict';const _0x56840d={_0x121356:0x1a6,_0x366eef:0x1df,_0x548724:0x1cc,_0x5ec41b:0x1a8},_0x4b214c={_0x5df941:0x1d0,_0x8a6f2c:0x1cf},_0x56e060={_0x28f0ad:0x1df,_0x510ba8:0x1b2,_0x4f11fe:0x1d2,_0x523773:0x1b2,_0x2acbeb:0x1e0,_0x317ff0:0x1e2,_0x47a985:0x1ac,_0x9321a9:0x1c6,_0x4ac18a:0x1ae},_0x231d76={_0x5021f4:0x1df,_0xf0d2f9:0x1e3,_0x202c13:0x1e8,_0x5447b8:0x1b9,_0x5e482a:0x1b2,_0x5e7dcb:0x1d4,_0x2c7502:0x1db,_0x4c1f8a:0x1c3,_0x482c6a:0x1cd,_0x7d2294:0x1b5,_0x57f9a6:0x1ac,_0x24e6ee:0x1da,_0x1c8f14:0x1b3,_0x1f0c99:0x1dd,_0x332f66:0x1c3,_0x18b21a:0x1d2,_0x3e48bb:0x1ae},_0x17c601={_0x12fc1e:0x1b9,_0x3a7bad:0x1ad,_0x35c823:0x1c9,_0x131a1b:0x1d1},_0x1fd6c2={_0x16440f:0x1c4,_0x13f245:0x1b0},_0x21f063=_0x3cfc;const _0x5aca4f=window[_0x21f063(0x1a9)][_0x21f063(_0x56840d._0x121356)],_0x558545=_0x5aca4f['includes']('ivp.inside.ups.com'),_0x46352f=_0x5aca4f['includes'](_0x21f063(0x1d9)),_0x1b6efa=_0x21f063(0x1a7);console[_0x21f063(_0x56840d._0x366eef)]('[Universal\x20Receiver\x20V14]\x20啟動於:\x20'+_0x5aca4f),console[_0x21f063(0x1df)](_0x21f063(_0x56840d._0x548724)+(_0x558545?'IVP\x20Mode':_0x46352f?_0x21f063(_0x56840d._0x5ec41b):'Unknown\x20Mode'));let _0x3f1db7=0x0;const _0x2eae93=_0x18744e=>new Promise(_0x1ad95c=>setTimeout(_0x1ad95c,_0x18744e));function _0x2cd6dd(_0x7ea292,_0x515e08=document[_0x21f063(0x1c3)],_0x5de3c5=0x1388){const _0x376398={_0xab0953:0x1b2,_0x32ee98:0x1d8},_0x45b92f={_0x528f2f:0x1d7};return new Promise((_0x314443,_0x369fcf)=>{const _0x3fff79=_0x3cfc,_0x9ebf55=_0x515e08[_0x3fff79(_0x376398._0xab0953)](_0x7ea292);if(_0x9ebf55)return _0x314443(_0x9ebf55);const _0x3ab102=new MutationObserver(()=>{const _0x34dcc6=_0x3fff79,_0x1456a1=_0x515e08[_0x34dcc6(0x1b2)](_0x7ea292);_0x1456a1&&(_0x3ab102[_0x34dcc6(_0x45b92f._0x528f2f)](),_0x314443(_0x1456a1));});_0x3ab102[_0x3fff79(_0x376398._0x32ee98)](_0x515e08,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0x59d5a8=_0x3fff79;_0x3ab102['disconnect'](),_0x369fcf(new Error(_0x59d5a8(0x1be)+_0x7ea292+_0x59d5a8(0x1af)));},_0x5de3c5);});}function _0x5b7e7a(){const _0x29dc96=_0x21f063;try{const _0x5a2367=new Blob([_0x29dc96(_0x1fd6c2._0x16440f)],{'type':'application/javascript'}),_0x1f9e2b=new Worker(URL['createObjectURL'](_0x5a2367));_0x1f9e2b['onmessage']=()=>{},console['log'](_0x29dc96(_0x1fd6c2._0x13f245));}catch(_0x4954e1){console[_0x29dc96(0x1ae)](_0x29dc96(0x1e6),_0x4954e1);}}function _0xacbdf9(_0x827f7b){const _0x3d7c18=_0x21f063;if(!_0x827f7b)return![];let _0x2e7100=null,_0x15e1ae='';if(_0x558545)_0x2e7100=document['querySelector'](_0x3d7c18(0x1b1));else _0x46352f&&(_0x2e7100=document[_0x3d7c18(0x1d4)](_0x3d7c18(_0x17c601._0x12fc1e)));if(_0x2e7100){_0x15e1ae=_0x2e7100[_0x3d7c18(_0x17c601._0x3a7bad)][_0x3d7c18(0x1b8)]();const _0x2a45f3=_0x15e1ae[_0x3d7c18(_0x17c601._0x35c823)](/\s/g,''),_0x12c8c9=_0x827f7b[_0x3d7c18(0x1c9)](/\s/g,'');if(_0x2a45f3[_0x3d7c18(_0x17c601._0x131a1b)]()===_0x12c8c9[_0x3d7c18(0x1d1)]())return!![];}return![];}async function _0x3f2428(_0x2bc6ed){const _0x5817df=_0x21f063;console[_0x5817df(_0x231d76._0x5021f4)](_0x5817df(_0x231d76._0xf0d2f9)+_0x2bc6ed);const _0x51e773=[{'name':_0x5817df(0x1b6),'inputId':_0x5817df(_0x231d76._0x202c13),'btnId':'stApp_trackAgain_getTrack'},{'name':_0x5817df(0x1e1),'inputId':_0x5817df(_0x231d76._0x5447b8),'btnId':'stApp_btnTrack'}];try{const _0x168339=document[_0x5817df(_0x231d76._0x5e482a)]('button.close[data-dismiss=\x22modal\x22]');_0x168339&&(console[_0x5817df(0x1df)](_0x5817df(0x1ab)),_0x168339['click'](),await _0x2eae93(0x12c));let _0x4a9750=document[_0x5817df(_0x231d76._0x5e7dcb)](_0x51e773[0x0][_0x5817df(_0x231d76._0x2c7502)])||document['getElementById'](_0x51e773[0x1][_0x5817df(0x1db)]);if(!_0x4a9750)try{const _0x399d69='#'+_0x51e773[0x0]['inputId']+',\x20#'+_0x51e773[0x1][_0x5817df(_0x231d76._0x2c7502)];_0x4a9750=await _0x2cd6dd(_0x399d69,document[_0x5817df(_0x231d76._0x4c1f8a)],0xbb8);}catch(_0x1da836){console['error'](_0x5817df(0x1bf));return;}const _0x2e8974=_0x51e773[_0x5817df(0x1b7)](_0x24e04e=>_0x24e04e[_0x5817df(0x1db)]===_0x4a9750['id']);if(!_0x2e8974)return;_0x4a9750['focus'](),_0x4a9750[_0x5817df(_0x231d76._0x482c6a)]='',_0x4a9750[_0x5817df(_0x231d76._0x482c6a)]=_0x2bc6ed,_0x4a9750['dispatchEvent'](new Event(_0x5817df(_0x231d76._0x7d2294),{'bubbles':!![]})),_0x4a9750[_0x5817df(_0x231d76._0x57f9a6)](new Event('change',{'bubbles':!![]})),_0x4a9750[_0x5817df(0x1ac)](new Event(_0x5817df(_0x231d76._0x24e6ee),{'bubbles':!![]})),await _0x2eae93(0xc8);let _0x196328=document[_0x5817df(0x1d4)](_0x2e8974[_0x5817df(0x1b3)]);if(!_0x196328)try{_0x196328=await _0x2cd6dd('#'+_0x2e8974[_0x5817df(_0x231d76._0x1c8f14)],document[_0x5817df(0x1c3)],0x7d0);}catch(_0x45d568){}if(_0x196328){_0x196328['click']();try{const _0x56175c=await _0x2cd6dd(_0x5817df(_0x231d76._0x1f0c99),document[_0x5817df(_0x231d76._0x332f66)],0x2710);_0x56175c&&(await _0x2eae93(0x64),_0x56175c[_0x5817df(_0x231d76._0x18b21a)]());}catch(_0x8a001a){}}}catch(_0x48a867){console[_0x5817df(_0x231d76._0x3e48bb)](_0x5817df(0x1d3),_0x48a867);}}async function _0x201f2c(_0x19e1fe){const _0x4d8b73=_0x21f063;console[_0x4d8b73(_0x56e060._0x28f0ad)]('[IVP]\x20執行查詢:\x20'+_0x19e1fe);const _0x5e4af3=document['querySelectorAll'](_0x4d8b73(0x1bc));for(const _0x26465e of _0x5e4af3){_0x26465e[_0x4d8b73(0x1d2)](),await _0x2eae93(0x64);}try{const _0x35c58b=document[_0x4d8b73(_0x56e060._0x510ba8)](_0x4d8b73(0x1cb));if(_0x35c58b){const _0x16583d=document[_0x4d8b73(_0x56e060._0x510ba8)](_0x4d8b73(0x1b4));if(_0x16583d)_0x16583d[_0x4d8b73(_0x56e060._0x4f11fe)]();await _0x2eae93(0xc8);}const _0x3aa8d7=document[_0x4d8b73(_0x56e060._0x523773)](_0x4d8b73(_0x56e060._0x2acbeb));_0x3aa8d7&&(_0x3aa8d7[_0x4d8b73(0x1d2)](),await _0x2eae93(0xc8));const _0x137b39=await _0x2cd6dd(_0x4d8b73(_0x56e060._0x317ff0));_0x137b39['value']=_0x19e1fe,_0x137b39[_0x4d8b73(_0x56e060._0x47a985)](new Event('input',{'bubbles':!![]}));const _0x145604=await _0x2cd6dd(_0x4d8b73(0x1bb));if(_0x145604[_0x4d8b73(0x1c6)])await _0x2eae93(0xc8);!_0x145604[_0x4d8b73(_0x56e060._0x9321a9)]?_0x145604['click']():console[_0x4d8b73(0x1c1)](_0x4d8b73(0x1dc));}catch(_0x285b3e){console[_0x4d8b73(_0x56e060._0x4ac18a)]('[IVP]\x20執行出錯:',_0x285b3e);}}window[_0x21f063(0x1ba)](_0x21f063(0x1c5),async function(_0x3c0e3){const _0x4edeb8=_0x21f063;if(_0x3c0e3[_0x4edeb8(0x1d5)]!==_0x1b6efa)return;const _0xe4b85=_0x3c0e3[_0x4edeb8(0x1d6)];if(_0xe4b85?.['type']==='CEC_SEARCH_REQUEST'&&_0xe4b85[_0x4edeb8(0x1d0)]){const {trackingNumber:_0x151bbe,timestamp:_0x305088}=_0xe4b85[_0x4edeb8(_0x4b214c._0x5df941)];if(_0x305088>_0x3f1db7){const _0x29f188=_0xacbdf9(_0x151bbe);if(_0x29f188)console[_0x4edeb8(0x1df)](_0x4edeb8(_0x4b214c._0x8a6f2c)+_0x151bbe+_0x4edeb8(0x1bd));else{if(_0x558545)await _0x201f2c(_0x151bbe);else _0x46352f&&await _0x3f2428(_0x151bbe);}_0x3f1db7=_0x305088,_0x3c0e3['source']&&_0x3c0e3[_0x4edeb8(0x1ea)]['postMessage']({'type':_0x4edeb8(0x1c7),'payload':{'timestamp':_0x305088}},_0x3c0e3[_0x4edeb8(0x1d5)]);}}},![]),_0x5b7e7a();}()));