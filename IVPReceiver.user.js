// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V21
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。修復後台UPS官網因自身腳本崩潰導致按鈕無法點擊的問題(V21: 強制解鎖模式)。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// @downloadURL  https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// ==/UserScript==

(function(_0x573a80,_0x1155ce){const _0x525d49={_0xe793f:0x1c0,_0x4326ba:0x17f,_0x475fae:0x186},_0x18f961=_0x218a,_0xda2e5c=_0x573a80();while(!![]){try{const _0xb26b10=-parseInt(_0x18f961(0x1a9))/0x1*(-parseInt(_0x18f961(0x180))/0x2)+parseInt(_0x18f961(_0x525d49._0xe793f))/0x3+parseInt(_0x18f961(0x19d))/0x4*(parseInt(_0x18f961(0x177))/0x5)+-parseInt(_0x18f961(0x1b2))/0x6+-parseInt(_0x18f961(0x1a7))/0x7+-parseInt(_0x18f961(0x1a8))/0x8*(parseInt(_0x18f961(_0x525d49._0x4326ba))/0x9)+-parseInt(_0x18f961(_0x525d49._0x475fae))/0xa*(parseInt(_0x18f961(0x182))/0xb);if(_0xb26b10===_0x1155ce)break;else _0xda2e5c['push'](_0xda2e5c['shift']());}catch(_0x3c1757){_0xda2e5c['push'](_0xda2e5c['shift']());}}}(_0x4410,0x48919),(function(){'use strict';const _0x1d0ff0={_0x291f88:0x19b,_0xa69855:0x1ad},_0x5b01b5={_0xe9dcd2:0x1b3,_0x1620c1:0x191,_0x2f1924:0x1ba,_0x38c1fa:0x195,_0x3eb4f1:0x195,_0x13a632:0x19a},_0x20e2ac={_0x441d2a:0x1b5,_0x585cec:0x183,_0x5cb884:0x1b9,_0x3ce2bb:0x1c2,_0x1d3557:0x1ab,_0x343595:0x198,_0x4167a6:0x1a4,_0x301393:0x1aa},_0x500f3e={_0x52f988:0x1ac,_0x30257f:0x183,_0x4a2f0:0x1b9,_0x58581f:0x184,_0x3b0b46:0x193,_0x134166:0x18d,_0xbc7817:0x178,_0x248d42:0x19c,_0xed69c4:0x198},_0x2930c5={_0x534ed4:0x1c2,_0x13e493:0x1c1,_0x237d8a:0x184,_0x888404:0x1a0,_0x227832:0x181},_0x14cebf={_0x149728:0x192,_0x5142ad:0x179,_0x39bba7:0x175,_0x54f488:0x185},_0x414c42={_0x53aa18:0x1bf,_0x490f2f:0x17b,_0x57f6c6:0x189,_0x5c1236:0x18b,_0x4c196f:0x1a2},_0x557a2f={_0x750f26:0x190,_0x570f0b:0x19e,_0x3e0fe3:0x199,_0x1e577e:0x1b4,_0x245a15:0x1a3,_0x34fd1b:0x197,_0x4bedbe:0x1a3,_0x22de61:0x18a,_0x1ce18e:0x1b7},_0x5cc3a5=_0x218a;const _0x4b25f4=window[_0x5cc3a5(0x19f)][_0x5cc3a5(0x194)],_0x2e2cf7=_0x4b25f4[_0x5cc3a5(_0x1d0ff0._0x291f88)](_0x5cc3a5(_0x1d0ff0._0xa69855)),_0x42faf5=_0x4b25f4[_0x5cc3a5(0x19b)](_0x5cc3a5(0x1a1)),_0x1cfb27='https://upsdrive.lightning.force.com';console[_0x5cc3a5(0x1ac)](_0x5cc3a5(0x187)+_0x4b25f4+_0x5cc3a5(0x176));let _0x59f10e=0x0;const _0x17be19=_0x7195a1=>new Promise(_0x205c1b=>setTimeout(_0x205c1b,_0x7195a1));function _0x2324e6(_0xda0899,_0xea158c=document[_0x5cc3a5(0x178)],_0x259acb=0x1388){const _0xf7d814={_0x5e7dcf:0x196};return new Promise((_0x1e286c,_0x1fd0d2)=>{const _0x22d869=_0x218a,_0x2ae6ff=_0xea158c[_0x22d869(0x1c2)](_0xda0899);if(_0x2ae6ff)return _0x1e286c(_0x2ae6ff);const _0x1afcf5=new MutationObserver(()=>{const _0x1d30e8=_0x22d869,_0x3fb7d1=_0xea158c['querySelector'](_0xda0899);_0x3fb7d1&&(_0x1afcf5[_0x1d30e8(0x17e)](),_0x1e286c(_0x3fb7d1));});_0x1afcf5[_0x22d869(_0xf7d814._0x5e7dcf)](_0xea158c,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0xe49c91=_0x22d869;_0x1afcf5[_0xe49c91(0x17e)](),_0x1fd0d2(new Error(_0xe49c91(0x1ae)+_0xda0899+'\x22\x20超時'));},_0x259acb);});}function _0x492348(_0x4d527,_0x19f8eb){const _0x4f258a=_0x5cc3a5;if(!_0x4d527)return;const _0x4a94dc=document[_0x4f258a(0x1b9)];if(!_0x4a94dc)try{_0x4d527[_0x4f258a(_0x557a2f._0x750f26)]();}catch(_0xb14308){}try{const _0x15a6a1=Object[_0x4f258a(0x1a5)](window['HTMLInputElement']['prototype'],_0x4f258a(0x1b4))[_0x4f258a(_0x557a2f._0x570f0b)];_0x15a6a1[_0x4f258a(_0x557a2f._0x3e0fe3)](_0x4d527,_0x19f8eb);}catch(_0x152bd1){_0x4d527[_0x4f258a(_0x557a2f._0x1e577e)]=_0x19f8eb;}if(_0x4d527[_0x4f258a(0x1b4)]!==_0x19f8eb)_0x4d527[_0x4f258a(0x1b4)]=_0x19f8eb;if(_0x4a94dc)_0x4d527[_0x4f258a(_0x557a2f._0x245a15)](new Event(_0x4f258a(_0x557a2f._0x34fd1b),{'bubbles':!![]})),_0x4d527['dispatchEvent'](new Event(_0x4f258a(0x18f),{'bubbles':!![]})),_0x4d527[_0x4f258a(_0x557a2f._0x4bedbe)](new Event(_0x4f258a(0x1b7),{'bubbles':!![]}));else{const _0x54fe73=[new KeyboardEvent('keydown',{'bubbles':!![],'key':'Process'}),new KeyboardEvent(_0x4f258a(_0x557a2f._0x22de61),{'bubbles':!![],'key':'Process'}),new Event(_0x4f258a(0x197),{'bubbles':!![]}),new Event(_0x4f258a(0x18f),{'bubbles':!![]}),new KeyboardEvent(_0x4f258a(0x1a6),{'bubbles':!![],'key':'Process'}),new Event(_0x4f258a(_0x557a2f._0x1ce18e),{'bubbles':!![]})];_0x54fe73['forEach'](_0x4b332e=>_0x4d527['dispatchEvent'](_0x4b332e));}}function _0x28c6ac(_0x48b32b){const _0x126354=_0x5cc3a5;if(!_0x48b32b)return;_0x48b32b[_0x126354(0x1bd)]('disabled'),_0x48b32b['classList'][_0x126354(0x1be)](_0x126354(0x1c3)),_0x48b32b[_0x126354(_0x414c42._0x53aa18)](_0x126354(_0x414c42._0x490f2f),'false'),_0x48b32b[_0x126354(_0x414c42._0x57f6c6)][_0x126354(_0x414c42._0x5c1236)]=_0x126354(_0x414c42._0x4c196f),_0x48b32b['click']();}function _0x24baa4(){const _0x4e039b=_0x5cc3a5;try{const _0x4afdec=new Blob([_0x4e039b(_0x14cebf._0x149728)],{'type':_0x4e039b(_0x14cebf._0x5142ad)}),_0x26f984=new Worker(URL[_0x4e039b(0x1bb)](_0x4afdec));_0x26f984[_0x4e039b(_0x14cebf._0x39bba7)]=()=>{};}catch(_0x1c6156){console[_0x4e039b(_0x14cebf._0x54f488)]('[KeepAlive]\x20Error:',_0x1c6156);}}function _0xc07065(_0x44437b){const _0x26a6c8=_0x5cc3a5;if(!_0x44437b)return![];let _0x5b5079=null;if(_0x2e2cf7)_0x5b5079=document[_0x26a6c8(_0x2930c5._0x534ed4)](_0x26a6c8(_0x2930c5._0x13e493));else{if(_0x42faf5)_0x5b5079=document['getElementById'](_0x26a6c8(_0x2930c5._0x237d8a));}if(_0x5b5079){const _0x5558dc=_0x5b5079[_0x26a6c8(0x17a)][_0x26a6c8(_0x2930c5._0x888404)]()['replace'](/\s/g,''),_0x42cba1=_0x44437b['replace'](/\s/g,'');if(_0x5558dc[_0x26a6c8(0x181)]()===_0x42cba1[_0x26a6c8(_0x2930c5._0x227832)]())return!![];}return![];}async function _0x20ed1d(_0x2c6b43){const _0x4ac92b=_0x5cc3a5;console[_0x4ac92b(_0x500f3e._0x52f988)](_0x4ac92b(0x1b8)+_0x2c6b43+_0x4ac92b(_0x500f3e._0x30257f)+document[_0x4ac92b(_0x500f3e._0x4a2f0)]+')');const _0x507ebd=[{'name':_0x4ac92b(0x1bc),'inputId':'stApp_trackAgain_trackingNumEntry','btnId':'stApp_trackAgain_getTrack'},{'name':'Main\x20Track\x20(Center)','inputId':_0x4ac92b(_0x500f3e._0x58581f),'btnId':_0x4ac92b(0x17d)}];try{const _0x30869e=document[_0x4ac92b(0x1c2)](_0x4ac92b(0x18e));_0x30869e&&(_0x30869e['click'](),await _0x17be19(0x12c));let _0x2cc647=document[_0x4ac92b(0x193)](_0x507ebd[0x0]['inputId'])||document[_0x4ac92b(_0x500f3e._0x3b0b46)](_0x507ebd[0x1]['inputId']);if(!_0x2cc647)try{const _0xf8f3a3='#'+_0x507ebd[0x0]['inputId']+',\x20#'+_0x507ebd[0x1][_0x4ac92b(0x18c)];_0x2cc647=await _0x2324e6(_0xf8f3a3,document['body'],0xbb8);}catch(_0x26ddc3){return;}const _0x9a3899=_0x507ebd['find'](_0x2284b7=>_0x2284b7[_0x4ac92b(0x18c)]===_0x2cc647['id']);if(!_0x9a3899)return;_0x492348(_0x2cc647,_0x2c6b43),await _0x17be19(0x1f4);let _0x1e7444=document['getElementById'](_0x9a3899[_0x4ac92b(0x18d)]);if(!_0x1e7444)try{_0x1e7444=await _0x2324e6('#'+_0x9a3899[_0x4ac92b(_0x500f3e._0x134166)],document[_0x4ac92b(_0x500f3e._0xbc7817)],0x7d0);}catch(_0x2e8b17){}if(_0x1e7444){console[_0x4ac92b(0x1ac)](_0x4ac92b(_0x500f3e._0x248d42)),_0x28c6ac(_0x1e7444),await _0x17be19(0x1f4),_0x28c6ac(_0x1e7444);try{const _0x1dd81a=await _0x2324e6('#st_App_View_Details',document['body'],0x1f40);_0x1dd81a&&(await _0x17be19(0xc8),_0x1dd81a[_0x4ac92b(_0x500f3e._0xed69c4)]());}catch(_0x22c58d){}}}catch(_0x203aff){console[_0x4ac92b(0x185)]('[UPS\x20Web]\x20執行出錯:',_0x203aff);}}async function _0x3910e7(_0x9dc39a){const _0x3a41e7=_0x5cc3a5;console[_0x3a41e7(0x1ac)](_0x3a41e7(_0x20e2ac._0x441d2a)+_0x9dc39a+_0x3a41e7(_0x20e2ac._0x585cec)+document[_0x3a41e7(_0x20e2ac._0x5cb884)]+')');const _0x2868fa=document[_0x3a41e7(0x1af)](_0x3a41e7(0x1b6));for(const _0x36bd65 of _0x2868fa){_0x36bd65[_0x3a41e7(0x198)](),await _0x17be19(0x64);}try{const _0x3da0d7=document[_0x3a41e7(0x1c2)]('#mainContainer\x20>\x20app-tracking\x20>\x20div\x20>\x20div\x20>\x20div.container-fluid.d-none');if(_0x3da0d7){const _0x477886=document[_0x3a41e7(_0x20e2ac._0x3ce2bb)](_0x3a41e7(_0x20e2ac._0x1d3557));if(_0x477886)_0x477886[_0x3a41e7(_0x20e2ac._0x343595)]();await _0x17be19(0x12c);}const _0x424254=document[_0x3a41e7(0x1c2)](_0x3a41e7(_0x20e2ac._0x4167a6));_0x424254&&(_0x424254[_0x3a41e7(0x198)](),await _0x17be19(0x12c));const _0x7062c9=await _0x2324e6(_0x3a41e7(0x1b0));_0x492348(_0x7062c9,_0x9dc39a);const _0x1dee05=await _0x2324e6(_0x3a41e7(0x1c4));let _0x54cfa3=0x0;while(_0x1dee05[_0x3a41e7(0x1c3)]&&_0x54cfa3<0x5){await _0x17be19(0xc8),_0x54cfa3++;if(_0x54cfa3%0x2===0x0)_0x492348(_0x7062c9,_0x9dc39a);}_0x28c6ac(_0x1dee05);}catch(_0x3a131b){console['error'](_0x3a41e7(_0x20e2ac._0x301393),_0x3a131b);}}window[_0x5cc3a5(0x17c)]('message',async function(_0x2920d9){const _0x1bf5c6=_0x5cc3a5;if(_0x2920d9[_0x1bf5c6(0x188)]!==_0x1cfb27)return;const _0x40e6ed=_0x2920d9['data'];if(_0x40e6ed?.['type']===_0x1bf5c6(_0x5b01b5._0xe9dcd2)&&_0x40e6ed[_0x1bf5c6(_0x5b01b5._0x1620c1)]){const {trackingNumber:_0x1ba883,timestamp:_0x1ac7d8}=_0x40e6ed['payload'];if(_0x1ac7d8>_0x59f10e){const _0x54f834=_0xc07065(_0x1ba883);if(_0x54f834)console[_0x1bf5c6(0x1ac)](_0x1bf5c6(0x1b1)+_0x1ba883+_0x1bf5c6(_0x5b01b5._0x2f1924));else{if(_0x2e2cf7)await _0x3910e7(_0x1ba883);else{if(_0x42faf5)await _0x20ed1d(_0x1ba883);}}_0x59f10e=_0x1ac7d8,_0x2920d9[_0x1bf5c6(_0x5b01b5._0x38c1fa)]&&_0x2920d9[_0x1bf5c6(_0x5b01b5._0x3eb4f1)][_0x1bf5c6(0x174)]({'type':_0x1bf5c6(_0x5b01b5._0x13a632),'payload':{'timestamp':_0x1ac7d8}},_0x2920d9['origin']);}}},![]),_0x24baa4();}()));function _0x218a(_0x2aae1d,_0x1e262d){const _0x44102c=_0x4410();return _0x218a=function(_0x218a94,_0x3340f5){_0x218a94=_0x218a94-0x174;let _0x31fe50=_0x44102c[_0x218a94];if(_0x218a['qYelzm']===undefined){var _0x5027f8=function(_0x4b25f4){const _0x2e2cf7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x42faf5='',_0x1cfb27='';for(let _0x59f10e=0x0,_0x17be19,_0x2324e6,_0x492348=0x0;_0x2324e6=_0x4b25f4['charAt'](_0x492348++);~_0x2324e6&&(_0x17be19=_0x59f10e%0x4?_0x17be19*0x40+_0x2324e6:_0x2324e6,_0x59f10e++%0x4)?_0x42faf5+=String['fromCharCode'](0xff&_0x17be19>>(-0x2*_0x59f10e&0x6)):0x0){_0x2324e6=_0x2e2cf7['indexOf'](_0x2324e6);}for(let _0x28c6ac=0x0,_0x24baa4=_0x42faf5['length'];_0x28c6ac<_0x24baa4;_0x28c6ac++){_0x1cfb27+='%'+('00'+_0x42faf5['charCodeAt'](_0x28c6ac)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1cfb27);};_0x218a['WuIaAY']=_0x5027f8,_0x2aae1d=arguments,_0x218a['qYelzm']=!![];}const _0x3c5684=_0x44102c[0x0],_0x4c0c03=_0x218a94+_0x3c5684,_0xb0d375=_0x2aae1d[_0x4c0c03];return!_0xb0d375?(_0x31fe50=_0x218a['WuIaAY'](_0x31fe50),_0x2aae1d[_0x4c0c03]=_0x31fe50):_0x31fe50=_0xb0d375,_0x31fe50;},_0x218a(_0x2aae1d,_0x1e262d);}function _0x4410(){const _0x304980=['DxbZlMnVBq','mNb4ihnVBgLKihjLza','zgLZCgf0y2HfDMvUDa','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLTHCMLHlwXHyMvSpsjdBgvHCIjD','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','A2v5Dxa','mZGYmde5nej5uwz5sa','mtaYmZi4tKzmDMjI','n2TJtLHRAq','w0Lwuf0G5z+36kgm5yE66yYVoG','i3rVz2DSzs12AxnPyMLSAxr5id4GyNv0Dg9U','Bg9N','AxzWlMLUC2LKzs51ChmUy29T','562j5B6f5ywd57sGici','CxvLCNLtzwXLy3rVCKfSBa','Aw5WDxrBAwq9iKvUDgvYifrYywnRAw5Nie51BwjLCIjD','w1jLy2vPDMvYxsdPOihPNAlLT7lPOA/NPlROMz/NORWG','ntu3mJKYBMD1r3Lm','q0vdx1nfqvjdsf9srvfvrvnu','DMfSDwu','w0Lwuf0G5z+36kgm5P+L6kMIoIa','zgL2lMnKAY1VDMvYBgf5lxbHBMuGBgK6AgfZkgvTlMzHlxrPBwvZkq','yMX1CG','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','AgLKzgvU','77Ym6lEZ6ygo5P+L6kMI44cc','y3jLyxrLt2jQzwn0vvjm','vhjHy2SGqwDHAw4GkfrVCcK','CMvTB3zLqxr0CMLIDxrL','CMvTB3zL','C2v0qxr0CMLIDxrL','mty1ndu0mLf6wvfuyq','AdyUAdz0CMfJA2LUzYbZCgfU','CxvLCNLtzwXLy3rVCG','zgLZywjSzwq','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLT0ExbLpsjZDwjTAxqIxq','Cg9ZDe1LC3nHz2u','B25TzxnZywDL','icJLVlFLIlBOP6pPJPBMQkhLVi8P','mty1uwLSDhPs','yM9KEq','yxbWBgLJyxrPB24VAMf2yxnJCMLWDa','Dgv4DenVBNrLBNq','yxjPys1KAxnHyMXLza','ywrKrxzLBNrmAxn0zw5LCG','C3rbChbFyNrUvhjHy2S','zgLZy29UBMvJDa','mZG3AM5eCwD0','mtyXodK0yLvkqNjX','Dg9mB3DLCKnHC2u','mtaWnZCXy0jxsM5n','icHiAwrKzw46ia','C3rbChbFDhjHy2TPBMDoDw1Izxi','zxjYB3i','mtKWwMzPtxr4','w1vUAxzLCNnHBcbszwnLAxzLCIbwmJfDiowvN+wlLEAwVdOG','B3jPz2LU','C3r5Bgu','A2v5ChjLC3m','yM9YzgvY','Aw5WDxrjza','yNrUswq','yNv0Dg9UlMnSB3nLw2rHDgeTzgLZBwLZCZ0IBw9KywWIxq','y2HHBMDL','zM9JDxm','Cgf5Bg9Hza','C2v0sw50zxj2ywWOkcKGpt4GC2vSzI5WB3n0twvZC2fNzsGNDgLJAYCPlcaYntaPoW','z2v0rwXLBwvUDej5swq','Ag9ZDg5HBwu','C291CMnL','B2jZzxj2zq','Aw5WDxq','y2XPy2S','y2fSBa','q0vdx1jfuvvfu1rFuKvdruLwruq','Aw5JBhvKzxm','w1vquYbxzwjDiowyL+IPPUw8T+wiTUM7NUAtII4UlG','nJu2nZjbB1bKzMm','C2v0','Bg9JyxrPB24','DhjPBq'];_0x4410=function(){return _0x304980;};return _0x4410();}