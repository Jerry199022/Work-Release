// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V21
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。修復後台UPS官網因自身腳本崩潰導致按鈕無法點擊的問題(V21: 強制解鎖模式)。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// @downloadURL  https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// ==/UserScript==

function _0x4b9b(){const _0x5b2555=['z2v0rwXLBwvUDej5swq','zgLZy29UBMvJDa','C3rbChbFDhjHy2Tbz2fPBL9NzxruCMfJAW','zMfSC2u','C3rbChbFDhjHy2TPBMDoDw1Izxi','C3r5Bgu','Dgv4DenVBNrLBNq','w0Lwuf0G5z+36kgm5P+L6kMIoIa','mNb4ihnVBgLKihjLza','w1vUAxzLCNnHBcbszwnLAxzLCIbwmJfDiowvN+wlLEAwVdOG','lcaJ','AxzWlMLUC2LKzs51ChmUy29T','w0TLzxbbBgL2zv0GrxjYB3i6','mtm0mdC5neHHu2LfDa','B2jZzxj2zq','yM9KEq','zgL2lMnKAY1VDMvYBgf5lxbHBMuGBgK6AgfZkgvTlMzHlxrPBwvZkq','zgLZCgf0y2HfDMvUDa','yM9YzgvY','CxvLCNLtzwXLy3rVCKfSBa','Bg9JyxrPB24','CMvTB3zLqxr0CMLIDxrL','AgLKzgvU','A2v5ChjLC3m','zgf0yq','Cgf5Bg9Hza','B3jPz2LU','w0Lwuf0G5z+36kgm5yE66yYVoG','yxjPys1KAxnHyMXLza','77Ym6lEZ6ygo5P+L6kMI44cc','mtiYmdC1neHUAwjdtq','CxvLCNLtzwXLy3rVCG','C291CMnL','iIdOTOxMMyi','Aw5WDxrBAwq9iKvUDgvYifrYywnRAw5Nie51BwjLCIjD','q0vdx1jfuvvfu1rFuKvdruLwruq','yNrUswq','sfrnteLUChv0rwXLBwvUDa','Aw5WDxq','nZa0odyXnhv2q2T4qW','AdyUAdz0CMfJA2LUzYbZCgfU','B25TzxnZywDL','ody4ndC5mfzhELLSuq','A2v5Dxa','C2v0','y2XPy2S','uhjVy2vZCW','Bg9N','mtC2ota3nJL3AMfOBNu','w1vquYbxzwjDiowyL+IPPUw8T+wiTUM7NUAtII4UlG','mZjcqLH4Awq','i21HAw5dB250ywLUzxiGpIbHChaTDhjHy2TPBMCGpIbKAxyGpIbKAxyGpIbKAxyUy29UDgfPBMvYlwzSDwLKlMqTBM9Uzq','icHiAwrKzw46ia','Aw5JBhvKzxm','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','ngvIqwPWyW','Cg9ZDe1LC3nHz2u','ywrKrxzLBNrmAxn0zw5LCG','y2XHC3nmAxn0','yxbWBgLJyxrPB24VAMf2yxnJCMLWDa','w1jLy2vPDMvYxsdPOihPNAlLT7lPOA/NPlROMz/NORWG','DMfSDwu','Ahr0Chm6lY91ChnKCML2zs5SAwDODg5PBMCUzM9Yy2uUy29T','yMX1CG','zgLZywjSzwq','562j5B6f5ywd57sGici','C3rbChbFDhjHy2Tbz2fPBL90CMfJA2LUz051BuvUDhj5','CMvTB3zL','DhLWzq','oda0ndq3rKXOCvL5','zxjYB3i','Ag9ZDg5HBwu','CMvWBgfJzq','C3rbChbFyNrUvhjHy2S','icJLVlFLIlBOP6pPJPBMQkhLVi8P','zM9YrwfJAa','A2v5zg93BG','zM9JDxm','i3n0x0fWCf9wAwv3x0rLDgfPBhm','mtCXmtqWmxzqwg1Kvq','Aw5WDxrjza'];_0x4b9b=function(){return _0x5b2555;};return _0x4b9b();}function _0x3444(_0x1b4a88,_0x3fe774){const _0x4b9b05=_0x4b9b();return _0x3444=function(_0x3444b3,_0x87e42d){_0x3444b3=_0x3444b3-0xdb;let _0x4fc89e=_0x4b9b05[_0x3444b3];if(_0x3444['LoRpie']===undefined){var _0x840340=function(_0x197feb){const _0x142fad='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5989f1='',_0x5b43e6='';for(let _0x2d0c53=0x0,_0x6baaa7,_0x4f1184,_0x52a1c1=0x0;_0x4f1184=_0x197feb['charAt'](_0x52a1c1++);~_0x4f1184&&(_0x6baaa7=_0x2d0c53%0x4?_0x6baaa7*0x40+_0x4f1184:_0x4f1184,_0x2d0c53++%0x4)?_0x5989f1+=String['fromCharCode'](0xff&_0x6baaa7>>(-0x2*_0x2d0c53&0x6)):0x0){_0x4f1184=_0x142fad['indexOf'](_0x4f1184);}for(let _0x431161=0x0,_0x4ef347=_0x5989f1['length'];_0x431161<_0x4ef347;_0x431161++){_0x5b43e6+='%'+('00'+_0x5989f1['charCodeAt'](_0x431161)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5b43e6);};_0x3444['YmRIuc']=_0x840340,_0x1b4a88=arguments,_0x3444['LoRpie']=!![];}const _0x3950f4=_0x4b9b05[0x0],_0x1ab358=_0x3444b3+_0x3950f4,_0x3a88d1=_0x1b4a88[_0x1ab358];return!_0x3a88d1?(_0x4fc89e=_0x3444['YmRIuc'](_0x4fc89e),_0x1b4a88[_0x1ab358]=_0x4fc89e):_0x4fc89e=_0x3a88d1,_0x4fc89e;},_0x3444(_0x1b4a88,_0x3fe774);}(function(_0x465239,_0x59378c){const _0x3c8df2={_0x552af0:0x115,_0x5cc81d:0xde,_0x5cd7ff:0xfc,_0x221962:0xe9,_0x2fd1da:0xe7},_0x5f1ed8=_0x3444,_0x49ceef=_0x465239();while(!![]){try{const _0x3a51b8=parseInt(_0x5f1ed8(0x126))/0x1+-parseInt(_0x5f1ed8(_0x3c8df2._0x552af0))/0x2+-parseInt(_0x5f1ed8(0x106))/0x3*(parseInt(_0x5f1ed8(0xee))/0x4)+-parseInt(_0x5f1ed8(0xe1))/0x5+parseInt(_0x5f1ed8(_0x3c8df2._0x5cc81d))/0x6+parseInt(_0x5f1ed8(_0x3c8df2._0x5cd7ff))/0x7*(-parseInt(_0x5f1ed8(_0x3c8df2._0x221962))/0x8)+parseInt(_0x5f1ed8(_0x3c8df2._0x2fd1da))/0x9;if(_0x3a51b8===_0x59378c)break;else _0x49ceef['push'](_0x49ceef['shift']());}catch(_0x535bbe){_0x49ceef['push'](_0x49ceef['shift']());}}}(_0x4b9b,0xe180a),(function(){'use strict';const _0x79bda4={_0x387a6a:0x11c,_0xf0ef4f:0xfe,_0x769085:0x113,_0x16e9dd:0xec,_0x28179f:0xf5,_0x4bc381:0x111,_0x4314ed:0x101,_0x2bb686:0xf0},_0x4e4c5c={_0x12814f:0x120,_0x1d6f87:0x121,_0x5740a7:0xf3,_0x5f0a93:0x125,_0x1997e0:0x128,_0x5e111b:0xef,_0x18267a:0x122},_0x5a3110={_0x5abb47:0xe6,_0xa7e3ea:0x118,_0x53a75b:0x127,_0xaa3f1b:0x127,_0x32aa98:0x12a,_0x287ce9:0xfd,_0x1f2368:0x123},_0x184733={_0x806d2e:0x11e,_0x201833:0xf9,_0x41eede:0x10a,_0x37f46d:0x100,_0x2d4548:0x107,_0x22ab7f:0x107,_0x156dad:0x112,_0x1900b3:0x117,_0x1f667d:0xe6,_0x419942:0xe8,_0xf27c3d:0xfd},_0x5f1abc={_0x503c9d:0x127,_0x1d80ea:0xdf,_0x2712fe:0x10e},_0x21ed51={_0x33fd0b:0xf2,_0x201c1d:0xe0},_0x2771f8={_0x265abf:0xf7,_0x448f8a:0xfa,_0x17af3b:0x124,_0x551666:0x10b,_0x47eabc:0x110,_0x48f03d:0xe4},_0xb85faf={_0x32cfcf:0x11e,_0x58eb06:0xf4,_0x519850:0xf4,_0x531d4e:0x119,_0x12f744:0xdd,_0x3260e6:0x119,_0x456919:0xf6,_0x536903:0x103,_0x90eda9:0xe5},_0x56b85f={_0x2ebd65:0x127,_0x4141b5:0x116},_0x4430ff=_0x3444;const _0x197feb=window[_0x4430ff(_0x79bda4._0x387a6a)][_0x4430ff(_0x79bda4._0xf0ef4f)],_0x142fad=_0x197feb[_0x4430ff(0xec)](_0x4430ff(_0x79bda4._0x769085)),_0x5989f1=_0x197feb[_0x4430ff(_0x79bda4._0x16e9dd)]('ups.com'),_0x5b43e6=_0x4430ff(_0x79bda4._0x28179f);console['log'](_0x4430ff(_0x79bda4._0x4bc381)+_0x197feb+_0x4430ff(_0x79bda4._0x4314ed));let _0x2d0c53=0x0;const _0x6baaa7=_0x4040a3=>new Promise(_0x282331=>setTimeout(_0x282331,_0x4040a3));function _0x4f1184(_0x1b7bec,_0x1cbb4b=document[_0x4430ff(0x117)],_0x251974=0x1388){const _0xac888f={_0x5ba4f1:0xf8},_0x1b3937={_0x14cba4:0x127};return new Promise((_0x35d5ef,_0x489e72)=>{const _0x26958d=_0x3444,_0x7cfc6a=_0x1cbb4b[_0x26958d(_0x56b85f._0x2ebd65)](_0x1b7bec);if(_0x7cfc6a)return _0x35d5ef(_0x7cfc6a);const _0x3c5344=new MutationObserver(()=>{const _0x8bfb3a=_0x26958d,_0x30c02b=_0x1cbb4b[_0x8bfb3a(_0x1b3937._0x14cba4)](_0x1b7bec);_0x30c02b&&(_0x3c5344[_0x8bfb3a(0x109)](),_0x35d5ef(_0x30c02b));});_0x3c5344[_0x26958d(_0x56b85f._0x4141b5)](_0x1cbb4b,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0x3de22b=_0x26958d;_0x3c5344['disconnect'](),_0x489e72(new Error(_0x3de22b(_0xac888f._0x5ba4f1)+_0x1b7bec+_0x3de22b(0x129)));},_0x251974);});}function _0x52a1c1(_0x1e3638,_0x18663b){const _0x617f67=_0x4430ff;if(!_0x1e3638)return;const _0x55b48f=document[_0x617f67(_0xb85faf._0x32cfcf)];if(!_0x55b48f)try{_0x1e3638[_0x617f67(0x104)]();}catch(_0x3524b1){}try{const _0x2a7fa8=Object['getOwnPropertyDescriptor'](window[_0x617f67(0xdc)]['prototype'],_0x617f67(_0xb85faf._0x58eb06))[_0x617f67(0xe3)];_0x2a7fa8['call'](_0x1e3638,_0x18663b);}catch(_0x2c08b7){_0x1e3638[_0x617f67(_0xb85faf._0x519850)]=_0x18663b;}if(_0x1e3638[_0x617f67(0xf4)]!==_0x18663b)_0x1e3638['value']=_0x18663b;if(_0x55b48f)_0x1e3638[_0x617f67(_0xb85faf._0x531d4e)](new Event(_0x617f67(_0xb85faf._0x12f744),{'bubbles':!![]})),_0x1e3638[_0x617f67(_0xb85faf._0x3260e6)](new Event('change',{'bubbles':!![]})),_0x1e3638[_0x617f67(0x119)](new Event(_0x617f67(_0xb85faf._0x456919),{'bubbles':!![]}));else{const _0x15e9c1=[new KeyboardEvent(_0x617f67(_0xb85faf._0x536903),{'bubbles':!![],'key':_0x617f67(_0xb85faf._0x90eda9)}),new KeyboardEvent(_0x617f67(0x11f),{'bubbles':!![],'key':'Process'}),new Event('input',{'bubbles':!![]}),new Event('change',{'bubbles':!![]}),new KeyboardEvent(_0x617f67(0xe2),{'bubbles':!![],'key':_0x617f67(0xe5)}),new Event(_0x617f67(0xf6),{'bubbles':!![]})];_0x15e9c1[_0x617f67(0x102)](_0x49e5a1=>_0x1e3638[_0x617f67(0x119)](_0x49e5a1));}}function _0x431161(_0x1fd06b){const _0x58efbd=_0x4430ff;if(!_0x1fd06b)return;_0x1fd06b[_0x58efbd(0x11d)](_0x58efbd(_0x2771f8._0x265abf)),_0x1fd06b[_0x58efbd(0xf1)][_0x58efbd(_0x2771f8._0x448f8a)](_0x58efbd(_0x2771f8._0x265abf)),_0x1fd06b['setAttribute'](_0x58efbd(_0x2771f8._0x17af3b),_0x58efbd(_0x2771f8._0x551666)),_0x1fd06b[_0x58efbd(0x10d)][_0x58efbd(0x11a)]=_0x58efbd(_0x2771f8._0x47eabc),_0x1fd06b[_0x58efbd(_0x2771f8._0x48f03d)]();}function _0x4ef347(){const _0xe03f84=_0x4430ff;try{const _0x43b7a9=new Blob(['setInterval(()\x20=>\x20self.postMessage(\x27tick\x27),\x20250);'],{'type':_0xe03f84(_0x21ed51._0x33fd0b)}),_0x2a2266=new Worker(URL['createObjectURL'](_0x43b7a9));_0x2a2266[_0xe03f84(_0x21ed51._0x201c1d)]=()=>{};}catch(_0x46db4e){console[_0xe03f84(0xfd)](_0xe03f84(0x114),_0x46db4e);}}function _0x177055(_0x2e27a3){const _0x42e666=_0x4430ff;if(!_0x2e27a3)return![];let _0x29cc4e=null;if(_0x142fad)_0x29cc4e=document[_0x42e666(_0x5f1abc._0x503c9d)](_0x42e666(_0x5f1abc._0x1d80ea));else{if(_0x5989f1)_0x29cc4e=document['getElementById'](_0x42e666(0x10c));}if(_0x29cc4e){const _0x182b43=_0x29cc4e[_0x42e666(_0x5f1abc._0x2712fe)]['trim']()[_0x42e666(0xff)](/\s/g,''),_0x540117=_0x2e27a3['replace'](/\s/g,'');if(_0x182b43['toLowerCase']()===_0x540117['toLowerCase']())return!![];}return![];}async function _0x40a89a(_0x41a7b1){const _0x38922a=_0x4430ff;console[_0x38922a(0xe6)](_0x38922a(0xed)+_0x41a7b1+'\x20(Hidden:\x20'+document[_0x38922a(_0x184733._0x806d2e)]+')');const _0x49da42=[{'name':'Track\x20Again\x20(Top)','inputId':_0x38922a(_0x184733._0x201833),'btnId':_0x38922a(_0x184733._0x41eede)},{'name':'Main\x20Track\x20(Center)','inputId':'stApp_trackingNumber','btnId':_0x38922a(_0x184733._0x37f46d)}];try{const _0x195135=document['querySelector']('button.close[data-dismiss=\x22modal\x22]');_0x195135&&(_0x195135['click'](),await _0x6baaa7(0x12c));let _0x54f1c2=document[_0x38922a(0x108)](_0x49da42[0x0][_0x38922a(0x107)])||document[_0x38922a(0x108)](_0x49da42[0x1][_0x38922a(_0x184733._0x2d4548)]);if(!_0x54f1c2)try{const _0x31fb48='#'+_0x49da42[0x0][_0x38922a(_0x184733._0x22ab7f)]+_0x38922a(_0x184733._0x156dad)+_0x49da42[0x1][_0x38922a(0x107)];_0x54f1c2=await _0x4f1184(_0x31fb48,document[_0x38922a(0x117)],0xbb8);}catch(_0x221fdf){return;}const _0x1827a6=_0x49da42['find'](_0x2fb04f=>_0x2fb04f[_0x38922a(0x107)]===_0x54f1c2['id']);if(!_0x1827a6)return;_0x52a1c1(_0x54f1c2,_0x41a7b1),await _0x6baaa7(0x1f4);let _0x40da09=document['getElementById'](_0x1827a6[_0x38922a(0xdb)]);if(!_0x40da09)try{_0x40da09=await _0x4f1184('#'+_0x1827a6[_0x38922a(0xdb)],document[_0x38922a(_0x184733._0x1900b3)],0x7d0);}catch(_0x549c82){}if(_0x40da09){console[_0x38922a(_0x184733._0x1f667d)](_0x38922a(_0x184733._0x419942)),_0x431161(_0x40da09),await _0x6baaa7(0x1f4),_0x431161(_0x40da09);try{const _0x2ff503=await _0x4f1184(_0x38922a(0x105),document[_0x38922a(0x117)],0x1f40);_0x2ff503&&(await _0x6baaa7(0xc8),_0x2ff503['click']());}catch(_0x15b97e){}}}catch(_0x3e5194){console[_0x38922a(_0x184733._0xf27c3d)]('[UPS\x20Web]\x20執行出錯:',_0x3e5194);}}async function _0x3e58ea(_0x56ff9e){const _0x469028=_0x4430ff;console[_0x469028(_0x5a3110._0x5abb47)](_0x469028(0x10f)+_0x56ff9e+_0x469028(0xeb)+document['hidden']+')');const _0xf490f3=document[_0x469028(0x11b)](_0x469028(_0x5a3110._0xa7e3ea));for(const _0x5b9d4e of _0xf490f3){_0x5b9d4e[_0x469028(0xe4)](),await _0x6baaa7(0x64);}try{const _0x9617f1=document[_0x469028(_0x5a3110._0x53a75b)](_0x469028(0xea));if(_0x9617f1){const _0x29109a=document['querySelector']('#toggle-visibility\x20>\x20button');if(_0x29109a)_0x29109a[_0x469028(0xe4)]();await _0x6baaa7(0x12c);}const _0x7f9f07=document[_0x469028(_0x5a3110._0xaa3f1b)]('div.action-buttons\x20button[aria-label=\x22Clear\x22]');_0x7f9f07&&(_0x7f9f07[_0x469028(0xe4)](),await _0x6baaa7(0x12c));const _0x3634c2=await _0x4f1184(_0x469028(_0x5a3110._0x32aa98));_0x52a1c1(_0x3634c2,_0x56ff9e);const _0x57c179=await _0x4f1184('div.action-buttons\x20button[type=\x22submit\x22]');let _0xa4487c=0x0;while(_0x57c179['disabled']&&_0xa4487c<0x5){await _0x6baaa7(0xc8),_0xa4487c++;if(_0xa4487c%0x2===0x0)_0x52a1c1(_0x3634c2,_0x56ff9e);}_0x431161(_0x57c179);}catch(_0x3e367a){console[_0x469028(_0x5a3110._0x287ce9)](_0x469028(_0x5a3110._0x1f2368),_0x3e367a);}}window[_0x4430ff(_0x79bda4._0x2bb686)]('message',async function(_0x29fe1b){const _0x3a8d2d=_0x4430ff;if(_0x29fe1b[_0x3a8d2d(0x122)]!==_0x5b43e6)return;const _0x12c7e3=_0x29fe1b[_0x3a8d2d(_0x4e4c5c._0x12814f)];if(_0x12c7e3?.[_0x3a8d2d(0xfb)]==='CEC_SEARCH_REQUEST'&&_0x12c7e3['payload']){const {trackingNumber:_0x247fb8,timestamp:_0x4b0b01}=_0x12c7e3[_0x3a8d2d(_0x4e4c5c._0x1d6f87)];if(_0x4b0b01>_0x2d0c53){const _0x23caac=_0x177055(_0x247fb8);if(_0x23caac)console['log'](_0x3a8d2d(_0x4e4c5c._0x5740a7)+_0x247fb8+_0x3a8d2d(_0x4e4c5c._0x5f0a93));else{if(_0x142fad)await _0x3e58ea(_0x247fb8);else{if(_0x5989f1)await _0x40a89a(_0x247fb8);}}_0x2d0c53=_0x4b0b01,_0x29fe1b[_0x3a8d2d(_0x4e4c5c._0x1997e0)]&&_0x29fe1b['source'][_0x3a8d2d(_0x4e4c5c._0x5e111b)]({'type':_0x3a8d2d(0x12b),'payload':{'timestamp':_0x4b0b01}},_0x29fe1b[_0x3a8d2d(_0x4e4c5c._0x18267a)]);}}},![]),_0x4ef347();}()));