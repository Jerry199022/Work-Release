// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V21
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。修復後台UPS官網因自身腳本崩潰導致按鈕無法點擊的問題(V21: 強制解鎖模式)。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// @downloadURL  https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// ==/UserScript==

function _0x1fd1(_0x1f5ed3,_0x51014a){const _0x432f0b=_0x432f();return _0x1fd1=function(_0x1fd167,_0xd84ba0){_0x1fd167=_0x1fd167-0x12c;let _0x1f4ced=_0x432f0b[_0x1fd167];if(_0x1fd1['ZTBhSp']===undefined){var _0x1bcba0=function(_0x2b084f){const _0x4ffb00='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1e202a='',_0x308df2='';for(let _0x5be383=0x0,_0x51ec3f,_0x2997a2,_0x1dad28=0x0;_0x2997a2=_0x2b084f['charAt'](_0x1dad28++);~_0x2997a2&&(_0x51ec3f=_0x5be383%0x4?_0x51ec3f*0x40+_0x2997a2:_0x2997a2,_0x5be383++%0x4)?_0x1e202a+=String['fromCharCode'](0xff&_0x51ec3f>>(-0x2*_0x5be383&0x6)):0x0){_0x2997a2=_0x4ffb00['indexOf'](_0x2997a2);}for(let _0x334eac=0x0,_0x3eeaa2=_0x1e202a['length'];_0x334eac<_0x3eeaa2;_0x334eac++){_0x308df2+='%'+('00'+_0x1e202a['charCodeAt'](_0x334eac)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x308df2);};_0x1fd1['WcVzBZ']=_0x1bcba0,_0x1f5ed3=arguments,_0x1fd1['ZTBhSp']=!![];}const _0x55a362=_0x432f0b[0x0],_0x315ef1=_0x1fd167+_0x55a362,_0x117419=_0x1f5ed3[_0x315ef1];return!_0x117419?(_0x1f4ced=_0x1fd1['WcVzBZ'](_0x1f4ced),_0x1f5ed3[_0x315ef1]=_0x1f4ced):_0x1f4ced=_0x117419,_0x1f4ced;},_0x1fd1(_0x1f5ed3,_0x51014a);}(function(_0x33b0c5,_0x3801a4){const _0x160832={_0x2c1ea9:0x171,_0x48c352:0x16b,_0xa297ad:0x14e,_0x381f8e:0x134,_0x16ee50:0x144,_0x321342:0x17a},_0x4551cd=_0x1fd1,_0x34cb8f=_0x33b0c5();while(!![]){try{const _0xd781dd=parseInt(_0x4551cd(0x136))/0x1+-parseInt(_0x4551cd(_0x160832._0x2c1ea9))/0x2*(-parseInt(_0x4551cd(_0x160832._0x48c352))/0x3)+parseInt(_0x4551cd(_0x160832._0xa297ad))/0x4*(parseInt(_0x4551cd(_0x160832._0x381f8e))/0x5)+-parseInt(_0x4551cd(0x131))/0x6*(parseInt(_0x4551cd(0x173))/0x7)+parseInt(_0x4551cd(_0x160832._0x16ee50))/0x8+parseInt(_0x4551cd(0x170))/0x9*(-parseInt(_0x4551cd(0x16d))/0xa)+-parseInt(_0x4551cd(_0x160832._0x321342))/0xb*(parseInt(_0x4551cd(0x167))/0xc);if(_0xd781dd===_0x3801a4)break;else _0x34cb8f['push'](_0x34cb8f['shift']());}catch(_0x122e01){_0x34cb8f['push'](_0x34cb8f['shift']());}}}(_0x432f,0x64ef1),(function(){'use strict';const _0x4e1712={_0x7e22ce:0x12f,_0x253dd9:0x149,_0x57c8e4:0x142,_0x4248c6:0x178,_0x2cf6ad:0x159,_0x30cda2:0x14b,_0x550eb6:0x169,_0x58bff9:0x130},_0x154812={_0x1dc7b3:0x13f,_0xae41e6:0x135},_0x575e6e={_0x2551b5:0x159,_0xe31fad:0x12e,_0x5dc125:0x17d,_0x3b9f57:0x138,_0xebd3d4:0x143},_0x5445a7={_0x31caaa:0x165,_0x19958b:0x133,_0x3c77a2:0x137,_0x160ad2:0x175,_0x2b8dfa:0x12c,_0x155504:0x177,_0xeebe11:0x139,_0x41670d:0x155,_0x43c2f0:0x159,_0x294a27:0x15b},_0x30e516={_0x1f42b1:0x175,_0x59bbef:0x150,_0x143510:0x161,_0x49fd0d:0x154},_0x57009a={_0x425651:0x13d,_0x1af4a7:0x17f,_0x1165c0:0x16a},_0x13b00b={_0x257e66:0x14f,_0x4744bb:0x158},_0x1de803={_0x218825:0x163,_0x1bf589:0x156,_0x5c3a5f:0x15f,_0x104370:0x157,_0x1d3435:0x15e,_0x3abcd1:0x13a,_0x2a4fec:0x17c,_0x4377be:0x179},_0x3f5d68=_0x1fd1;const _0x2b084f=window[_0x3f5d68(0x14d)][_0x3f5d68(_0x4e1712._0x7e22ce)],_0x4ffb00=_0x2b084f[_0x3f5d68(_0x4e1712._0x253dd9)](_0x3f5d68(_0x4e1712._0x57c8e4)),_0x1e202a=_0x2b084f[_0x3f5d68(0x149)](_0x3f5d68(_0x4e1712._0x4248c6)),_0x308df2=_0x3f5d68(0x17e);console[_0x3f5d68(_0x4e1712._0x2cf6ad)](_0x3f5d68(_0x4e1712._0x30cda2)+_0x2b084f+_0x3f5d68(_0x4e1712._0x550eb6));let _0x5be383=0x0;const _0x51ec3f=_0x3b8220=>new Promise(_0x3ffcf8=>setTimeout(_0x3ffcf8,_0x3b8220));function _0x2997a2(_0x3cdffa,_0x107c71=document[_0x3f5d68(0x177)],_0x5e2e3e=0x1388){const _0x1592f8={_0x247cfa:0x148},_0x5f1b04={_0xca1d15:0x143,_0x1f83a3:0x13c};return new Promise((_0x3dd5e6,_0x24e1a4)=>{const _0x325e45=_0x1fd1,_0x10809a=_0x107c71[_0x325e45(0x143)](_0x3cdffa);if(_0x10809a)return _0x3dd5e6(_0x10809a);const _0x4272d9=new MutationObserver(()=>{const _0x57b830=_0x325e45,_0x5d3671=_0x107c71[_0x57b830(_0x5f1b04._0xca1d15)](_0x3cdffa);_0x5d3671&&(_0x4272d9[_0x57b830(_0x5f1b04._0x1f83a3)](),_0x3dd5e6(_0x5d3671));});_0x4272d9[_0x325e45(_0x1592f8._0x247cfa)](_0x107c71,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0x79d7ad=_0x325e45;_0x4272d9['disconnect'](),_0x24e1a4(new Error('等待元素\x20\x22'+_0x3cdffa+_0x79d7ad(0x147)));},_0x5e2e3e);});}function _0x1dad28(_0x5cd550,_0x54679c){const _0x35357e=_0x3f5d68;if(!_0x5cd550)return;const _0x2806c8=document['hidden'];if(!_0x2806c8)try{_0x5cd550[_0x35357e(_0x1de803._0x218825)]();}catch(_0x2530c0){}try{const _0xa0992e=Object[_0x35357e(_0x1de803._0x1bf589)](window['HTMLInputElement'][_0x35357e(_0x1de803._0x5c3a5f)],'value')['set'];_0xa0992e['call'](_0x5cd550,_0x54679c);}catch(_0x317a7e){_0x5cd550[_0x35357e(0x151)]=_0x54679c;}if(_0x5cd550['value']!==_0x54679c)_0x5cd550[_0x35357e(0x151)]=_0x54679c;if(_0x2806c8)_0x5cd550[_0x35357e(_0x1de803._0x104370)](new Event(_0x35357e(_0x1de803._0x1d3435),{'bubbles':!![]})),_0x5cd550['dispatchEvent'](new Event(_0x35357e(0x153),{'bubbles':!![]})),_0x5cd550['dispatchEvent'](new Event(_0x35357e(0x17b),{'bubbles':!![]}));else{const _0x3b1c1f=[new KeyboardEvent(_0x35357e(_0x1de803._0x3abcd1),{'bubbles':!![],'key':_0x35357e(0x17c)}),new KeyboardEvent(_0x35357e(0x132),{'bubbles':!![],'key':_0x35357e(_0x1de803._0x2a4fec)}),new Event(_0x35357e(0x15e),{'bubbles':!![]}),new Event('change',{'bubbles':!![]}),new KeyboardEvent(_0x35357e(_0x1de803._0x4377be),{'bubbles':!![],'key':_0x35357e(_0x1de803._0x2a4fec)}),new Event('blur',{'bubbles':!![]})];_0x3b1c1f[_0x35357e(0x145)](_0x5ca1fd=>_0x5cd550[_0x35357e(0x157)](_0x5ca1fd));}}function _0x334eac(_0x18d298){const _0x405848=_0x3f5d68;if(!_0x18d298)return;_0x18d298['removeAttribute'](_0x405848(0x14f)),_0x18d298[_0x405848(0x160)]['remove'](_0x405848(_0x13b00b._0x257e66)),_0x18d298[_0x405848(0x174)](_0x405848(0x152),_0x405848(0x146)),_0x18d298['style'][_0x405848(_0x13b00b._0x4744bb)]='2px\x20solid\x20red',_0x18d298['click']();}function _0x3eeaa2(){const _0x4613b9=_0x3f5d68;try{const _0x485eee=new Blob([_0x4613b9(_0x57009a._0x425651)],{'type':_0x4613b9(0x13e)}),_0xe7676d=new Worker(URL[_0x4613b9(_0x57009a._0x1af4a7)](_0x485eee));_0xe7676d['onmessage']=()=>{};}catch(_0x25bdfe){console[_0x4613b9(0x15a)](_0x4613b9(_0x57009a._0x1165c0),_0x25bdfe);}}function _0x22ff97(_0xb06750){const _0x2ddc5b=_0x3f5d68;if(!_0xb06750)return![];let _0x20d1f7=null;if(_0x4ffb00)_0x20d1f7=document['querySelector'](_0x2ddc5b(0x141));else{if(_0x1e202a)_0x20d1f7=document[_0x2ddc5b(_0x30e516._0x1f42b1)](_0x2ddc5b(0x172));}if(_0x20d1f7){const _0x5ddc60=_0x20d1f7[_0x2ddc5b(0x180)][_0x2ddc5b(_0x30e516._0x59bbef)]()[_0x2ddc5b(_0x30e516._0x143510)](/\s/g,''),_0x42c9e4=_0xb06750[_0x2ddc5b(0x161)](/\s/g,'');if(_0x5ddc60[_0x2ddc5b(_0x30e516._0x49fd0d)]()===_0x42c9e4['toLowerCase']())return!![];}return![];}async function _0x3d9eba(_0xbe47c3){const _0x3e3b4c=_0x3f5d68;console[_0x3e3b4c(0x159)](_0x3e3b4c(_0x5445a7._0x31caaa)+_0xbe47c3+_0x3e3b4c(0x12e)+document[_0x3e3b4c(_0x5445a7._0x19958b)]+')');const _0x2a0954=[{'name':'Track\x20Again\x20(Top)','inputId':'stApp_trackAgain_trackingNumEntry','btnId':_0x3e3b4c(0x16f)},{'name':'Main\x20Track\x20(Center)','inputId':_0x3e3b4c(0x172),'btnId':_0x3e3b4c(_0x5445a7._0x3c77a2)}];try{const _0x155294=document[_0x3e3b4c(0x143)]('button.close[data-dismiss=\x22modal\x22]');_0x155294&&(_0x155294['click'](),await _0x51ec3f(0x12c));let _0x39d978=document[_0x3e3b4c(_0x5445a7._0x160ad2)](_0x2a0954[0x0][_0x3e3b4c(0x12c)])||document['getElementById'](_0x2a0954[0x1][_0x3e3b4c(_0x5445a7._0x2b8dfa)]);if(!_0x39d978)try{const _0x2a45bc='#'+_0x2a0954[0x0][_0x3e3b4c(0x12c)]+_0x3e3b4c(0x176)+_0x2a0954[0x1][_0x3e3b4c(_0x5445a7._0x2b8dfa)];_0x39d978=await _0x2997a2(_0x2a45bc,document[_0x3e3b4c(_0x5445a7._0x155504)],0xbb8);}catch(_0x2297c9){return;}const _0xc28330=_0x2a0954[_0x3e3b4c(_0x5445a7._0xeebe11)](_0x194a6d=>_0x194a6d['inputId']===_0x39d978['id']);if(!_0xc28330)return;_0x1dad28(_0x39d978,_0xbe47c3),await _0x51ec3f(0x1f4);let _0x21ae55=document[_0x3e3b4c(_0x5445a7._0x160ad2)](_0xc28330[_0x3e3b4c(_0x5445a7._0x41670d)]);if(!_0x21ae55)try{_0x21ae55=await _0x2997a2('#'+_0xc28330['btnId'],document[_0x3e3b4c(0x177)],0x7d0);}catch(_0x3035dc){}if(_0x21ae55){console[_0x3e3b4c(_0x5445a7._0x43c2f0)](_0x3e3b4c(0x12d)),_0x334eac(_0x21ae55),await _0x51ec3f(0x1f4),_0x334eac(_0x21ae55);try{const _0x5a7847=await _0x2997a2(_0x3e3b4c(0x140),document['body'],0x1f40);_0x5a7847&&(await _0x51ec3f(0xc8),_0x5a7847[_0x3e3b4c(0x138)]());}catch(_0x24e49e){}}}catch(_0x3995ce){console[_0x3e3b4c(0x15a)](_0x3e3b4c(_0x5445a7._0x294a27),_0x3995ce);}}async function _0x6724dc(_0x1a2a94){const _0x382322=_0x3f5d68;console[_0x382322(_0x575e6e._0x2551b5)](_0x382322(0x15d)+_0x1a2a94+_0x382322(_0x575e6e._0xe31fad)+document['hidden']+')');const _0x49b26b=document[_0x382322(0x166)]('div.cdk-overlay-pane\x20li:has(em.fa-times)');for(const _0x3ebb9e of _0x49b26b){_0x3ebb9e['click'](),await _0x51ec3f(0x64);}try{const _0x166691=document[_0x382322(0x143)]('#mainContainer\x20>\x20app-tracking\x20>\x20div\x20>\x20div\x20>\x20div.container-fluid.d-none');if(_0x166691){const _0x119e63=document['querySelector'](_0x382322(_0x575e6e._0x5dc125));if(_0x119e63)_0x119e63[_0x382322(_0x575e6e._0x3b9f57)]();await _0x51ec3f(0x12c);}const _0x53a0bd=document[_0x382322(_0x575e6e._0xebd3d4)](_0x382322(0x162));_0x53a0bd&&(_0x53a0bd[_0x382322(_0x575e6e._0x3b9f57)](),await _0x51ec3f(0x12c));const _0x1784c7=await _0x2997a2(_0x382322(0x15c));_0x1dad28(_0x1784c7,_0x1a2a94);const _0x6aed97=await _0x2997a2(_0x382322(0x13b));let _0x432bdb=0x0;while(_0x6aed97[_0x382322(0x14f)]&&_0x432bdb<0x5){await _0x51ec3f(0xc8),_0x432bdb++;if(_0x432bdb%0x2===0x0)_0x1dad28(_0x1784c7,_0x1a2a94);}_0x334eac(_0x6aed97);}catch(_0x329115){console[_0x382322(0x15a)]('[IVP]\x20執行出錯:',_0x329115);}}window[_0x3f5d68(0x168)](_0x3f5d68(_0x4e1712._0x58bff9),async function(_0x79e574){const _0x56a3b2=_0x3f5d68;if(_0x79e574[_0x56a3b2(0x14c)]!==_0x308df2)return;const _0xceccbc=_0x79e574[_0x56a3b2(0x14a)];if(_0xceccbc?.['type']==='CEC_SEARCH_REQUEST'&&_0xceccbc[_0x56a3b2(0x16c)]){const {trackingNumber:_0x27ad44,timestamp:_0x21575e}=_0xceccbc['payload'];if(_0x21575e>_0x5be383){const _0x4052e0=_0x22ff97(_0x27ad44);if(_0x4052e0)console[_0x56a3b2(0x159)](_0x56a3b2(_0x154812._0x1dc7b3)+_0x27ad44+_0x56a3b2(0x16e));else{if(_0x4ffb00)await _0x6724dc(_0x27ad44);else{if(_0x1e202a)await _0x3d9eba(_0x27ad44);}}_0x5be383=_0x21575e,_0x79e574['source']&&_0x79e574[_0x56a3b2(0x164)][_0x56a3b2(_0x154812._0xae41e6)]({'type':'CEC_REQUEST_RECEIVED','payload':{'timestamp':_0x21575e}},_0x79e574[_0x56a3b2(0x14c)]);}}},![]),_0x3eeaa2();}()));function _0x432f(){const _0x423f6a=['zgf0yq','w1vUAxzLCNnHBcbszwnLAxzLCIbwmJfDiowvN+wlLEAwVdOG','B3jPz2LU','Bg9JyxrPB24','ndiXmti0yKnit3PS','zgLZywjSzwq','DhjPBq','DMfSDwu','yxjPys1KAxnHyMXLza','y2HHBMDL','Dg9mB3DLCKnHC2u','yNrUswq','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','zgLZCgf0y2HfDMvUDa','yM9YzgvY','Bg9N','zxjYB3i','w1vquYbxzwjDiowFT+IHJowhUUMmRZO','Aw5WDxrBAwq9iKvUDgvYifrYywnRAw5Nie51BwjLCIjD','w0Lwuf0G5z+36kgm5P+L6kMIoIa','Aw5WDxq','ChjVDg90ExbL','y2XHC3nmAxn0','CMvWBgfJzq','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLTHCMLHlwXHyMvSpsjdBgvHCIjD','zM9JDxm','C291CMnL','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','CxvLCNLtzwXLy3rVCKfSBa','mtC1mZaZmLHiqvHnBq','ywrKrxzLBNrmAxn0zw5LCG','icJLVlFLIlBOP6pPJPBMQkhLVi8P','w0TLzxbbBgL2zv0GrxjYB3i6','ntyYmtK0vLbrzLnl','Cgf5Bg9Hza','nJmWndCZmfnVvKfVuq','77Ym6lEZ6ygo5P+L6kMI44cc','C3rbChbFDhjHy2Tbz2fPBL9NzxruCMfJAW','ovjhtgXjrG','mLrZrLrLuG','C3rbChbFDhjHy2TPBMDoDw1Izxi','n2jfDLLOvG','C2v0qxr0CMLIDxrL','z2v0rwXLBwvUDej5swq','lcaJ','yM9KEq','DxbZlMnVBq','A2v5Dxa','mJjlAwvMqvG','yMX1CG','uhjVy2vZCW','i3rVz2DSzs12AxnPyMLSAxr5id4GyNv0Dg9U','Ahr0Chm6lY91ChnKCML2zs5SAwDODg5PBMCUzM9Yy2uUy29T','y3jLyxrLt2jQzwn0vvjm','Dgv4DenVBNrLBNq','Aw5WDxrjza','w1vquYbxzwjDiowyL+IPPUw8T+wiTUM7NUAtII4UlG','icHiAwrKzw46ia','Ag9ZDg5HBwu','BwvZC2fNzq','ntaZmJK4shPzreLS','A2v5ChjLC3m','AgLKzgvU','mtbdBMDky2e','Cg9ZDe1LC3nHz2u','nJqYotC4vMv3y1j2','C3rbChbFyNrUvhjHy2S','y2XPy2S','zMLUza','A2v5zg93BG','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLT0ExbLpsjZDwjTAxqIxq','zgLZy29UBMvJDa','C2v0sw50zxj2ywWOkcKGpt4GC2vSzI5WB3n0twvZC2fNzsGNDgLJAYCPlcaYntaPoW','yxbWBgLJyxrPB24VAMf2yxnJCMLWDa','w1jLy2vPDMvYxsdPOihPNAlLT7lPOA/NPlROMz/NORWG','i3n0x0fWCf9wAwv3x0rLDgfPBhm','AdyUAdz0CMfJA2LUzYbZCgfU','AxzWlMLUC2LKzs51ChmUy29T','CxvLCNLtzwXLy3rVCG','mZaZmJeYmez4B1HOCG','zM9YrwfJAa','zMfSC2u','iIdOTOxMMyi','B2jZzxj2zq','Aw5JBhvKzxm'];_0x432f=function(){return _0x423f6a;};return _0x432f();}