// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V21
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。修復後台UPS官網因自身腳本崩潰導致按鈕無法點擊的問題(V21: 強制解鎖模式)。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// @downloadURL  https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// ==/UserScript==

function _0x2e74(){const _0x8c4c32=['Dg9mB3DLCKnHC2u','C3rbChbFyNrUvhjHy2S','Ag9ZDg5HBwu','mKXtv01zta','mtaYmZeXz1rdwgPk','zgL2lMnKAY1VDMvYBgf5lxbHBMuGBgK6AgfZkgvTlMzHlxrPBwvZkq','vhjHy2SGqwDHAw4GkfrVCcK','CMvWBgfJzq','A2v5Dxa','zMLUza','w1vUAxzLCNnHBcbszwnLAxzLCIbwmJfDiowvN+wlLEAwVdOG','77Ym6lEZ6ygo5P+L6kMI44cc','B3jPz2LU','mJbrwKTfuKy','DhLWzq','ndC5mJmYsefxugLN','C291CMnL','C3rbChbFDhjHy2Tbz2fPBL90CMfJA2LUz051BuvUDhj5','mJrxB3LyAxm','y2HHBMDL','y2XPy2S','yNv0Dg9UlMnSB3nLw2rHDgeTzgLZBwLZCZ0IBw9KywWIxq','uhjVy2vZCW','w0Lwuf0G5z+36kgm5P+L6kMIoIa','mJGZmJu1tNjluhH4','yM9KEq','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','q0vdx1nfqvjdsf9srvfvrvnu','z2v0rwXLBwvUDej5swq','A2v5ChjLC3m','Aw5WDxq','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLTHCMLHlwXHyMvSpsjdBgvHCIjD','B2jZzxj2zq','ntq5mZa2rfzLwwj0','Bg9N','odu2mti1qK1ntNLM','icHiAwrKzw46ia','twfPBIbuCMfJAYaOq2vUDgvYkq','Cgf5Bg9Hza','zM9JDxm','y2XHC3nmAxn0','AdyUAdz0CMfJA2LUzYbZCgfU','zgLZCgf0y2HfDMvUDa','C3rbChbFDhjHy2TPBMDoDw1Izxi','Bg9JyxrPB24','lcaJ','C2v0sw50zxj2ywWOkcKGpt4GC2vSzI5WB3n0twvZC2fNzsGNDgLJAYCPlcaYntaPoW','C3rbChbFDhjHy2Tbz2fPBL9NzxruCMfJAW','i21HAw5dB250ywLUzxiGpIbHChaTDhjHy2TPBMCGpIbKAxyGpIbKAxyGpIbKAxyUy29UDgfPBMvYlwzSDwLKlMqTBM9Uzq','w1vquYbxzwjDiowFT+IHJowhUUMmRZO','zgLZy29UBMvJDa','CxvLCNLtzwXLy3rVCG','AxzWlMLUC2LKzs51ChmUy29T','DxbZlMnVBq','ChjVDg90ExbL','mNb4ihnVBgLKihjLza','CxvLCNLtzwXLy3rVCKfSBa','Aw5JBhvKzxm','mtuZoty1sur0CeDb','w1vquYbxzwjDiowyL+IPPUw8T+wiTUM7NUAtII4UlG','y2fSBa','q0vdx1jfuvvfu1rFuKvdruLwruq','DMfSDwu','iIdOTOxMMyi','i3rVz2DSzs12AxnPyMLSAxr5id4GyNv0Dg9U','zgLZywjSzwq','DhjPBq','CMvTB3zLqxr0CMLIDxrL','C2v0qxr0CMLIDxrL','zgf0yq','sfrnteLUChv0rwXLBwvUDa','CMvTB3zL','zxjYB3i','mJq5mdi0mhn3DuPirG','Aw5WDxrjza','icJLVlFLIlBOP6pPJPBMQkhLVi8P','C2v0','562j5B6f5ywd57sGici','A2v5zg93BG','w1jLy2vPDMvYxsdPOihPNAlLT7lPOA/NPlROMz/NORWG','Aw5WDxrBAwq9iKvUDgvYifrYywnRAw5Nie51BwjLCIjD','yNrUswq','yxjPys1KAxnHyMXLza','AgLKzgvU'];_0x2e74=function(){return _0x8c4c32;};return _0x2e74();}function _0x2549(_0x36b306,_0x912139){const _0x2e7422=_0x2e74();return _0x2549=function(_0x254970,_0x182f58){_0x254970=_0x254970-0xaa;let _0x13e08f=_0x2e7422[_0x254970];if(_0x2549['JqpgCh']===undefined){var _0xba6c83=function(_0x3d4036){const _0x25599e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x429b06='',_0x456aa8='';for(let _0x89aa3d=0x0,_0x3cd9eb,_0x395958,_0x5daad2=0x0;_0x395958=_0x3d4036['charAt'](_0x5daad2++);~_0x395958&&(_0x3cd9eb=_0x89aa3d%0x4?_0x3cd9eb*0x40+_0x395958:_0x395958,_0x89aa3d++%0x4)?_0x429b06+=String['fromCharCode'](0xff&_0x3cd9eb>>(-0x2*_0x89aa3d&0x6)):0x0){_0x395958=_0x25599e['indexOf'](_0x395958);}for(let _0x31e9fb=0x0,_0x554d57=_0x429b06['length'];_0x31e9fb<_0x554d57;_0x31e9fb++){_0x456aa8+='%'+('00'+_0x429b06['charCodeAt'](_0x31e9fb)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x456aa8);};_0x2549['eZWnGi']=_0xba6c83,_0x36b306=arguments,_0x2549['JqpgCh']=!![];}const _0xb972fc=_0x2e7422[0x0],_0x3ea317=_0x254970+_0xb972fc,_0x2d4254=_0x36b306[_0x3ea317];return!_0x2d4254?(_0x13e08f=_0x2549['eZWnGi'](_0x13e08f),_0x36b306[_0x3ea317]=_0x13e08f):_0x13e08f=_0x2d4254,_0x13e08f;},_0x2549(_0x36b306,_0x912139);}(function(_0x46dadc,_0x29ba11){const _0x51b2a7={_0x465278:0xf5,_0x19f3e0:0xf4,_0x134207:0xaa,_0x176ab0:0xd7,_0x443587:0xac,_0x25ad25:0xb5,_0x713991:0xaf,_0x350902:0xc0,_0x259ee9:0xe6},_0x2dc959=_0x2549,_0x42857c=_0x46dadc();while(!![]){try{const _0x4ee1eb=parseInt(_0x2dc959(_0x51b2a7._0x465278))/0x1*(-parseInt(_0x2dc959(_0x51b2a7._0x19f3e0))/0x2)+parseInt(_0x2dc959(0xbe))/0x3+-parseInt(_0x2dc959(_0x51b2a7._0x134207))/0x4*(-parseInt(_0x2dc959(_0x51b2a7._0x176ab0))/0x5)+-parseInt(_0x2dc959(_0x51b2a7._0x443587))/0x6+parseInt(_0x2dc959(_0x51b2a7._0x25ad25))/0x7*(parseInt(_0x2dc959(_0x51b2a7._0x713991))/0x8)+parseInt(_0x2dc959(_0x51b2a7._0x350902))/0x9+-parseInt(_0x2dc959(_0x51b2a7._0x259ee9))/0xa;if(_0x4ee1eb===_0x29ba11)break;else _0x42857c['push'](_0x42857c['shift']());}catch(_0x500bac){_0x42857c['push'](_0x42857c['shift']());}}}(_0x2e74,0x1de0c),(function(){'use strict';const _0xff54ef={_0x902c2b:0xf3,_0x57afe0:0xd6,_0x4347f6:0xd2,_0x25b3f7:0xfb},_0xae71bf={_0x514c28:0xab,_0x2680e4:0xc3,_0x3c043a:0xc3,_0x2e5e63:0xec,_0x3c44ea:0xfc,_0x411ffa:0xad},_0x1678ce={_0x5c8a94:0xf0,_0x58fa41:0xf6,_0x489708:0xb1,_0x43a5f7:0xcd,_0x32c402:0xd0,_0x55b41a:0xbc,_0x4ccb5d:0xed,_0x52cbdf:0xe5},_0x2ad64b={_0x445bab:0xbf,_0x2600fd:0xc1,_0x56dbd2:0xae,_0x7a9d39:0xcc,_0x233aa9:0xc8,_0x140321:0xd0,_0x4b8ada:0xb9,_0x8e2a40:0xe7,_0x33eda3:0xd8,_0x56da7f:0xb6,_0x51f6b1:0xb1,_0x58e0ba:0xce},_0x30cf49={_0x31adc1:0xd0,_0xd48376:0xc6,_0x467e76:0xc8,_0x5eebb4:0xf8,_0x30101d:0xf1,_0x193d1d:0xf1},_0x50908b={_0x49c631:0xe0,_0x41bf82:0xc5,_0x524a8a:0xe4,_0x20a4d9:0xe1,_0x3af5f1:0xd4},_0x133486={_0x142651:0xc4,_0x28353f:0xdb,_0x348294:0xd9,_0x31c417:0xbb,_0x5e4369:0xc7,_0x51521d:0xb0,_0x29e443:0xc7,_0x282ecc:0xb3,_0x16b0ab:0xf9},_0x4f2b21=_0x2549;const _0x3d4036=window[_0x4f2b21(0xc9)][_0x4f2b21(_0xff54ef._0x902c2b)],_0x25599e=_0x3d4036['includes'](_0x4f2b21(0xd1)),_0x429b06=_0x3d4036[_0x4f2b21(_0xff54ef._0x57afe0)](_0x4f2b21(_0xff54ef._0x4347f6)),_0x456aa8='https://upsdrive.lightning.force.com';console['log'](_0x4f2b21(_0xff54ef._0x25b3f7)+_0x3d4036+_0x4f2b21(0xe8));let _0x89aa3d=0x0;const _0x3cd9eb=_0x35ee66=>new Promise(_0x59621b=>setTimeout(_0x59621b,_0x35ee66));function _0x395958(_0x214462,_0x15949c=document[_0x4f2b21(0xb6)],_0x3c37b0=0x1388){const _0x4485ae={_0x3bedc7:0xcf};return new Promise((_0x4c0f06,_0x4cf035)=>{const _0x3ef2d1={_0x3fe0c4:0xea,_0x45ee90:0xdc},_0x4e720e=_0x2549,_0x319b0b=_0x15949c[_0x4e720e(0xd0)](_0x214462);if(_0x319b0b)return _0x4c0f06(_0x319b0b);const _0x1b4a93=new MutationObserver(()=>{const _0x5f598b=_0x4e720e,_0x5b9e92=_0x15949c['querySelector'](_0x214462);_0x5b9e92&&(_0x1b4a93[_0x5f598b(_0x4485ae._0x3bedc7)](),_0x4c0f06(_0x5b9e92));});_0x1b4a93[_0x4e720e(0xbd)](_0x15949c,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0x4b0ce4=_0x4e720e;_0x1b4a93['disconnect'](),_0x4cf035(new Error(_0x4b0ce4(_0x3ef2d1._0x3fe0c4)+_0x214462+_0x4b0ce4(_0x3ef2d1._0x45ee90)));},_0x3c37b0);});}function _0x5daad2(_0x306afe,_0x629823){const _0x556631=_0x4f2b21;if(!_0x306afe)return;const _0x22eca5=document[_0x556631(0xf0)];if(!_0x22eca5)try{_0x306afe[_0x556631(_0x133486._0x142651)]();}catch(_0x3fa35c){}try{const _0x30ab3b=Object['getOwnPropertyDescriptor'](window[_0x556631(0xe3)][_0x556631(0xd3)],_0x556631(_0x133486._0x28353f))[_0x556631(0xe9)];_0x30ab3b[_0x556631(_0x133486._0x348294)](_0x306afe,_0x629823);}catch(_0x15bf17){_0x306afe['value']=_0x629823;}if(_0x306afe[_0x556631(_0x133486._0x28353f)]!==_0x629823)_0x306afe['value']=_0x629823;if(_0x22eca5)_0x306afe[_0x556631(0xc7)](new Event(_0x556631(_0x133486._0x31c417),{'bubbles':!![]})),_0x306afe[_0x556631(_0x133486._0x5e4369)](new Event(_0x556631(_0x133486._0x51521d),{'bubbles':!![]})),_0x306afe[_0x556631(_0x133486._0x29e443)](new Event('blur',{'bubbles':!![]}));else{const _0x12c75b=[new KeyboardEvent(_0x556631(0xeb),{'bubbles':!![],'key':_0x556631(_0x133486._0x282ecc)}),new KeyboardEvent(_0x556631(0xba),{'bubbles':!![],'key':'Process'}),new Event(_0x556631(0xbb),{'bubbles':!![]}),new Event(_0x556631(0xb0),{'bubbles':!![]}),new KeyboardEvent(_0x556631(_0x133486._0x16b0ab),{'bubbles':!![],'key':'Process'}),new Event('blur',{'bubbles':!![]})];_0x12c75b['forEach'](_0x6fc129=>_0x306afe['dispatchEvent'](_0x6fc129));}}function _0x31e9fb(_0x5012e7){const _0x2b140d=_0x4f2b21;if(!_0x5012e7)return;_0x5012e7[_0x2b140d(_0x50908b._0x49c631)]('disabled'),_0x5012e7[_0x2b140d(_0x50908b._0x41bf82)][_0x2b140d(_0x50908b._0x524a8a)](_0x2b140d(0xde)),_0x5012e7[_0x2b140d(_0x50908b._0x20a4d9)](_0x2b140d(0xef),'false'),_0x5012e7['style']['border']=_0x2b140d(_0x50908b._0x3af5f1),_0x5012e7['click']();}function _0x554d57(){const _0x23a122=_0x4f2b21;try{const _0x3c2dfd=new Blob([_0x23a122(0xcb)],{'type':'application/javascript'}),_0x3e6e8c=new Worker(URL['createObjectURL'](_0x3c2dfd));_0x3e6e8c['onmessage']=()=>{};}catch(_0x42b26e){console['error']('[KeepAlive]\x20Error:',_0x42b26e);}}function _0x25a82c(_0xd59e9e){const _0x143060=_0x4f2b21;if(!_0xd59e9e)return![];let _0x4d78c5=null;if(_0x25599e)_0x4d78c5=document[_0x143060(_0x30cf49._0x31adc1)](_0x143060(_0x30cf49._0xd48376));else{if(_0x429b06)_0x4d78c5=document['getElementById'](_0x143060(_0x30cf49._0x467e76));}if(_0x4d78c5){const _0x148c16=_0x4d78c5['textContent'][_0x143060(0xdf)]()[_0x143060(_0x30cf49._0x5eebb4)](/\s/g,''),_0x5ec86c=_0xd59e9e[_0x143060(0xf8)](/\s/g,'');if(_0x148c16[_0x143060(_0x30cf49._0x30101d)]()===_0x5ec86c[_0x143060(_0x30cf49._0x193d1d)]())return!![];}return![];}async function _0x349fca(_0x299b3d){const _0x476953=_0x4f2b21;console[_0x476953(_0x2ad64b._0x445bab)](_0x476953(0xb7)+_0x299b3d+_0x476953(_0x2ad64b._0x2600fd)+document[_0x476953(0xf0)]+')');const _0x2c4eac=[{'name':_0x476953(0xf7),'inputId':_0x476953(_0x2ad64b._0x56dbd2),'btnId':_0x476953(_0x2ad64b._0x7a9d39)},{'name':_0x476953(0xc2),'inputId':_0x476953(_0x2ad64b._0x233aa9),'btnId':_0x476953(0xf2)}];try{const _0x334bb8=document[_0x476953(_0x2ad64b._0x140321)](_0x476953(0xb2));_0x334bb8&&(_0x334bb8[_0x476953(0xb1)](),await _0x3cd9eb(0x12c));let _0x584f45=document['getElementById'](_0x2c4eac[0x0][_0x476953(0xe7)])||document[_0x476953(_0x2ad64b._0x4b8ada)](_0x2c4eac[0x1][_0x476953(0xe7)]);if(!_0x584f45)try{const _0x17e5a2='#'+_0x2c4eac[0x0][_0x476953(_0x2ad64b._0x8e2a40)]+_0x476953(0xca)+_0x2c4eac[0x1]['inputId'];_0x584f45=await _0x395958(_0x17e5a2,document['body'],0xbb8);}catch(_0x536d53){return;}const _0x27c84b=_0x2c4eac[_0x476953(0xfa)](_0xe3544b=>_0xe3544b[_0x476953(0xe7)]===_0x584f45['id']);if(!_0x27c84b)return;_0x5daad2(_0x584f45,_0x299b3d),await _0x3cd9eb(0x1f4);let _0x29740b=document[_0x476953(0xb9)](_0x27c84b['btnId']);if(!_0x29740b)try{_0x29740b=await _0x395958('#'+_0x27c84b[_0x476953(0xee)],document['body'],0x7d0);}catch(_0xd81b8b){}if(_0x29740b){console['log'](_0x476953(_0x2ad64b._0x33eda3)),_0x31e9fb(_0x29740b),await _0x3cd9eb(0x1f4),_0x31e9fb(_0x29740b);try{const _0x22892c=await _0x395958('#st_App_View_Details',document[_0x476953(_0x2ad64b._0x56da7f)],0x1f40);_0x22892c&&(await _0x3cd9eb(0xc8),_0x22892c[_0x476953(_0x2ad64b._0x51f6b1)]());}catch(_0xc9f2c6){}}}catch(_0x129d2c){console[_0x476953(0xe5)](_0x476953(_0x2ad64b._0x58e0ba),_0x129d2c);}}async function _0x20b36b(_0x4c8020){const _0x184396=_0x4f2b21;console[_0x184396(0xbf)](_0x184396(0xb4)+_0x4c8020+'\x20(Hidden:\x20'+document[_0x184396(_0x1678ce._0x5c8a94)]+')');const _0x2c4113=document[_0x184396(0xd5)](_0x184396(_0x1678ce._0x58fa41));for(const _0x4e0004 of _0x2c4113){_0x4e0004[_0x184396(_0x1678ce._0x489708)](),await _0x3cd9eb(0x64);}try{const _0x3790ba=document['querySelector'](_0x184396(_0x1678ce._0x43a5f7));if(_0x3790ba){const _0x576069=document[_0x184396(_0x1678ce._0x32c402)](_0x184396(0xdd));if(_0x576069)_0x576069['click']();await _0x3cd9eb(0x12c);}const _0x556857=document[_0x184396(0xd0)](_0x184396(_0x1678ce._0x55b41a));_0x556857&&(_0x556857['click'](),await _0x3cd9eb(0x12c));const _0x2fdba0=await _0x395958(_0x184396(_0x1678ce._0x4ccb5d));_0x5daad2(_0x2fdba0,_0x4c8020);const _0x349934=await _0x395958('div.action-buttons\x20button[type=\x22submit\x22]');let _0x4234ff=0x0;while(_0x349934[_0x184396(0xde)]&&_0x4234ff<0x5){await _0x3cd9eb(0xc8),_0x4234ff++;if(_0x4234ff%0x2===0x0)_0x5daad2(_0x2fdba0,_0x4c8020);}_0x31e9fb(_0x349934);}catch(_0x38a051){console[_0x184396(_0x1678ce._0x52cbdf)]('[IVP]\x20執行出錯:',_0x38a051);}}window['addEventListener']('message',async function(_0x1aabc2){const _0x25319c=_0x4f2b21;if(_0x1aabc2['origin']!==_0x456aa8)return;const _0x3a6dd4=_0x1aabc2[_0x25319c(0xe2)];if(_0x3a6dd4?.[_0x25319c(_0xae71bf._0x514c28)]===_0x25319c(0xb8)&&_0x3a6dd4[_0x25319c(_0xae71bf._0x2680e4)]){const {trackingNumber:_0x50b57a,timestamp:_0x1b8b63}=_0x3a6dd4[_0x25319c(_0xae71bf._0x3c043a)];if(_0x1b8b63>_0x89aa3d){const _0x52335e=_0x25a82c(_0x50b57a);if(_0x52335e)console[_0x25319c(0xbf)](_0x25319c(_0xae71bf._0x2e5e63)+_0x50b57a+_0x25319c(_0xae71bf._0x3c44ea));else{if(_0x25599e)await _0x20b36b(_0x50b57a);else{if(_0x429b06)await _0x349fca(_0x50b57a);}}_0x89aa3d=_0x1b8b63,_0x1aabc2[_0x25319c(_0xae71bf._0x411ffa)]&&_0x1aabc2[_0x25319c(_0xae71bf._0x411ffa)]['postMessage']({'type':_0x25319c(0xda),'payload':{'timestamp':_0x1b8b63}},_0x1aabc2[_0x25319c(0xfd)]);}}},![]),_0x554d57();}()));