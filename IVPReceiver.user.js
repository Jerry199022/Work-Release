// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V14
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。後臺保活功能。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://raw.githubusercontent.com/Jerry199022/Work/refs/heads/main/IVPReceiver.js
// @downloadURL  https://raw.githubusercontent.com/Jerry199022/Work/refs/heads/main/IVPReceiver.js
// ==/UserScript==

(function(_0x1da93b,_0x532aa3){const _0x48e516={_0x2b7f3a:0x1c1,_0x13f781:0x1b6,_0x39a6c5:0x19d,_0x4693ad:0x1b8,_0x13d977:0x1a0,_0x15a20e:0x1a2,_0x1e5a3c:0x1de,_0x9e077f:0x1df,_0x50146c:0x1c2},_0x42153b=_0x369b,_0x21f055=_0x1da93b();while(!![]){try{const _0x5ed5c0=-parseInt(_0x42153b(_0x48e516._0x2b7f3a))/0x1*(-parseInt(_0x42153b(_0x48e516._0x13f781))/0x2)+-parseInt(_0x42153b(0x1d3))/0x3+parseInt(_0x42153b(_0x48e516._0x39a6c5))/0x4+parseInt(_0x42153b(_0x48e516._0x4693ad))/0x5*(-parseInt(_0x42153b(_0x48e516._0x13d977))/0x6)+-parseInt(_0x42153b(_0x48e516._0x15a20e))/0x7*(-parseInt(_0x42153b(_0x48e516._0x1e5a3c))/0x8)+-parseInt(_0x42153b(_0x48e516._0x9e077f))/0x9+parseInt(_0x42153b(_0x48e516._0x50146c))/0xa;if(_0x5ed5c0===_0x532aa3)break;else _0x21f055['push'](_0x21f055['shift']());}catch(_0x156aa9){_0x21f055['push'](_0x21f055['shift']());}}}(_0x4440,0x6a64f),(function(){'use strict';const _0x1e62ac={_0x294cf8:0x19a,_0x18be83:0x1d1,_0xaca1aa:0x1dd,_0x4b18a9:0x1b4,_0x44748d:0x1a8,_0x138ad4:0x1d9,_0x3c4fe5:0x1b1},_0x2dadc7={_0x17a87e:0x1c6,_0x484456:0x19b},_0x209ccb={_0x2c37ed:0x1c9,_0x1f3976:0x1d4,_0x5ab655:0x1aa,_0x5c103c:0x1a3,_0x300a96:0x1a1,_0x39f3d7:0x1bd,_0x7d0fce:0x198,_0x5528cb:0x1bd,_0x3c92b4:0x1bb,_0x3bc3d5:0x1a9,_0x2ad261:0x1d8},_0x5c0d3d={_0x55f559:0x1c7,_0x7882a5:0x1dc,_0x1bf4ec:0x1af,_0x46a805:0x1c9,_0x367946:0x1a3,_0x14dad1:0x1d5,_0x4bc739:0x1c5,_0x539f3c:0x1ca,_0x740b34:0x1bb,_0x144f75:0x1b0,_0x3dfa82:0x19c},_0x399eb1={_0x40a187:0x1bd,_0x454b94:0x1c4,_0x59e850:0x1ba,_0x5e427d:0x19e,_0x3aabfa:0x1c3},_0x4f6484={_0x2a0bf0:0x1d0,_0x2355b4:0x1bf},_0x244625=_0x369b;const _0x17349a=window[_0x244625(_0x1e62ac._0x294cf8)][_0x244625(0x1c8)],_0x36ceaa=_0x17349a[_0x244625(0x1d1)](_0x244625(0x1be)),_0x1d89b5=_0x17349a[_0x244625(_0x1e62ac._0x18be83)](_0x244625(_0x1e62ac._0xaca1aa)),_0x3d1394=_0x244625(_0x1e62ac._0x4b18a9);console['log'](_0x244625(0x1ab)+_0x17349a),console[_0x244625(0x1c9)](_0x244625(_0x1e62ac._0x44748d)+(_0x36ceaa?_0x244625(0x1d6):_0x1d89b5?_0x244625(0x1cd):_0x244625(0x1ad)));let _0x5c70c6=0x0;const _0x1f7f3e=_0x4744c6=>new Promise(_0x299c75=>setTimeout(_0x299c75,_0x4744c6));function _0xdc74b8(_0x4be99b,_0x55814b=document[_0x244625(0x1c5)],_0x338db4=0x1388){const _0x2390e2={_0x446607:0x1a5};return new Promise((_0x3aa577,_0x18890b)=>{const _0x26a95c=_0x369b,_0x2392dc=_0x55814b[_0x26a95c(0x1bd)](_0x4be99b);if(_0x2392dc)return _0x3aa577(_0x2392dc);const _0x4c730d=new MutationObserver(()=>{const _0x1bd795=_0x26a95c,_0x3692fc=_0x55814b[_0x1bd795(0x1bd)](_0x4be99b);_0x3692fc&&(_0x4c730d['disconnect'](),_0x3aa577(_0x3692fc));});_0x4c730d[_0x26a95c(0x1cc)](_0x55814b,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0x12845b=_0x26a95c;_0x4c730d[_0x12845b(0x1ac)](),_0x18890b(new Error(_0x12845b(_0x2390e2._0x446607)+_0x4be99b+_0x12845b(0x1b5)));},_0x338db4);});}function _0x39e319(){const _0x2c632d=_0x244625;try{const _0x5c3e4d=new Blob([_0x2c632d(0x1a7)],{'type':'application/javascript'}),_0x13b72a=new Worker(URL[_0x2c632d(_0x4f6484._0x2a0bf0)](_0x5c3e4d));_0x13b72a[_0x2c632d(0x197)]=()=>{},console[_0x2c632d(0x1c9)]('[KeepAlive]\x20保活機制已啟動\x20-\x20頻率:\x201分鐘/次');}catch(_0x3bce3e){console[_0x2c632d(0x1ca)](_0x2c632d(_0x4f6484._0x2355b4),_0x3bce3e);}}function _0x505088(_0xd58293){const _0x29afb2=_0x244625;if(!_0xd58293)return![];let _0x9b8dc1=null,_0x1adc93='';if(_0x36ceaa)_0x9b8dc1=document[_0x29afb2(_0x399eb1._0x40a187)](_0x29afb2(0x1a4));else _0x1d89b5&&(_0x9b8dc1=document[_0x29afb2(_0x399eb1._0x454b94)](_0x29afb2(_0x399eb1._0x59e850)));if(_0x9b8dc1){_0x1adc93=_0x9b8dc1[_0x29afb2(_0x399eb1._0x5e427d)][_0x29afb2(0x1ae)]();const _0x379ea0=_0x1adc93[_0x29afb2(_0x399eb1._0x3aabfa)](/\s/g,''),_0x34951f=_0xd58293['replace'](/\s/g,'');if(_0x379ea0['toLowerCase']()===_0x34951f['toLowerCase']())return!![];}return![];}async function _0x1cb5cf(_0x3a0ec2){const _0x14ee4a=_0x244625;console['log'](_0x14ee4a(_0x5c0d3d._0x55f559)+_0x3a0ec2);const _0xdbbdc8=[{'name':_0x14ee4a(0x1ce),'inputId':_0x14ee4a(_0x5c0d3d._0x7882a5),'btnId':'stApp_trackAgain_getTrack'},{'name':_0x14ee4a(_0x5c0d3d._0x1bf4ec),'inputId':'stApp_trackingNumber','btnId':'stApp_btnTrack'}];try{const _0xa9e1c9=document['querySelector']('button.close[data-dismiss=\x22modal\x22]');_0xa9e1c9&&(console[_0x14ee4a(_0x5c0d3d._0x46a805)](_0x14ee4a(0x199)),_0xa9e1c9[_0x14ee4a(_0x5c0d3d._0x367946)](),await _0x1f7f3e(0x12c));let _0x20c2b3=document[_0x14ee4a(0x1c4)](_0xdbbdc8[0x0][_0x14ee4a(0x1d5)])||document['getElementById'](_0xdbbdc8[0x1][_0x14ee4a(_0x5c0d3d._0x14dad1)]);if(!_0x20c2b3)try{const _0x284ee2='#'+_0xdbbdc8[0x0]['inputId']+_0x14ee4a(0x19f)+_0xdbbdc8[0x1]['inputId'];_0x20c2b3=await _0xdc74b8(_0x284ee2,document[_0x14ee4a(_0x5c0d3d._0x4bc739)],0xbb8);}catch(_0x2e2fc7){console[_0x14ee4a(_0x5c0d3d._0x539f3c)]('[UPS\x20Web]\x20未找到任何可用的輸入框。');return;}const _0x220f8b=_0xdbbdc8['find'](_0x15a948=>_0x15a948[_0x14ee4a(0x1d5)]===_0x20c2b3['id']);if(!_0x220f8b)return;_0x20c2b3['focus'](),_0x20c2b3[_0x14ee4a(_0x5c0d3d._0x740b34)]='',_0x20c2b3[_0x14ee4a(0x1bb)]=_0x3a0ec2,_0x20c2b3['dispatchEvent'](new Event('input',{'bubbles':!![]})),_0x20c2b3['dispatchEvent'](new Event(_0x14ee4a(0x1d2),{'bubbles':!![]})),_0x20c2b3['dispatchEvent'](new Event(_0x14ee4a(_0x5c0d3d._0x144f75),{'bubbles':!![]})),await _0x1f7f3e(0xc8);let _0x1f9791=document[_0x14ee4a(0x1c4)](_0x220f8b[_0x14ee4a(_0x5c0d3d._0x3dfa82)]);if(!_0x1f9791)try{_0x1f9791=await _0xdc74b8('#'+_0x220f8b[_0x14ee4a(0x19c)],document['body'],0x7d0);}catch(_0x37db71){}if(_0x1f9791){_0x1f9791['click']();try{const _0x4a25a4=await _0xdc74b8(_0x14ee4a(0x1b9),document[_0x14ee4a(0x1c5)],0x2710);_0x4a25a4&&(await _0x1f7f3e(0x64),_0x4a25a4[_0x14ee4a(0x1a3)]());}catch(_0x3ad19f){}}}catch(_0x2328c9){console[_0x14ee4a(_0x5c0d3d._0x539f3c)]('[UPS\x20Web]\x20執行出錯:',_0x2328c9);}}async function _0x8719c(_0x24cea7){const _0x47af55=_0x244625;console[_0x47af55(_0x209ccb._0x2c37ed)](_0x47af55(_0x209ccb._0x1f3976)+_0x24cea7);const _0x4bfeb5=document[_0x47af55(_0x209ccb._0x5ab655)](_0x47af55(0x1db));for(const _0x525638 of _0x4bfeb5){_0x525638[_0x47af55(_0x209ccb._0x5c103c)](),await _0x1f7f3e(0x64);}try{const _0x20fdfd=document[_0x47af55(0x1bd)](_0x47af55(_0x209ccb._0x300a96));if(_0x20fdfd){const _0x553d91=document[_0x47af55(_0x209ccb._0x39f3d7)](_0x47af55(_0x209ccb._0x7d0fce));if(_0x553d91)_0x553d91['click']();await _0x1f7f3e(0xc8);}const _0x476709=document[_0x47af55(_0x209ccb._0x5528cb)]('div.action-buttons\x20button[aria-label=\x22Clear\x22]');_0x476709&&(_0x476709['click'](),await _0x1f7f3e(0xc8));const _0xca9f0=await _0xdc74b8(_0x47af55(0x1da));_0xca9f0[_0x47af55(_0x209ccb._0x3c92b4)]=_0x24cea7,_0xca9f0[_0x47af55(0x1b7)](new Event(_0x47af55(_0x209ccb._0x3bc3d5),{'bubbles':!![]}));const _0x2a724e=await _0xdc74b8(_0x47af55(0x1cf));if(_0x2a724e[_0x47af55(0x1bc)])await _0x1f7f3e(0xc8);!_0x2a724e[_0x47af55(0x1bc)]?_0x2a724e['click']():console['warn'](_0x47af55(_0x209ccb._0x2ad261));}catch(_0xdd84a2){console['error']('[IVP]\x20執行出錯:',_0xdd84a2);}}window[_0x244625(_0x1e62ac._0x138ad4)](_0x244625(_0x1e62ac._0x3c4fe5),async function(_0x3c6d50){const _0x3bf490=_0x244625;if(_0x3c6d50[_0x3bf490(0x1b2)]!==_0x3d1394)return;const _0x513648=_0x3c6d50[_0x3bf490(_0x2dadc7._0x17a87e)];if(_0x513648?.[_0x3bf490(0x1d7)]==='CEC_SEARCH_REQUEST'&&_0x513648[_0x3bf490(0x1c0)]){const {trackingNumber:_0x1d1866,timestamp:_0x44f48c}=_0x513648[_0x3bf490(0x1c0)];if(_0x44f48c>_0x5c70c6){const _0xf34d43=_0x505088(_0x1d1866);if(_0xf34d43)console[_0x3bf490(0x1c9)](_0x3bf490(0x1cb)+_0x1d1866+_0x3bf490(0x1b3));else{if(_0x36ceaa)await _0x8719c(_0x1d1866);else _0x1d89b5&&await _0x1cb5cf(_0x1d1866);}_0x5c70c6=_0x44f48c,_0x3c6d50['source']&&_0x3c6d50['source'][_0x3bf490(_0x2dadc7._0x484456)]({'type':_0x3bf490(0x1a6),'payload':{'timestamp':_0x44f48c}},_0x3c6d50['origin']);}}},![]),_0x39e319();}()));function _0x369b(_0x4a2f9b,_0x5d199d){const _0x444037=_0x4440();return _0x369b=function(_0x369b2c,_0x1f19ef){_0x369b2c=_0x369b2c-0x197;let _0x1b3e6e=_0x444037[_0x369b2c];if(_0x369b['FGOYUx']===undefined){var _0x210931=function(_0x17349a){const _0x36ceaa='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1d89b5='',_0x3d1394='';for(let _0x5c70c6=0x0,_0x1f7f3e,_0xdc74b8,_0x39e319=0x0;_0xdc74b8=_0x17349a['charAt'](_0x39e319++);~_0xdc74b8&&(_0x1f7f3e=_0x5c70c6%0x4?_0x1f7f3e*0x40+_0xdc74b8:_0xdc74b8,_0x5c70c6++%0x4)?_0x1d89b5+=String['fromCharCode'](0xff&_0x1f7f3e>>(-0x2*_0x5c70c6&0x6)):0x0){_0xdc74b8=_0x36ceaa['indexOf'](_0xdc74b8);}for(let _0x505088=0x0,_0x1cb5cf=_0x1d89b5['length'];_0x505088<_0x1cb5cf;_0x505088++){_0x3d1394+='%'+('00'+_0x1d89b5['charCodeAt'](_0x505088)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3d1394);};_0x369b['ioLjfp']=_0x210931,_0x4a2f9b=arguments,_0x369b['FGOYUx']=!![];}const _0xd5ba2f=_0x444037[0x0],_0x2ba4a6=_0x369b2c+_0xd5ba2f,_0x5820f5=_0x4a2f9b[_0x2ba4a6];return!_0x5820f5?(_0x1b3e6e=_0x369b['ioLjfp'](_0x1b3e6e),_0x4a2f9b[_0x2ba4a6]=_0x1b3e6e):_0x1b3e6e=_0x5820f5,_0x1b3e6e;},_0x369b(_0x4a2f9b,_0x5d199d);}function _0x4440(){const _0x15b160=['C3rbChbFDhjHy2TPBMDoDw1Izxi','DMfSDwu','zgLZywjSzwq','CxvLCNLtzwXLy3rVCG','AxzWlMLUC2LKzs51ChmUy29T','w0TLzxbbBgL2zv0G5zwF5yUv5AsX5PwxoG','Cgf5Bg9Hza','odDcv1fhuxe','mtC0mJuXmgLVvNLMDq','CMvWBgfJzq','z2v0rwXLBwvUDej5swq','yM9KEq','zgf0yq','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','Ag9ZDg5HBwu','Bg9N','zxjYB3i','w1jLy2vPDMvYxsdPOihPNAlLT7lPOA/NPlROMz/NORWG','B2jZzxj2zq','vvbtifDLyIbnB2rL','vhjHy2SGqwDHAw4GkfrVCcK','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLT0ExbLpsjZDwjTAxqIxq','y3jLyxrLt2jQzwn0vvjm','Aw5JBhvKzxm','y2HHBMDL','mtiYmJu0oeTxvKLmsa','w0Lwuf0G5z+36kgm5P+L6kMIoIa','Aw5WDxrjza','svzqie1Vzgu','DhLWzq','w0Lwuf0G5O+q5lQK5OYj6yIv5lUn6jMv5PA856Ab55sO54Ua5Owl44cc','ywrKrxzLBNrmAxn0zw5LCG','Aw5WDxrBAwq9iKvUDgvYifrYywnRAw5Nie51BwjLCIjD','zgL2lMnKAY1VDMvYBgf5lxbHBMuGBgK6AgfZkgvTlMzHlxrPBwvZkq','C3rbChbFDhjHy2Tbz2fPBL90CMfJA2LUz051BuvUDhj5','DxbZlMnVBq','ndq4ote5mNHirvDXDq','mJeZnti2ofvpzNHyAW','B25TzxnZywDL','i3rVz2DSzs12AxnPyMLSAxr5id4GyNv0Dg9U','w1vquYbxzwjDioAQOUA4RowiSow9IoEQL+MxNoMwIEAmIEMiLE+8JoATO+wCQoM7NUAtII4UlG','Bg9JyxrPB24','Cg9ZDe1LC3nHz2u','yNrUswq','mZy3mJa0rND4Eez3','Dgv4DenVBNrLBNq','lcaJ','mZeYnM9IrvbMva','i21HAw5dB250ywLUzxiGpIbHChaTDhjHy2TPBMCGpIbKAxyGpIbKAxyGpIbKAxyUy29UDgfPBMvYlwzSDwLKlMqTBM9Uzq','n0L5ufPlwG','y2XPy2S','AdyUAdz0CMfJA2LUzYbZCgfU','562j5B6f5ywd57sGici','q0vdx1jfuvvfu1rFuKvdruLwruq','cIaGicaGicaGicaGicaGicbZzxrjBNrLCNzHBcGOksa9pIb7cIaGicaGicaGicaGicaGicaGicaGC2vSzI5WB3n0twvZC2fNzsGNDgLJAYCPoWOGicaGicaGicaGicaGicaGFsWGnJaWmdaPoWOGicaGicaGicaGica','w01VzgvDia','Aw5WDxq','CxvLCNLtzwXLy3rVCKfSBa','w1vUAxzLCNnHBcbszwnLAxzLCIbwmtrDiowvN+wlLEAwVdOG','zgLZy29UBMvJDa','vw5RBM93BIbnB2rL','DhjPBq','twfPBIbuCMfJAYaOq2vUDgvYkq','yMX1CG','BwvZC2fNzq','B3jPz2LU','77Ym6lEZ6ygo5P+L6kMI44cc','Ahr0Chm6lY91ChnKCML2zs5SAwDODg5PBMCUzM9Yy2uUy29T','iIdOTOxMMyi','mtC0ntrnsLbpEge','zgLZCgf0y2HfDMvUDa','ndG1nvvtyvrwsW','i3n0x0fWCf9wAwv3x0rLDgfPBhm'];_0x4440=function(){return _0x15b160;};return _0x4440();}