// ==UserScript==
// @name         通用接收器
// @namespace    Universal Receiver
// @version      V21
// @description  同時支持 IVP 內部系統與 UPS 官網的自動查詢接收器。修復後台UPS官網因自身腳本崩潰導致按鈕無法點擊的問題(V21: 強制解鎖模式)。
// @author       Jerry Law
// @match        https://ivp.inside.ups.com/internal-visibility-portal*
// @match        https://www.ups.com/track*
// @grant        none
// @run-at       document-idle
// @updateURL    https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// @downloadURL  https://github.com/Jerry199022/Work-Release/raw/refs/heads/main/IVPReceiver.user.js
// ==/UserScript==

function _0x4563(_0x40f4d8,_0xb86e5a){const _0x6b90d4=_0x6b90();return _0x4563=function(_0x4563de,_0x5c686b){_0x4563de=_0x4563de-0xee;let _0x5f4ba1=_0x6b90d4[_0x4563de];if(_0x4563['PbgrQb']===undefined){var _0x44caf4=function(_0x2c46e0){const _0x26af2e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x325c7f='',_0x215959='';for(let _0x5c7a49=0x0,_0x3d1aa0,_0x429532,_0x35d781=0x0;_0x429532=_0x2c46e0['charAt'](_0x35d781++);~_0x429532&&(_0x3d1aa0=_0x5c7a49%0x4?_0x3d1aa0*0x40+_0x429532:_0x429532,_0x5c7a49++%0x4)?_0x325c7f+=String['fromCharCode'](0xff&_0x3d1aa0>>(-0x2*_0x5c7a49&0x6)):0x0){_0x429532=_0x26af2e['indexOf'](_0x429532);}for(let _0x2e1205=0x0,_0xf55ddd=_0x325c7f['length'];_0x2e1205<_0xf55ddd;_0x2e1205++){_0x215959+='%'+('00'+_0x325c7f['charCodeAt'](_0x2e1205)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x215959);};_0x4563['YESdBH']=_0x44caf4,_0x40f4d8=arguments,_0x4563['PbgrQb']=!![];}const _0x589625=_0x6b90d4[0x0],_0x5bc589=_0x4563de+_0x589625,_0xd3aaad=_0x40f4d8[_0x5bc589];return!_0xd3aaad?(_0x5f4ba1=_0x4563['YESdBH'](_0x5f4ba1),_0x40f4d8[_0x5bc589]=_0x5f4ba1):_0x5f4ba1=_0xd3aaad,_0x5f4ba1;},_0x4563(_0x40f4d8,_0xb86e5a);}(function(_0x2a1015,_0x23d9fa){const _0x300baa={_0x236643:0x11d,_0x26cc99:0x140,_0x35d79d:0x112,_0x4bcf3f:0x101,_0x2d44b7:0x134},_0x4d167d=_0x4563,_0x5401b8=_0x2a1015();while(!![]){try{const _0x5b533e=-parseInt(_0x4d167d(0x111))/0x1+-parseInt(_0x4d167d(_0x300baa._0x236643))/0x2+-parseInt(_0x4d167d(0xef))/0x3*(-parseInt(_0x4d167d(_0x300baa._0x26cc99))/0x4)+parseInt(_0x4d167d(0xf6))/0x5*(parseInt(_0x4d167d(_0x300baa._0x35d79d))/0x6)+parseInt(_0x4d167d(0x13c))/0x7+parseInt(_0x4d167d(_0x300baa._0x4bcf3f))/0x8*(-parseInt(_0x4d167d(0x13e))/0x9)+parseInt(_0x4d167d(_0x300baa._0x2d44b7))/0xa;if(_0x5b533e===_0x23d9fa)break;else _0x5401b8['push'](_0x5401b8['shift']());}catch(_0x35604a){_0x5401b8['push'](_0x5401b8['shift']());}}}(_0x6b90,0xdc6ce),(function(){'use strict';const _0x2583a3={_0x40b64e:0xf1,_0x5b053e:0x12c,_0x27c016:0x141,_0x624ed7:0x122,_0xcedab1:0x129,_0x1b802a:0x119,_0x4c3a50:0x142,_0x59a4a9:0x103},_0x2272d1={_0x12d5d9:0xfc,_0x1af447:0x121,_0x6a9743:0x124,_0x45d52b:0x125,_0x2140cd:0x102},_0x2219d9={_0x41b741:0xff,_0x497ce6:0x106,_0x5bba69:0x138,_0xa5e345:0x123,_0x51331e:0x10b,_0x4966ea:0x123,_0x3921d2:0xf0,_0xe26920:0x10f,_0x3284f4:0x107},_0xe9a7d={_0x40a6a8:0x129,_0x232366:0x10c,_0x12b0db:0x106,_0x5a2d7c:0x13a,_0x1a9a9c:0x13f,_0x22b0bd:0x10a,_0x534d57:0xee,_0xdd7481:0x110,_0x4f5e87:0x12e,_0x330509:0x110,_0x58a033:0x133},_0x3308b5={_0x5864a8:0x11c,_0x3df53e:0xf3,_0x313a4f:0x115},_0x4efe9a={_0x2c64e7:0xfa},_0xcf0624={_0x14226a:0x10e,_0x2ed376:0x10f,_0x43b375:0x118,_0x491198:0x10d,_0x3f3292:0x123},_0x5e7d52={_0x25ab37:0x13a,_0x28c325:0x139,_0x4b346e:0x120,_0x31d868:0x108,_0x275439:0xfe,_0x388540:0xfe,_0x2a6fa6:0x11b,_0x58dfde:0x11a,_0x253414:0x12d,_0x3375bb:0x144,_0x16e9e3:0x104},_0x404a34=_0x4563;const _0x2c46e0=window['location'][_0x404a34(_0x2583a3._0x40b64e)],_0x26af2e=_0x2c46e0[_0x404a34(_0x2583a3._0x5b053e)](_0x404a34(0x12a)),_0x325c7f=_0x2c46e0['includes'](_0x404a34(_0x2583a3._0x27c016)),_0x215959=_0x404a34(_0x2583a3._0x624ed7);console[_0x404a34(_0x2583a3._0xcedab1)](_0x404a34(_0x2583a3._0x1b802a)+_0x2c46e0+'\x20(強制解鎖模式)');let _0x5c7a49=0x0;const _0x3d1aa0=_0x2e0ca1=>new Promise(_0x1cdc42=>setTimeout(_0x1cdc42,_0x2e0ca1));function _0x429532(_0x6cd095,_0x16482e=document[_0x404a34(0x110)],_0x2d9403=0x1388){const _0x5e8cf5={_0x30ccb6:0xf9};return new Promise((_0x2b9b7c,_0x15ba39)=>{const _0x62a8b4={_0x3417d7:0x131},_0x348e24={_0xfff9:0x11c},_0x5296e4=_0x4563,_0x573780=_0x16482e['querySelector'](_0x6cd095);if(_0x573780)return _0x2b9b7c(_0x573780);const _0x213838=new MutationObserver(()=>{const _0x47edd8=_0x4563,_0x617057=_0x16482e[_0x47edd8(_0x348e24._0xfff9)](_0x6cd095);_0x617057&&(_0x213838[_0x47edd8(0x128)](),_0x2b9b7c(_0x617057));});_0x213838[_0x5296e4(_0x5e8cf5._0x30ccb6)](_0x16482e,{'childList':!![],'subtree':!![]}),setTimeout(()=>{const _0x45c455=_0x5296e4;_0x213838[_0x45c455(0x128)](),_0x15ba39(new Error(_0x45c455(0x13b)+_0x6cd095+_0x45c455(_0x62a8b4._0x3417d7)));},_0x2d9403);});}function _0x35d781(_0x4b0e3c,_0x373fed){const _0x2ba1ac=_0x404a34;if(!_0x4b0e3c)return;const _0xb943eb=document[_0x2ba1ac(_0x5e7d52._0x25ab37)];if(!_0xb943eb)try{_0x4b0e3c['focus']();}catch(_0x37564d){}try{const _0x340bda=Object[_0x2ba1ac(0x143)](window['HTMLInputElement'][_0x2ba1ac(0xf7)],'value')[_0x2ba1ac(_0x5e7d52._0x28c325)];_0x340bda[_0x2ba1ac(_0x5e7d52._0x4b346e)](_0x4b0e3c,_0x373fed);}catch(_0x1ba3b4){_0x4b0e3c['value']=_0x373fed;}if(_0x4b0e3c[_0x2ba1ac(0x108)]!==_0x373fed)_0x4b0e3c[_0x2ba1ac(_0x5e7d52._0x31d868)]=_0x373fed;if(_0xb943eb)_0x4b0e3c[_0x2ba1ac(_0x5e7d52._0x275439)](new Event('input',{'bubbles':!![]})),_0x4b0e3c[_0x2ba1ac(0xfe)](new Event(_0x2ba1ac(0xfd),{'bubbles':!![]})),_0x4b0e3c[_0x2ba1ac(_0x5e7d52._0x388540)](new Event('blur',{'bubbles':!![]}));else{const _0x48746f=[new KeyboardEvent(_0x2ba1ac(_0x5e7d52._0x2a6fa6),{'bubbles':!![],'key':_0x2ba1ac(0x11f)}),new KeyboardEvent(_0x2ba1ac(_0x5e7d52._0x58dfde),{'bubbles':!![],'key':'Process'}),new Event(_0x2ba1ac(0x127),{'bubbles':!![]}),new Event('change',{'bubbles':!![]}),new KeyboardEvent(_0x2ba1ac(_0x5e7d52._0x253414),{'bubbles':!![],'key':_0x2ba1ac(0x11f)}),new Event(_0x2ba1ac(_0x5e7d52._0x3375bb),{'bubbles':!![]})];_0x48746f[_0x2ba1ac(_0x5e7d52._0x16e9e3)](_0x541850=>_0x4b0e3c[_0x2ba1ac(0xfe)](_0x541850));}}function _0x2e1205(_0x32576d){const _0x29083=_0x404a34;if(!_0x32576d)return;_0x32576d[_0x29083(_0xcf0624._0x14226a)](_0x29083(_0xcf0624._0x2ed376)),_0x32576d['classList']['remove']('disabled'),_0x32576d[_0x29083(0xf4)](_0x29083(0xf8),_0x29083(_0xcf0624._0x43b375)),_0x32576d[_0x29083(_0xcf0624._0x491198)]['border']=_0x29083(0x109),_0x32576d[_0x29083(_0xcf0624._0x3f3292)]();}function _0xf55ddd(){const _0x452e26=_0x404a34;try{const _0xb428d2=new Blob([_0x452e26(0x137)],{'type':'application/javascript'}),_0x219dc1=new Worker(URL[_0x452e26(0x126)](_0xb428d2));_0x219dc1[_0x452e26(_0x4efe9a._0x2c64e7)]=()=>{};}catch(_0x2973e1){console['error'](_0x452e26(0x114),_0x2973e1);}}function _0x3638f8(_0x4372aa){const _0x40c901=_0x404a34;if(!_0x4372aa)return![];let _0x3dacc6=null;if(_0x26af2e)_0x3dacc6=document[_0x40c901(_0x3308b5._0x5864a8)](_0x40c901(0x132));else{if(_0x325c7f)_0x3dacc6=document['getElementById']('stApp_trackingNumber');}if(_0x3dacc6){const _0x202b43=_0x3dacc6[_0x40c901(0xf2)]['trim']()[_0x40c901(_0x3308b5._0x3df53e)](/\s/g,''),_0xa53ab6=_0x4372aa['replace'](/\s/g,'');if(_0x202b43[_0x40c901(0x115)]()===_0xa53ab6[_0x40c901(_0x3308b5._0x313a4f)]())return!![];}return![];}async function _0x105486(_0x4b1c97){const _0x41e4bc=_0x404a34;console[_0x41e4bc(_0xe9a7d._0x40a6a8)](_0x41e4bc(_0xe9a7d._0x232366)+_0x4b1c97+_0x41e4bc(_0xe9a7d._0x12b0db)+document[_0x41e4bc(_0xe9a7d._0x5a2d7c)]+')');const _0x40fbad=[{'name':_0x41e4bc(0x136),'inputId':_0x41e4bc(0x12f),'btnId':'stApp_trackAgain_getTrack'},{'name':_0x41e4bc(0x135),'inputId':_0x41e4bc(0xfb),'btnId':'stApp_btnTrack'}];try{const _0xb017d1=document['querySelector'](_0x41e4bc(0x13d));_0xb017d1&&(_0xb017d1['click'](),await _0x3d1aa0(0x12c));let _0x735ba6=document[_0x41e4bc(0x13f)](_0x40fbad[0x0][_0x41e4bc(0xee)])||document[_0x41e4bc(_0xe9a7d._0x1a9a9c)](_0x40fbad[0x1]['inputId']);if(!_0x735ba6)try{const _0x366db7='#'+_0x40fbad[0x0][_0x41e4bc(0xee)]+_0x41e4bc(_0xe9a7d._0x22b0bd)+_0x40fbad[0x1][_0x41e4bc(_0xe9a7d._0x534d57)];_0x735ba6=await _0x429532(_0x366db7,document[_0x41e4bc(_0xe9a7d._0xdd7481)],0xbb8);}catch(_0x1db343){return;}const _0x341555=_0x40fbad[_0x41e4bc(0x130)](_0x56c5d5=>_0x56c5d5['inputId']===_0x735ba6['id']);if(!_0x341555)return;_0x35d781(_0x735ba6,_0x4b1c97),await _0x3d1aa0(0x1f4);let _0x4ede6a=document[_0x41e4bc(_0xe9a7d._0x1a9a9c)](_0x341555[_0x41e4bc(0x12e)]);if(!_0x4ede6a)try{_0x4ede6a=await _0x429532('#'+_0x341555[_0x41e4bc(_0xe9a7d._0x4f5e87)],document['body'],0x7d0);}catch(_0xa67c7d){}if(_0x4ede6a){console[_0x41e4bc(0x129)](_0x41e4bc(0x100)),_0x2e1205(_0x4ede6a),await _0x3d1aa0(0x1f4),_0x2e1205(_0x4ede6a);try{const _0x3fed5c=await _0x429532('#st_App_View_Details',document[_0x41e4bc(_0xe9a7d._0x330509)],0x1f40);_0x3fed5c&&(await _0x3d1aa0(0xc8),_0x3fed5c['click']());}catch(_0x235e2d){}}}catch(_0x35693a){console['error'](_0x41e4bc(_0xe9a7d._0x58a033),_0x35693a);}}async function _0x437fd3(_0x2cdd9f){const _0x28b3f6=_0x404a34;console['log'](_0x28b3f6(_0x2219d9._0x41b741)+_0x2cdd9f+_0x28b3f6(_0x2219d9._0x497ce6)+document[_0x28b3f6(0x13a)]+')');const _0x38626d=document[_0x28b3f6(0x116)](_0x28b3f6(_0x2219d9._0x5bba69));for(const _0x253aae of _0x38626d){_0x253aae[_0x28b3f6(0x123)](),await _0x3d1aa0(0x64);}try{const _0xa4d8f1=document[_0x28b3f6(0x11c)](_0x28b3f6(0x11e));if(_0xa4d8f1){const _0x43cb0e=document[_0x28b3f6(0x11c)](_0x28b3f6(0x117));if(_0x43cb0e)_0x43cb0e[_0x28b3f6(_0x2219d9._0xa5e345)]();await _0x3d1aa0(0x12c);}const _0x21132a=document['querySelector'](_0x28b3f6(_0x2219d9._0x51331e));_0x21132a&&(_0x21132a[_0x28b3f6(_0x2219d9._0x4966ea)](),await _0x3d1aa0(0x12c));const _0x3b4ba7=await _0x429532(_0x28b3f6(0x105));_0x35d781(_0x3b4ba7,_0x2cdd9f);const _0x571b1c=await _0x429532(_0x28b3f6(_0x2219d9._0x3921d2));let _0x21194d=0x0;while(_0x571b1c[_0x28b3f6(_0x2219d9._0xe26920)]&&_0x21194d<0x5){await _0x3d1aa0(0xc8),_0x21194d++;if(_0x21194d%0x2===0x0)_0x35d781(_0x3b4ba7,_0x2cdd9f);}_0x2e1205(_0x571b1c);}catch(_0xfa7bd5){console[_0x28b3f6(_0x2219d9._0x3284f4)]('[IVP]\x20執行出錯:',_0xfa7bd5);}}window[_0x404a34(_0x2583a3._0x4c3a50)](_0x404a34(_0x2583a3._0x59a4a9),async function(_0x5b4826){const _0x9356ae=_0x404a34;if(_0x5b4826['origin']!==_0x215959)return;const _0x4b8bd7=_0x5b4826['data'];if(_0x4b8bd7?.[_0x9356ae(_0x2272d1._0x12d5d9)]===_0x9356ae(0x113)&&_0x4b8bd7[_0x9356ae(0x121)]){const {trackingNumber:_0x35a18c,timestamp:_0x11a97f}=_0x4b8bd7[_0x9356ae(_0x2272d1._0x1af447)];if(_0x11a97f>_0x5c7a49){const _0x7f206d=_0x3638f8(_0x35a18c);if(_0x7f206d)console[_0x9356ae(0x129)](_0x9356ae(_0x2272d1._0x6a9743)+_0x35a18c+_0x9356ae(0x12b));else{if(_0x26af2e)await _0x437fd3(_0x35a18c);else{if(_0x325c7f)await _0x105486(_0x35a18c);}}_0x5c7a49=_0x11a97f,_0x5b4826[_0x9356ae(_0x2272d1._0x45d52b)]&&_0x5b4826[_0x9356ae(0x125)]['postMessage']({'type':_0x9356ae(0xf5),'payload':{'timestamp':_0x11a97f}},_0x5b4826[_0x9356ae(_0x2272d1._0x2140cd)]);}}},![]),_0xf55ddd();}()));function _0x6b90(){const _0x1236f3=['zgLZCgf0y2HfDMvUDa','w0Lwuf0G5z+36kgm5P+L6kMIoIa','w1vquYbxzwjDiowyL+IPPUw8T+wiTUM7NUAtII4UlG','mJy0qKvQCxnd','B3jPz2LU','BwvZC2fNzq','zM9YrwfJAa','Aw5WDxrBAwq9iKvUDgvYifrYywnRAw5Nie51BwjLCIjD','icHiAwrKzw46ia','zxjYB3i','DMfSDwu','mNb4ihnVBgLKihjLza','lcaJ','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLTHCMLHlwXHyMvSpsjdBgvHCIjD','w1vquYbxzwjDiowFT+IHJoAFPEIPOJOG','C3r5Bgu','CMvTB3zLqxr0CMLIDxrL','zgLZywjSzwq','yM9KEq','nZC3mZu1y052Aurk','mZe2nZryDeLIrgK','q0vdx1nfqvjdsf9srvfvrvnu','w0TLzxbbBgL2zv0GrxjYB3i6','Dg9mB3DLCKnHC2u','CxvLCNLtzwXLy3rVCKfSBa','i3rVz2DSzs12AxnPyMLSAxr5id4GyNv0Dg9U','zMfSC2u','w1vUAxzLCNnHBcbszwnLAxzLCIbwmJfDiowvN+wlLEAwVdOG','A2v5ChjLC3m','A2v5zg93BG','CxvLCNLtzwXLy3rVCG','mZqZmZG4nK9dzw5trq','i21HAw5dB250ywLUzxiGpIbHChaTDhjHy2TPBMCGpIbKAxyGpIbKAxyGpIbKAxyUy29UDgfPBMvYlwzSDwLKlMqTBM9Uzq','uhjVy2vZCW','y2fSBa','Cgf5Bg9Hza','Ahr0Chm6lY91ChnKCML2zs5SAwDODg5PBMCUzM9Yy2uUy29T','y2XPy2S','w1jLy2vPDMvYxsdPOihPNAlLT7lPOA/NPlROMz/NORWG','C291CMnL','y3jLyxrLt2jQzwn0vvjm','Aw5WDxq','zgLZy29UBMvJDa','Bg9N','AxzWlMLUC2LKzs51ChmUy29T','77Ym6lEZ6ygo5P+L6kMI44cc','Aw5JBhvKzxm','A2v5Dxa','yNrUswq','C3rbChbFDhjHy2Tbz2fPBL90CMfJA2LUz051BuvUDhj5','zMLUza','iIdOTOxMMyi','AdyUAdz0CMfJA2LUzYbZCgfU','w1vquYbxzwjDiowFT+IHJowhUUMmRZO','ntCYndy5mfLpCgPZzq','twfPBIbuCMfJAYaOq2vUDgvYkq','vhjHy2SGqwDHAw4GkfrVCcK','C2v0sw50zxj2ywWOkcKGpt4GC2vSzI5WB3n0twvZC2fNzsGNDgLJAYCPlcaYntaPoW','zgL2lMnKAY1VDMvYBgf5lxbHBMuGBgK6AgfZkgvTlMzHlxrPBwvZkq','C2v0','AgLKzgvU','562j5B6f5ywd57sGici','otu0nJqYnxjYDLbZrG','yNv0Dg9UlMnSB3nLw2rHDgeTzgLZBwLZCZ0IBw9KywWIxq','otiWotDNsKfjuKG','z2v0rwXLBwvUDej5swq','mJGWD2jdy01T','DxbZlMnVBq','ywrKrxzLBNrmAxn0zw5LCG','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','yMX1CG','Aw5WDxrjza','mJm5mtzMz2fuEg8','zgL2lMfJDgLVBI1IDxr0B25Zigj1DhrVBLT0ExbLpsjZDwjTAxqIxq','Ag9ZDg5HBwu','Dgv4DenVBNrLBNq','CMvWBgfJzq','C2v0qxr0CMLIDxrL','q0vdx1jfuvvfu1rFuKvdruLwruq','mte3nwHNrNPxEa','ChjVDg90ExbL','yxjPys1KAxnHyMXLza','B2jZzxj2zq','B25TzxnZywDL','C3rbChbFDhjHy2TPBMDoDw1Izxi','DhLWzq','y2HHBMDL'];_0x6b90=function(){return _0x1236f3;};return _0x6b90();}